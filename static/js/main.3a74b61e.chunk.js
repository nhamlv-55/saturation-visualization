(this["webpackJsonpvisualization-frontend"]=this["webpackJsonpvisualization-frontend"]||[]).push([[1],{110:function(e,t,a){e.exports=a.p+"static/media/eye.bf3c357b.svg"},137:function(e,t,a){e.exports=a(239)},142:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},147:function(e){e.exports=JSON.parse('{"hidden":{"hidden":true,"markedStyle":{"border":"#ffffff00","background":"#ffffff00"},"highlightStyle":{"border":"#ffffff00","background":"#ffffff00"},"shape":"box","text":"#ffffff00","defaultStyle":{"border":"#ffffff00","background":"#ffffff00"}},"preprocessing-deleted":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#8cd1c9","background":"#abe0d1"}},"preprocessing":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#8cd1c9","background":"#abe0d1"}},"conjecture":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#009988","background":"#44bb99"}},"theory-axiom-deleted":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#999999","defaultStyle":{"border":"#b4c8dd","background":"#c8ddf1"}},"theory-axiom":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"deleted":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#999999","defaultStyle":{"border":"#f1f1f1","background":"#f8f8f8"}},"passive":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#000000","defaultStyle":{"border":"#FF3232","background":"#FF5959"}},"activated-deleted":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#bbbbbb","background":"#dddddd"}},"activated":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#bbbbbb","background":"#dddddd"}},"lemma":{"hidden":false,"markedStyle":{"border":"#16941c","background":"#a3f7a7"},"highlightStyle":{"border":"#16941c","background":"#a3f7a7"},"shape":"star","text":"#000000","defaultStyle":{"border":"#16941c","background":"#a3f7a7"}},"boundary-hidden":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"boundary":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"sameExprID":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}}}')},15:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));a(23);const n={"<=":">",">=":"<","!=":"=","<":">=",">":"<=","=":"!=","&&":"||","||":"&&",not:""};function s(e){return e}function r(e,t){let a=e.split(t),n=[];for(let s=0;s<a.length;s++)""!==a[s]&&n.push(a[s].trim());return n}function o(e){return e.match(/.*.smt2/)}},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},166:function(e,t,a){},21:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return ASTTransformer})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AST}));var _home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(49),_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_uber_s_exify__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(61),_readable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15);const _=__webpack_require__(23),NULL_IDX=-100;class ASTNode{constructor(e,t,a,n){this.nodeID=void 0,this.token=void 0,this.shouldBreak=void 0,this.shouldInBracket=void 0,this.parentID=void 0,this.children=void 0,this.transformers=[],this.startLine=void 0,this.endLine=void 0,this.startOffset=void 0,this.endOffset=void 0,this.nodeID=e,this.token=t,this.shouldBreak=0,this.shouldInBracket=1,this.parentID=a,this.children=n,this.startLine=-1,this.endLine=-1,this.startOffset=-1,this.endOffset=-1}updateRange(e){this.startLine=e.startLine,this.startOffset=e.startOffset,this.endLine=e.endLine,this.endOffset=e.endOffset}}function isOpt(e){return!Array.isArray(e)&&["+","-","*","/",">","<",">=","<=","=","and","or","not","=>","assert","declare-datatypes","forall","exists","define","select","store"].indexOf(e.token)>-1}class ASTTransformer extends Object{run(e,t,a){return"runStack"!==a.action?this[a.action](e,t,a.params,a.condition):[!1,t]}runStack(e,t){let a=_.cloneDeep(e),n=0;for(;n<t.length;){let e=!0;var s,r=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(a.nodeList);try{for(r.s();!(s=r.n()).done;){var o=s.value;if(o.nodeID!==NULL_IDX){var i=this.run([o.nodeID],a,t[n]),l=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(i,2);if(e=l[0],a=l[1],e)break}}}catch(c){r.e(c)}finally{r.f()}e||n++}return a}getCondition(e,t,a){let n=a.nodeList[t[t.length-1]],s="true";switch(e){case"move":{const e=n.token;s="node.token === ".concat(e);break}case"changeBreak":{const e=n.shouldBreak,t=a.nodeDepth(n);s="ast.nodeDepth(node) === ".concat(t," && node.shouldBreak === ").concat(e);break}case"changeBracket":{const e=n.shouldInBracket,t=a.nodeDepth(n);s="ast.nodeDepth(node) === ".concat(t," && node.shouldInBracket === ").concat(e);break}case"squashNegation":case"replace":s="true";break;default:{const e=n.token,t=a.nodeDepth(n);s='node.token === "'.concat(e,'" && ast.nodeDepth(node) === ').concat(t);break}}return s}move(nodes,ast,params,condition){let node=ast.nodeList[nodes[nodes.length-1]];const movable=["+","*","=","and","or"];let cloned_ast=_.cloneDeep(ast),dirty=!1;if(eval(condition)){let e=cloned_ast.nodeList[node.parentID];Object(_util__WEBPACK_IMPORTED_MODULE_2__.a)("direction"in params),Object(_util__WEBPACK_IMPORTED_MODULE_2__.a)(-1!==movable.indexOf(e.token),"The parent node doesnt support reordering.");let t=e.children;const a=t.indexOf(node.nodeID);switch(params.direction){case"l":if(a>0){var _ref=[t[a-1],t[a]];t[a]=_ref[0],t[a-1]=_ref[1],dirty=!0}break;case"r":if(a<t.length-1){var _ref2=[t[a+1],t[a]];t[a]=_ref2[0],t[a+1]=_ref2[1],dirty=!0}}cloned_ast.buildVis()}return[dirty,cloned_ast]}flipCmp(nodes,ast,params,condition){let node=ast.nodeList[nodes[nodes.length-1]],cloned_ast=_.cloneDeep(ast),dirty=!1;if(eval(condition)){let e;switch(node.token){case"=":e=new ASTNode(node.nodeID,"=",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case"<":e=new ASTNode(node.nodeID,">",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case">":e=new ASTNode(node.nodeID,"<",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case">=":e=new ASTNode(node.nodeID,"<=",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case"<=":e=new ASTNode(node.nodeID,">=",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;default:e=node}cloned_ast.nodeList[node.nodeID]=e,cloned_ast.buildVis()}return[dirty,cloned_ast]}toImp(nodes,ast,params,condition){if(0===nodes.length)return[!1,_.cloneDeep(ast)];let node=ast.nodeList[nodes[nodes.length-1]],cloned_ast=_.cloneDeep(ast),cloned_node=cloned_ast.nodeList[node.nodeID],dirty=!1;if(eval(condition)){let e=cloned_ast.nodeList[cloned_node.parentID];if(!e||"or"!==e.token)return[!1,cloned_ast];let t=new Array,a=new Array,n,s;var _iterator2=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(e.children),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var cID=_step2.value;if(nodes.includes(cID)){let e=cloned_ast.negateNode(cID);t.push(e)}else a.push(cID)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}if(t.length>1){n=new ASTNode(cloned_ast.nodeList.length,"and",e.nodeID,t),cloned_ast.nodeList.push(n);var _iterator3=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(t),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var childID=_step3.value;cloned_ast.nodeList[childID].parentID=n.nodeID}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}else n=cloned_ast.nodeList[t[0]];if(a.length>1){s=new ASTNode(cloned_ast.nodeList.length,"or",e.nodeID,a),cloned_ast.nodeList.push(s);var _iterator4=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(a),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var childID=_step4.value;cloned_ast.nodeList[childID].parentID=s.nodeID}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}else s=cloned_ast.nodeList[a[0]];e.token="=>",e.children=[n.nodeID,s.nodeID],cloned_ast.buildVis(),dirty=!0}return[dirty,cloned_ast]}replace(nodes,ast,params,condition){let node=ast.nodeList[_.last(nodes)],cloned_ast=_.cloneDeep(ast),dirty=!1,source=params.source;if(eval(condition)){params.regex&&(source=new RegExp(params.source));var _iterator5=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(cloned_ast.nodeList),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var cloned_node=_step5.value;let e=cloned_node.token;cloned_node.token=e.replace(source,params.target),cloned_node.token!==e&&(dirty=!0)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}dirty&&cloned_ast.buildVis()}return[dirty,cloned_ast]}changeBreak(nodes,ast,params,condition){let node=ast.nodeList[_.last(nodes)],cloned_ast=_.cloneDeep(ast);return eval(condition)?(cloned_ast.nodeList[node.nodeID].shouldBreak^=1,cloned_ast.buildVis(),[!0,cloned_ast]):[!1,cloned_ast]}changeBracket(nodes,ast,params,condition){let node=ast.nodeList[_.last(nodes)],cloned_ast=_.cloneDeep(ast);return eval(condition)?(cloned_ast.nodeList[node.nodeID].shouldInBracket^=1,cloned_ast.buildVis(),[!0,cloned_ast]):[!1,cloned_ast]}}class AST{constructor(e){this.nodeList=new Array,this.visNodes=new Array,this.visEdges=new Array,this.null_node=new ASTNode(NULL_IDX,"null-node",NULL_IDX,[]),this.lstToAST(-1,Object(_uber_s_exify__WEBPACK_IMPORTED_MODULE_3__.b)(e)),this.buildVis()}nodeDepth(e){return-1===e.parentID?0:this.nodeDepth(this.nodeList[e.parentID])+1}negateNode(e){let t=this.getNode(e);if("not"===t.token){let r=this.getNode(t.children[0]);this.nodeList[e]=new ASTNode(t.nodeID,r.token,t.parentID,r.children);var a,n=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(r.children);try{for(n.s();!(a=n.n()).done;){var s=a.value;this.getNode(s).parentID=t.nodeID}}catch(o){n.e(o)}finally{n.f()}return this.deleteNode(r.nodeID),t.nodeID}if(t.token in _readable__WEBPACK_IMPORTED_MODULE_4__.c)return this.nodeList[e]=new ASTNode(t.nodeID,_readable__WEBPACK_IMPORTED_MODULE_4__.c[t.token],t.parentID,t.children),t.nodeID;let r=new ASTNode(this.nodeList.length,"not",t.parentID,[e]);return console.log("new node",r),t.parentID=r.nodeID,this.nodeList.push(r),r.nodeID}getNode(e){return this.nodeList[e]}deleteNode(e){this.nodeList[e]=this.null_node}findNode(e,t){var a,n=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(this.nodeList);try{for(n.s();!(a=n.n()).done;){var s=a.value;if(s.startLine<=e&&s.endLine>=e&&s.startOffset<=t&&s.endOffset>=t)return s}}catch(r){n.e(r)}finally{n.f()}return null}lstToAST(e,t){const a=this.nodeList.length;if(Object(_uber_s_exify__WEBPACK_IMPORTED_MODULE_3__.a)(t)){const n=new ASTNode(a,t.token,e,[]);return n.updateRange(t),this.nodeList.push(n),a}if(isOpt(t[0])){let s=new ASTNode(a,t[0].token,e,[]);s.updateRange(t[0]),this.nodeList.push(s);for(var n=1;n<t.length;n++)s.children.push(this.lstToAST(a,t[n]));return a}{let s=new ASTNode(a,t[0].token,e,[]);s.updateRange(t[0]),this.nodeList.push(s);for(n=0;n<t.length;n++)s.children.push(this.lstToAST(a,t[n]));return a}}buildVis(){this.visNodes=[],this.visEdges=[];var e,t=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(this.nodeList);try{for(t.s();!(e=t.n()).done;){const t=e.value;if(t.nodeID!==NULL_IDX){let e=t.token;t.shouldInBracket&&(e="("+e+")"),this.visNodes.push({id:t.nodeID,label:e+(t.shouldBreak?"\u21b5":""),shape:"box",size:20});var a,n=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(t.children);try{for(n.s();!(a=n.n()).done;){const e=a.value;this.visEdges.push({id:this.visEdges.length,from:t.nodeID,to:e})}}catch(s){n.e(s)}finally{n.f()}}}}catch(s){t.e(s)}finally{t.f()}}toString(e,t){return this.toHTML(e,t)}toHTML(e,t,a=!0){let n;if(0===t.children.length)n=t.token;else{let a=new Array;"list"!==t.token&&a.push(t.token);var s,r=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(t.children);try{for(r.s();!(s=r.n()).done;){const t=s.value;a.push(this.toHTML(e,this.nodeList[t]))}}catch(o){r.e(o)}finally{r.f()}n=1!==a.length&&t.shouldInBracket?"("+a.join(" ")+")":a.join(" ")}return a&&e===t.nodeID&&(n='<span class="highlighted">'+n+"</span>"),t.shouldBreak&&(n="\n"+"    ".repeat(this.nodeDepth(t))+n),n}}},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(60),r=(a(142),a(37)),o=a(6),i=a(2),l=a.n(i),c=a(4);a(144);const p=a(36);class d extends n.Component{constructor(...e){super(...e),this.slider=n.createRef()}render(){const e=this.props,t=e.historyLength,a=e.currentTime,s=e.onCurrentTimeChange;return console.log("historyLength",t),n.createElement("section",{className:"component-slider"},n.createElement("button",{disabled:!this.props.enabled||a<=0,onClick:()=>s(a-1)},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(p,"#history-back")}))),n.createElement("section",{className:"wrapper"},n.createElement("input",{ref:this.slider,type:"range",min:0,max:t,value:a,disabled:!this.props.enabled,onChange:()=>s(this.getSliderValue())})),n.createElement("button",{disabled:!this.props.enabled||a>=t,onClick:()=>s(a+1)},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(p,"#history-forward")}))))}getSliderValue(){return this.slider.current?parseInt(this.slider.current.value,10):0}}var h=a(20),u=(a(145),a(9)),m=a(5),_=a(15);const f=a(147),g=a(23),b=["#e6194B","#f58231","#3cb44b","#42d4f4","#000075","#469990","#911eb4","#f032e6","#fabebe","#800000"],E=["#e6194B","#f58231","#3cb44b","#42d4f4","#000075","#469990","#911eb4","#f032e6","#fabebe","#800000"];function v(e,t){let a={};for(const o in e){let t=e[o];if("EType.ADD_LEM"!==t.event_type)continue;const i=t.exprID,l="oo"===t.level?Number.MAX_SAFE_INTEGER:parseInt(t.level),c=t.pobID;c in a||(a[c]=[]);let p=!1;var n,s=Object(m.a)(a[c]);try{for(s.s();!(n=s.n()).done;){const e=n.value;if(e[0]===i){p=!0;let t=e[1];l>e[2]&&(e[2]=l),l<t&&(e[1]=l);break}}}catch(r){s.e(r)}finally{s.f()}p||a[t.pobID].push([i,l,l])}return a}function x(e,t){let a={};for(const n in e){const t=e[n];let s=Object(_.d)(t.expr);const r={exprType:"UNK",raw:t.expr,editedRaw:t.expr,editedReadable:s};a[t.exprID]=r}return a}function y(e,t,a,n,s=-1){const r=f[t],o=a.includes(e.nodeID);let i={border:o?r.markedStyle.border:r.defaultStyle.border,background:o?r.markedStyle.background:r.defaultStyle.background,highlight:{border:r.highlightStyle.border,background:r.highlightStyle.background}};return"lemma"===t&&-1!==s&&(i={border:b[s],background:b[s],highlight:{border:b[s],background:b[s]}}),"activated"===t&&-1!==s&&(i={border:b[s],background:b[s],highlight:{border:E[s],background:E[s]}}),{id:e.nodeID,shape:n>0?n>1?"hexagon":"star":r.shape,fixed:!0,color:i}}function S(e,t,a,n){return{id:e,arrows:"to",color:{color:"#dddddd",highlight:"#f8cfc1"},from:t,to:a,smooth:!1,hidden:n}}class k extends n.Component{constructor(...e){super(...e),this.network=null,this.networkNodes=new h.DataSet([]),this.networkEdges=new h.DataSet([]),this.graphContainer=n.createRef(),this.boundKeyupHandler=this.keyupHandler.bind(this)}componentDidMount(){this.generateNetwork(),this.updateNetwork(!1,this.props.layout),this.network.fit(),window.addEventListener("keyup",this.boundKeyupHandler,!1)}componentWillUnmount(){window.removeEventListener("keyup",this.boundKeyupHandler,!1)}componentDidUpdate(e){this.updateNetwork(!1,this.props.layout)}render(){return n.createElement("section",{className:"component-graph",ref:this.graphContainer},n.createElement("canvas",null))}generateNetwork(){var e=this;console.log("I am Graph. I receive:",this.props),Object(u.a)(this.graphContainer.current),Object(u.a)(!this.network),this.network=new h.Network(this.graphContainer.current,{nodes:this.networkNodes,edges:this.networkEdges},{physics:!1,interaction:{multiselect:!1},layout:{hierarchical:{direction:"UD",sortMethod:"directed"}}}),this.network.on("click",function(){var t=Object(c.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.nodes.length>0?(Object(u.a)(1===a.nodes.length),n=a.nodes[0],console.log("clickEvent.nodes",a.nodes),console.log("clickedNodeId",e.props.tree[n]),e.props.onNodeSelectionChange(a.nodes)):e.props.onNodeSelectionChange([]);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}updateNetwork(e,t){if("SatVis"===t)this.visLayout(this.props.tree);else if("PobVis"===t){const e=function(e){let t=g.cloneDeep(e);for(const c in t){let e=t[c];if("EType.EXP_POB"!==e.event_type){e.to_be_vis=!1;continue}let p,d=t[e.parent],h=d.children,u=!1;var a,n=Object(m.a)(h);try{for(n.s();!(a=n.n()).done;){const n=t[a.value];if(n.nodeID!==e.nodeID&&n.exprID===e.exprID){u=!0,p=n;break}}}catch(l){n.e(l)}finally{n.f()}if(u){e.to_be_vis=!1;var s,r=Object(m.a)(e.children);try{for(r.s();!(s=r.n()).done;){const e=s.value;t[e].parent=p.nodeID,p.children.push(e)}}catch(l){r.e(l)}finally{r.f()}let a=new Array;var o,i=Object(m.a)(h);try{for(i.s();!(o=i.n()).done;){const t=o.value;t!==e.nodeID&&a.push(t)}}catch(l){i.e(l)}finally{i.f()}d.children=a}}return t}(this.props.tree);this.visLayout(e)}}visLayout(e){let t=this.props.nodeSelection.length>0,a=Number.MIN_SAFE_INTEGER,n=[],s={};t&&(a=e[this.props.nodeSelection[0]].exprID,n=a in this.props.PobLemmasMap?this.props.PobLemmasMap[a].map(e=>({id:e[0],start:e[1],end:e[2]})):[]);const r=new Array,o=new Array;let i=0;for(const l in e){let t=e[l],c=-1;t.pt_name in s||(s[t.pt_name]=Object.keys(s).length),c=s[t.pt_name];const p="oo"===t.level?Number.MAX_SAFE_INTEGER:parseInt(t.level);if(!t.to_be_vis)continue;let d,h=(t.exprID in this.props.PobLemmasMap?this.props.PobLemmasMap[t.exprID].filter(e=>e[2]===Number.MAX_SAFE_INTEGER):[]).filter(e=>e[1]===p||e[1]===Number.MAX_SAFE_INTEGER).length;d=t.exprID===a?y(t,"sameExprID",this.props.nodeSelection,h,c):n.length>0&&n.filter(e=>e.id===t.exprID).length>0?y(t,"lemma",this.props.nodeSelection,h,n.findIndex(e=>e.id===t.exprID)%10):t.nodeID>this.props.currentTime?y(t,"activated",this.props.nodeSelection,h,c):y(t,"passive",this.props.nodeSelection,h),r.push(d);const u=S(i,t.parent,t.nodeID,!1);o.push(u),i++}this.networkNodes.clear(),this.networkNodes.add(r),this.networkEdges.clear(),this.networkEdges.add(o)}keyupHandler(e){if(1!==this.props.nodeSelection.length)return;let t=function(e,t,a){Object(u.a)(a),Object(u.a)("body"in a);const n=a.body.nodes[e];let s=n.id,r=Number.MAX_SAFE_INTEGER;if("ArrowLeft"===t)for(const o in a.body.nodes){const e=a.body.nodes[o];let t=n.x-e.x;e.y===n.y&&(t>0&&t<r&&(s=e.id,r=t))}else if("ArrowRight"===t)for(let o in a.body.nodes){const e=a.body.nodes[o];let t=e.x-n.x;e.y===n.y&&(t>0&&t<r&&(s=e.id,r=t))}else if("ArrowDown"===t&&n.edges.length>=2)s=n.edges.filter(e=>e.fromId===n.id)[0].toId;else if("ArrowUp"===t&&n.edges.length>=1){let e=n.edges.filter(e=>e.toId===n.id);e.length>0&&(s=e[0].fromId)}return s}(this.props.nodeSelection[0],e.key,this.network);this.props.onNodeSelectionChange([t])}}var C=a(18),M=a.n(C);M.a.setAppElement("#root");class O extends n.Component{render(){let e=[];return Object.keys(this.props.messageQ).forEach(t=>{e.push(n.createElement("div",{className:"message-wrapper",key:"message-"+t},n.createElement("span",null,t),n.createElement("br",null),this.props.messageQ[t][this.props.messageQ[t].length-1]))}),n.createElement("main",null,n.createElement("div",null,e),n.createElement("input",{type:"text",value:this.props.runCmd,readOnly:!0}),"loaded"===this.props.appState?n.createElement(k,{tree:this.props.tree,onNodeSelectionChange:this.props.onNodeSelectionChange,nodeSelection:this.props.nodeSelection,currentTime:this.props.currentTime,layout:this.props.layout,PobLemmasMap:this.props.PobLemmasMap}):"","loaded"===this.props.appState?n.createElement(d,{historyLength:this.props.historyLength,currentTime:this.props.currentTime,onCurrentTimeChange:this.props.onCurrentTimeChange,enabled:!0}):"")}}a(58),a(159),a(59);var w=a(108);var D=a(49),N=a(21);class A extends n.Component{constructor(...e){super(...e),this.state={source:"",target:"",regex:!1}}handleSourceChange(e){this.setState({source:e.target.value})}handleTargetChange(e){this.setState({target:e.target.value})}handleRegexChange(e){this.setState({regex:e.target.checked})}handleKeyUp(e){e.stopPropagation()}render(){return n.createElement("div",{onKeyUp:this.handleKeyUp},"Replace: ",n.createElement("input",{type:"text",defaultValue:"",onChange:this.handleSourceChange.bind(this)})," with: ",n.createElement("input",{type:"text",defaultValue:"",onChange:this.handleTargetChange.bind(this)}),"\tRegex?",n.createElement("input",{type:"checkbox",defaultChecked:!1,onChange:this.handleRegexChange.bind(this)}),n.createElement("button",{onClick:this.props.onApply.bind(this,"replace",{source:this.state.source,target:this.state.target,regex:this.state.regex})},"Replace"))}}var I=A;const T=a(23);class L extends n.Component{constructor(...e){super(...e),this.state={selectedNodeIDs:[-1],stringRep:"",status:"",possibleTransformations:[],transformationSelected:""},this.network=null,this.networkNodes=new h.DataSet([]),this.networkEdges=new h.DataSet([]),this.graphContainer=n.createRef(),this.astStack=new Array,this.transformerStack=new Array,this.transformer=new N.b,this.localSelectedNodeIDs=[-1]}componentDidMount(){this.generateNetwork(),"()"!==this.props.input&&(this.astStack=[new N.a(this.props.input)],this.redrawAST())}redrawAST(){if(null!=this.astStack[this.astStack.length-1]){let e=this.astStack[this.astStack.length-1];console.log(e),console.log("visNodes",e.visNodes),console.log("visEdges",e.visEdges),this.networkEdges.clear(),this.networkEdges.add(e.visEdges),this.networkNodes.clear(),this.networkNodes.add(e.visNodes),this.network.redraw(),console.log(e.toHTML(T.last(this.state.selectedNodeIDs),e.nodeList[0])),this.setState({stringRep:e.toHTML(T.last(this.state.selectedNodeIDs),e.nodeList[0])})}}componentDidUpdate(e){e.input!==this.props.input&&(this.astStack=[new N.a(this.props.input)],this.transformerStack=[],this.redrawAST())}generateNetwork(){var e=this;Object(u.a)(this.graphContainer.current),Object(u.a)(!this.network),this.network=new h.Network(this.graphContainer.current,{nodes:this.networkNodes,edges:this.networkEdges},{physics:!1,interaction:{multiselect:!0},layout:{hierarchical:{sortMethod:"directed"}}}),this.network.on("click",function(){var t=Object(c.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.nodes.length>0?(console.log("clickEvent.nodes",a.nodes),e.localSelectedNodeIDs=a.nodes):e.setState({selectedNodeIDs:[]});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}updateConditionInputEvent(e,t){this.transformerStack[t].condition=e.target.value}updateParamsInputEvent(e,t){this.transformerStack[t].params=JSON.parse(e.target.value)}displayTransformers(){return this.transformerStack.map((e,t)=>n.createElement("div",{key:t,className:"transformer-wrapper"},"If ",n.createElement("input",{style:{display:"inline-block",width:"20rem"},ref:"condition-${index}",type:"text",defaultValue:e.condition,onChange:e=>this.updateConditionInputEvent(e,t)}),n.createElement("br",null),"then run __".concat(e.action,"__ with params:"),n.createElement("br",null),n.createElement("input",{ref:"params-${index}",type:"text",defaultValue:JSON.stringify(e.params),style:{width:"100%"},onChange:e=>this.updateParamsInputEvent(e,t)})))}applyStack(){const e=new N.a(this.props.input);try{this.astStack.push(this.transformer.runStack(e,this.transformerStack)),this.transformerStack.push({action:"runStack",params:"",condition:""}),this.redrawAST()}catch(t){this.setState({status:"Error:"+t.message})}}applyLocal(e,t){const a=this.astStack[this.astStack.length-1],n=this.localSelectedNodeIDs;console.log(t);let s={action:e,params:t,condition:"true"};try{let t=this.transformer.run(n,a,s),r=Object(D.a)(t,2),o=r[0],i=r[1];o&&(this.astStack.push(i),s.condition=this.transformer.getCondition(e,n,a),this.transformerStack.push(s),this.redrawAST())}catch(r){this.setState({status:"Error:"+r.message})}}undo(){this.astStack.length>1&&(this.astStack.pop(),this.transformerStack.pop(),this.redrawAST())}addInputOutputExample(){let e=this.astStack[0],t=this.astStack[this.astStack.length-1];console.log("transformer stack",this.transformerStack);const a={input:e.toString(-1,e.nodeList[0]),output:t.toString(-1,t.nodeList[0]),tStack:this.transformerStack};this.props.onAddInputOutputExample(a)}updateTransformationSelected(e){this.setState({transformationSelected:e.target.value})}render(){console.log("I'm TreeEditor. I got",this.props.input),console.log("I'm TreeEditor. My possibleTs:",this.state.possibleTransformations);this.displayTransformers();let e=this.state.possibleTransformations.map((e,t)=>n.createElement("div",{key:t},n.createElement("input",{type:"radio",name:"transformation",value:e.xmlAst,onChange:this.updateTransformationSelected.bind(this)}),e.humanReadableAst));return n.createElement("div",{className:"tree-editor"},n.createElement("div",{className:"editor-options-card",id:"graph-container"},n.createElement("h4",null,this.state.status),n.createElement("div",{className:"editor-menu"},"Hint: Long click to select multiple nodes",n.createElement("br",null),n.createElement("button",{onClick:this.undo.bind(this)},"Undo"),n.createElement("button",{onClick:this.applyLocal.bind(this,"flipCmp",{})},"Flip Cmp"),n.createElement("button",{onClick:this.applyLocal.bind(this,"toImp",{})},"To Imp"),n.createElement("button",{onClick:this.applyLocal.bind(this,"move",{direction:"l"})},"Move Left"),n.createElement("button",{onClick:this.applyLocal.bind(this,"move",{direction:"r"})},"Move Right"),n.createElement("button",{onClick:this.applyLocal.bind(this,"changeBreak",{})},"\\n?"),n.createElement("button",{onClick:this.applyLocal.bind(this,"changeBracket",{})},"()?"),n.createElement("br",null),n.createElement(I,{onApply:this.applyLocal.bind(this)}),n.createElement("br",null),n.createElement("button",{onClick:this.addInputOutputExample.bind(this)},"Add to Learn"),n.createElement("pre",{className:"editor-string-rep",dangerouslySetInnerHTML:{__html:this.state.stringRep}})),n.createElement("div",{className:"editor-component-graph",ref:this.graphContainer},n.createElement("canvas",null))),this.props.isModal?"":n.createElement("div",{className:"editor-options-card",id:"transformer-container"},this.props.isModal?"":n.createElement("button",{onClick:this.props.onBlast.bind(this,this.transformerStack)},"Blast"),n.createElement("h3",null,"Possible Transformations"),e,this.props.isModal?n.createElement("button",{onClick:this.props.onTransformExprs.bind(this,this.state.transformationSelected)},"Apply Everywhere"):""))}}var P=L;class R extends n.Component{constructor(...e){super(...e),this.isChromeOrFirefox=!0,this.state={selectedInput:"()"}}openEditor(e){console.log("click Apply"),console.log(e),this.setState({selectedInput:e})}getFormulas(e){return e.split(/\n\s*\n/)}blast(e){}render(){return n.createElement("section",{className:"formula-editor-modal"},n.createElement("section",{className:"editor"},n.createElement("div",{id:"editor-wrapper"},n.createElement("h2",null,"Original"),this.props.inputList.map((e,t)=>n.createElement("button",{key:t,onClick:this.openEditor.bind(this,e),className:"formula-button"},n.createElement("pre",null,e)))),n.createElement(P,{expName:this.props.expName,input:this.state.selectedInput,onBlast:this.blast.bind(this),isModal:!0,onTransformExprs:this.props.onTransformExprs.bind(this),onAddInputOutputExample:this.props.onAddInputOutputExample.bind(this),onPushToMessageQ:this.props.onPushToMessageQ})))}}class j extends n.Component{constructor(e){super(e),this.keep=!1,this.type_map={EQUALS:"= ",PLUS:"+ ",TIMES:"* ",LT:"< ",LE:"<= ",GT:"> ",GE:">= ",SYMBOL:"","0_REAL_CONSTANT":""},this.state={learningFlag:!1,learningErrorFlag:!1,transformationFlag:!1,transformationErrorFlag:!1,possibleTransformations:[],transformationSelected:"",editorIsOpen:!1,editorTextInputList:[]}}getLemmaExprs(e){let t=new Array;if("EType.EXP_POB"===e.event_type&&e.exprID in this.props.PobLemmasMap){let r=this.props.PobLemmasMap[e.exprID];var a,n=Object(m.a)(r);try{for(n.s();!(a=n.n()).done;){const e=a.value[0];let n=this.props.ExprMap[e];t.push(n.raw)}}catch(s){n.e(s)}finally{n.f()}}return t}getLemmaList(e){let t=[];if("EType.EXP_POB"===e.event_type&&(t.push(n.createElement("h2",{key:"lemma-title"}," Lemmas summarization ")),e.exprID in this.props.PobLemmasMap)){let o=this.props.PobLemmasMap[e.exprID];console.log(o);var a,s=Object(m.a)(o);try{for(s.s();!(a=s.n()).done;){const e=a.value;let s=o.indexOf(e),r={color:b[s]};t.push(n.createElement("h3",{style:r,key:"lemma-header-"+e[0]},"ExprID: ",e[0],", From: ",e[1]," to ",e[2]));const i=e[0];let l=this.props.ExprMap[i].editedReadable;if("string"===typeof l){if(Object.keys(this.props.relatedExprMap).length>0){let e=Object.keys(this.props.relatedExprMap);for(let t=0;t<e.length;t++){let a=this.props.relatedExprMap[e[t]];if(l===a.editedReadable){l=a.editedReadable;break}}}let a=Object(_.a)(l,"\n"),s=-1;for(let e=0;e<a.length;e++)if(a[e].includes("=>")){s=e;break}a.forEach((a,r)=>{let o={color:"black"};-1!==s&&r>s&&(o.color="darkblue"),t.push(n.createElement("pre",{style:o,key:"lemma-expr-"+e[0]+r},a))})}else t.push(n.createElement("pre",null,l))}}catch(r){s.e(r)}finally{s.f()}}return t}transformExprsFromText(e){var t=this;return Object(c.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.setState({transformationSelected:e},()=>t.transformExprs());case 1:case"end":return a.stop()}}),a)})))()}transformExprs(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({transformationFlag:!1,transformationErrorFlag:!1}),t.next=3,fetch("http://localhost:5000/spacer/apply_transformation",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({expName:e.props.expName,selectedProgram:e.state.transformationSelected})});case 3:if(200!==(a=t.sent).status){t.next=12;break}return e.closeModal(),t.next=8,a.json();case 8:n=t.sent;try{s=n.response,Object.keys(s).forEach(t=>{const a=parseInt(t);e.props.ExprMap[a].editedRaw=s[a].raw,e.props.ExprMap[a].editedReadable=s[a].raw}),e.setState({transformationFlag:!0}),e.forceUpdate()}catch(r){e.props.onPushToMessageQ("NodeDetails","Error: ".concat(r.message))}t.next=13;break;case 12:e.setState({transformationErrorFlag:!0});case 13:case"end":return t.stop()}}),t)})))()}openModal(){let e=this.getLemmaExprs(this.props.nodes[0]);this.setState({editorIsOpen:!0,editorTextInputList:e})}afterOpenModal(){}closeModal(){this.setState({editorIsOpen:!1})}render(){let e,t,a;return console.log(this.props.PobLemmasMap),this.props.nodes.length>1?(e=this.props.nodes[0],t=this.props.nodes[1],a=n.createElement("section",{className:"component-node-details details-diff"},n.createElement("article",null,n.createElement("h2",null,"Diff (Node: ",n.createElement("strong",null,e.nodeID)," vs. Node: ",n.createElement("strong",null,t.nodeID),")"),function(e,t){let a=[],n=e.split("\n"),s=t.split("\n");for(let r=0;r<Math.min(n.length,s.length);r++){let e=w.diffWords(n[r],s[r]);e.push({added:!1,removed:!1,value:"\n"}),a=a.concat(e),console.log(a)}return console.log(a),a}(this.props.ExprMap[e.exprID].editedReadable,this.props.ExprMap[t.exprID].editedReadable).map((e,t)=>n.createElement("span",{key:t,className:e.added?"green":e.removed?"red":"black"},e.value))))):a=n.createElement("div",null),n.createElement("div",null,n.createElement(M.a,{isOpen:this.state.editorIsOpen,onRequestClose:this.closeModal.bind(this),overlayClassName:"editor-modal-overlay",className:"editor-modal"},n.createElement("h2",null,"Editor"),n.createElement("button",{onClick:this.closeModal.bind(this)},"Close"),n.createElement(R,{expName:this.props.expName,inputList:this.state.editorTextInputList,onTransformExprs:this.transformExprsFromText.bind(this),onAddInputOutputExample:this.props.onAddInputOutputExample.bind(this),onPushToMessageQ:this.props.onPushToMessageQ.bind(this)})),a,this.props.nodes.map((t,a)=>{let s="type:"+t.event_type+" level:"+t.level,r=this.getLemmaList(t),o=this.props.ExprMap[t.exprID].editedReadable;console.log("top expr",o);const i="component-node-details details-top-"+a,l="component-node-details details-bottom-"+a;return n.createElement("div",{key:a},n.createElement("section",{className:i},n.createElement("article",null,n.createElement("h2",null,"Node ",n.createElement("strong",null,t.nodeID,", "),"Expr ",n.createElement("strong",null," ",t.exprID," "),", Parent ",n.createElement("strong",null," ",t.pobID,"  ")),n.createElement("h3",null,s),n.createElement("pre",{className:1===this.props.nodes.length?"black":t===e?"red":"green"},o))),r.length>0&&n.createElement("section",{className:l},n.createElement("article",null,r,this.props.solvingCompleted?n.createElement("button",{onClick:this.openModal.bind(this)},"Open Editor"):"")))}))}}const F=a(36);class B extends n.Component{constructor(e){super(e),this.state={relatedExprMap:[]}}createButton(e,t,a){return n.createElement("button",{title:e,onClick:t},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},n.createElement("use",{xlinkHref:"".concat(F,"#").concat(a)})))}getNodeDetails(){if(this.props.nodeSelection.length>=1&&null!=this.props.tree){let s=[];var e,t=Object(m.a)(this.props.nodeSelection);try{for(t.s();!(e=t.n()).done;){let t=e.value;s.push(this.props.tree[t])}}catch(a){t.e(a)}finally{t.f()}return n.createElement(j,{nodes:s,expName:this.props.expName,PobLemmasMap:this.props.PobLemmasMap,ExprMap:this.props.ExprMap,layout:this.props.layout,expr_layout:this.props.expr_layout,relatedExprMap:this.state.relatedExprMap,solvingCompleted:this.props.solvingCompleted,onAddInputOutputExample:this.props.onAddInputOutputExample.bind(this),onPushToMessageQ:this.props.onPushToMessageQ.bind(this)})}return n.createElement("section",{className:"component-node-details overview"},n.createElement("small",{id:"nodeInfo"}," ",n.createElement("strong",null,"".concat(this.props.nodeSelection.length," nodes")," ")," selected"))}updateRelatedExprMap(e){this.setState({relatedExprMap:e})}render(){return n.createElement("aside",null,n.createElement("article",null,n.createElement("section",{className:"component-node-menu"},this.createButton("Poke",this.props.onPoke,"graph-undo"),this.createButton("Star",this.props.onOpenStarModal,"star"),this.createButton("SatVis",this.props.SatVisLayout,"node-parents"),this.createButton("PobVis",this.props.PobVisLayout,"node-children"),this.createButton("MultiSelect",this.props.MultiSelectMode,"history-forward"))),this.getNodeDetails())}}var U=B;a(160);a(23);class V extends n.Component{constructor(...e){super(...e),this.state={input:"()",output:"",finalLemmas:this.getFinalInvariant(),debugMode:!1}}getFinalInvariant(){let e=new Set;for(const s in this.props.PobLemmasMap){let r=this.props.PobLemmasMap[s];var t,a=Object(m.a)(r);try{for(a.s();!(t=a.n()).done;){const a=t.value;a[2]===Number.MAX_SAFE_INTEGER&&e.add(a)}}catch(n){a.e(n)}finally{a.f()}}return Array.from(e.values())}getLemmaHeader(e){const t=e[0];return this.props.ExprMap[t].raw.split("\n")[0]}reset(){this.setState({finalLemmas:this.getFinalInvariant()})}sortByLevel(){const e=this.state.finalLemmas.sort((e,t)=>e[1]>t[1]?1:-1);this.setState({finalLemmas:e})}sortByHeader(){const e=this.state.finalLemmas.sort((e,t)=>this.getLemmaHeader(e)>this.getLemmaHeader(t)?1:-1);this.setState({finalLemmas:e})}renderFinalInvariant(){let e=[];var t,a=Object(m.a)(this.state.finalLemmas);try{for(a.s();!(t=a.n()).done;){const a=t.value,s=a[0];let r="",o="";this.props.ExprMap[s]&&(o=this.props.ExprMap[s].editedReadable,r=this.props.ExprMap[s].raw),e.push(n.createElement("tr",{key:"lemma-header-"+s},n.createElement("td",null,n.createElement("h4",null,"ExprID: ",a[0],", From: ",a[1]," to ",a[2])),n.createElement("td",null))),e.push(n.createElement("tr",{key:"lemma-content-"+s},n.createElement("td",null,n.createElement("pre",null,o)),this.state.debugMode?n.createElement("td",null,n.createElement("pre",null,r)):n.createElement("td",null)))}}catch(s){a.e(s)}finally{a.f()}return n.createElement("table",null,n.createElement("tbody",null,e))}handleDebugModeChange(e){this.setState({debugMode:e.target.checked})}render(){console.log(this.props.ExprMap);const e=this.renderFinalInvariant();return n.createElement("section",{className:"star-modal-wrapper"},n.createElement("div",{className:"star-modal-menu"},n.createElement("label",null,"Debug mode:"),n.createElement("input",{type:"checkbox",defaultChecked:this.state.debugMode,onChange:this.handleDebugModeChange.bind(this)}),n.createElement("button",{onClick:this.sortByHeader.bind(this)},"Order by header"),n.createElement("button",{onClick:this.sortByLevel.bind(this)},"Order by level"),n.createElement("button",{onClick:this.reset.bind(this)},"Reset")),n.createElement("div",{className:"star-modal-content"},n.createElement("div",{className:"lemma-table"},e)))}}a(161);const z=a(23);class H extends n.Component{constructor(e){super(e),this.state={transformationFlag:!1,transformationErrorFlag:!1,transformationSelected:"",isFetching:!1,progs:[]}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchProgs();case 2:case"end":return t.stop()}}),t)})))()}render(){return n.createElement("div",null,this.state.progs.map((e,t)=>n.createElement("button",{className:"ts-button",key:e.hash,onClick:this.multiTransformExprs.bind(this,e.xml_ast)},e.human_readable_ast)),n.createElement("p",null,this.state.isFetching?"Fetching transformer...":""))}multiTransformExprs(e){var t=this;return Object(c.a)(l.a.mark((function a(){var n,s,r,o,i,c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(s in n=z.cloneDeep(t.props.ExprMap))n[s].raw=n[s].editedRaw;return t.setState({transformationFlag:!1,transformationErrorFlag:!1}),a.next=5,fetch("http://localhost:5000/spacer/apply_multi_transformation",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({expName:t.props.expName,selectedProgram:e,lemmas:n})});case 5:if(200!==(r=a.sent).status){a.next=19;break}return n=null,o=z.cloneDeep(t.props.ExprMap),a.next=11,r.json();case 11:i=a.sent,c=i.response,console.log("tExprMap",c),Object.keys(c).forEach(e=>{o[e].editedRaw=c[e].raw,o[e].editedReadable=Object(_.d)(c[e].raw)}),t.setState({transformationFlag:!0}),t.props.onUpdateLocalExprMap(o),a.next=20;break;case 19:t.setState({transformationErrorFlag:!0});case 20:case"end":return a.stop()}}),a)})))()}fetchProgs(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isFetching:!0}),t.next=3,fetch("http://localhost:5000/spacer/fetch_progs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({expName:e.props.expName})});case 3:return a=t.sent,t.prev=4,t.next=7,a.json();case 7:n=t.sent,console.log(n),e.setState({isFetching:!1,progs:n.progs_list}),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(4),"SatVisAssertionError"!==t.t0.name){t.next=16;break}throw t.t0;case 16:e.setState({progs:[]});case 17:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}a(162);var Q=a(62);class K extends n.Component{constructor(e){super(e),this.state={matchingFiles:[],exps:[],selected:""}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchExps();case 2:return e.getMatchingFiles(),t.next=5,e.getMatchingExprMap();case 5:case"end":return t.stop()}}),t)})))()}getMatchingFiles(){let e=this.state.exps.filter(e=>e.exp_name.includes(Object(_.b)(this.props.expName)));e.length>0&&this.setState({matchingFiles:e,selected:e[0].name})}getMatchingExprMap(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/get_exprs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.state.selected})});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,console.log(n),e.props.updateRelatedExprMap(JSON.parse(n.expr_map)),t.next=16;break;case 11:if(t.prev=11,t.t0=t.catch(3),"SatVisAssertionError"!==t.t0.name){t.next=15;break}throw t.t0;case 15:e.setState({exps:[]});case 16:case"end":return t.stop()}}),t,null,[[3,11]])})))()}fetchExps(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/fetch_exps",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:""});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,console.log(n),e.setState({exps:n.exps_list}),t.next=16;break;case 11:if(t.prev=11,t.t0=t.catch(3),"SatVisAssertionError"!==t.t0.name){t.next=15;break}throw t.t0;case 15:e.setState({exps:[]});case 16:case"end":return t.stop()}}),t,null,[[3,11]])})))()}updateSelected(e){this.setState({selected:e.target.value})}render(){return n.createElement("div",null,n.createElement("select",{id:"exprs",onChange:this.updateSelected.bind(this)},this.state.matchingFiles.length>0&&this.state.matchingFiles.map((e,t)=>n.createElement("option",{key:t,value:e.exp_name},e.exp_name))),n.createElement("button",{onClick:this.getMatchingExprMap.bind(this)},"Get Expr Map"))}}var W=K;class G extends n.Component{constructor(...e){super(...e),this.state={localReplaceMap:JSON.stringify(this.props.dumbReplaceMap,null,2),key:Object(Q.uuid)()}}handleTextareaChange(e){this.setState({localReplaceMap:e.target.value})}handleKeyUp(e){e.stopPropagation()}learnTransformationFromInputOutput(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={inputOutputExamples:e.props.inputOutputExamples,expName:e.props.expName},console.log("payload",a),t.next=4,fetch("http://localhost:5000/spacer/learn_transformation",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if(200!==(n=t.sent).status){t.next=12;break}return t.next=8,n.json();case 8:s=t.sent,r=s.response,console.log(r),r.length>0&&e.setState({key:Object(Q.uuid)()});case 12:case"end":return t.stop()}}),t)})))()}updateRelatedExprMap(e){this.props.onPushToMessageQ("TransformerMenu","")}render(){return n.createElement("div",{className:"transformer-menu",onKeyUp:this.handleKeyUp},n.createElement("section",{className:"dumb-replace-wrapper"},n.createElement("button",{onClick:this.props.onSaveExprMap.bind(this)},"Save"),n.createElement(W,{expName:this.props.expName,updateRelatedExprMap:this.updateRelatedExprMap.bind(this)}),n.createElement("label",null,"Replacement map:"),n.createElement("br",null),n.createElement("textarea",{value:this.state.localReplaceMap,onChange:this.handleTextareaChange.bind(this)}),n.createElement("br",null),n.createElement("button",{onClick:this.props.onApplyDumbReplaceMap.bind(this,this.state.localReplaceMap)},"Apply Text Replacement"),n.createElement("br",null),n.createElement("label",null,"All input output examples:"),n.createElement("textarea",{value:JSON.stringify(this.props.inputOutputExamples,null,2),disabled:!0}),n.createElement("br",null),n.createElement("button",{onClick:this.learnTransformationFromInputOutput.bind(this,this.state.localReplaceMap)},"Learn new transformations")),n.createElement(H,{key:this.state.key,expName:this.props.expName,ExprMap:this.props.ExprMap,onUpdateLocalExprMap:this.props.onUpdateExprMap.bind(this)}))}}const J=a(23);class q extends n.Component{constructor(...e){super(...e),this.state={expName:this.props.expName,state:"waiting",tree:{},runCmd:"Run command:",messageQ:{},nodeSelection:[],currentTime:0,layout:"PobVis",expr_layout:"SMT",PobLemmasMap:{},ExprMap:{},multiselect:!1,varNames:"",starModalIsOpen:!1,solvingCompleted:!1,dumbReplaceMap:{},inputOutputExamples:[]}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.poke();case 2:case"end":return t.stop()}}),t)})))()}pushToMessageQ(e,t){let a=J.cloneDeep(this.state.messageQ);e in a?a[e].push(t):a[e]=[t],this.setState({messageQ:a})}poke(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n,s,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pushToMessageQ("App","Poking Spacer..."),e.setState({state:"waiting"}),t.next=4,fetch("http://localhost:5000/spacer/poke",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({expName:e.state.expName})});case 4:return a=t.sent,t.prev=5,t.next=8,a.json();case 8:n=t.sent,console.log("backend response:",n),s=n.nodes_list,"loaded",r=v(s,n.var_names),o=0===Object.keys(n.expr_map).length?x(s,n.var_names):n.expr_map,e.setState({tree:s,runCmd:n.run_cmd,state:"loaded",PobLemmasMap:r,ExprMap:o,varNames:n.var_names,solvingCompleted:!("running"===n.spacer_state)}),console.log("state is set"),e.pushToMessageQ("SpacerStatus",n.spacer_state),e.pushToMessageQ("App","Poking is done"),t.next=26;break;case 20:if(t.prev=20,t.t0=t.catch(5),"SatVisAssertionError"!==t.t0.name){t.next=24;break}throw t.t0;case 24:e.setState({state:"error",solvingCompleted:!1}),e.pushToMessageQ("App","Error: ".concat(t.t0.message));case 26:case"end":return t.stop()}}),t,null,[[5,20]])})))()}saveExprMap(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/save_exprs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({expName:e.state.expName,expr_map:JSON.stringify(e.state.ExprMap)})});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,console.log(n),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(3),t.t0;case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()}applyDumbReplaceMap(e){try{var t;t=JSON.parse(e);var a=J.cloneDeep(this.state.ExprMap);for(let e in a)for(var n=0,s=Object.keys(t);n<s.length;n++){const r=s[n],o=t[r];a[e].editedReadable=a[e].editedReadable.replaceAll(r,o)}this.setState({dumbReplaceMap:t,ExprMap:a})}catch(r){this.pushToMessageQ("App","Error in applyDumbReplaceMap: ".concat(r.message))}}updateExprMap(e){console.log("newExprMap",e);try{this.setState({ExprMap:e})}catch(t){this.pushToMessageQ("App","Error in updateExprMap: ".concat(t.message))}}updateNodeSelection(e){if(this.state.multiselect){let t=this.state.nodeSelection.slice(this.state.nodeSelection.length-1).concat(e);this.setState({nodeSelection:t})}else this.setState({nodeSelection:e})}updateCurrentTime(e){this.setState({currentTime:e})}setPobVisLayout(){this.setState({layout:"PobVis"})}setSatVisLayout(){this.setState({layout:"SatVis"})}setMultiSelect(){this.state.multiselect&&this.state.nodeSelection.length>0&&this.setState({nodeSelection:[this.state.nodeSelection[this.state.nodeSelection.length-1]]}),this.setState({multiselect:!this.state.multiselect})}setSMTLayout(){this.setState({expr_layout:"SMT"})}setJSONLayout(){this.setState({expr_layout:"JSON"})}openStarModal(){this.setState({starModalIsOpen:!0})}closeStarModal(){this.setState({starModalIsOpen:!1})}addInputOutputExample(e){this.setState({inputOutputExamples:[...this.state.inputOutputExamples,e]}),this.pushToMessageQ("App","Example added to inputOutputExamples")}render(){const e=Object.keys(this.state.tree).length;return n.createElement("div",{className:"app"},n.createElement(M.a,{isOpen:this.state.starModalIsOpen,onRequestClose:this.closeStarModal.bind(this),overlayClassName:"star-modal-overlay",className:"star-modal",shouldCloseOnOverlayClick:!1},n.createElement("h2",null,"Final invariant"),n.createElement("button",{onClick:this.closeStarModal.bind(this)},"Close"),n.createElement(V,{expName:this.props.expName,PobLemmasMap:this.state.PobLemmasMap,ExprMap:this.state.ExprMap,onPushToMessageQ:this.pushToMessageQ.bind(this)})),n.createElement(O,{appState:this.state.state,messageQ:this.state.messageQ,runCmd:this.state.runCmd,tree:this.state.tree,onNodeSelectionChange:this.updateNodeSelection.bind(this),nodeSelection:this.state.nodeSelection,historyLength:e,currentTime:this.state.currentTime,onCurrentTimeChange:this.updateCurrentTime.bind(this),layout:this.state.layout,PobLemmasMap:this.state.PobLemmasMap,solvingCompleted:this.state.solvingCompleted,onPushToMessageQ:this.pushToMessageQ.bind(this)}),n.createElement(G,{dumbReplaceMap:this.state.dumbReplaceMap,onApplyDumbReplaceMap:this.applyDumbReplaceMap.bind(this),expName:this.props.expName,ExprMap:this.state.ExprMap,onUpdateExprMap:this.updateExprMap.bind(this),inputOutputExamples:this.state.inputOutputExamples,onSaveExprMap:this.saveExprMap.bind(this),onPushToMessageQ:this.pushToMessageQ.bind(this)}),n.createElement(U,{tree:this.state.tree,nodeSelection:this.state.nodeSelection,onUpdateNodeSelection:this.updateNodeSelection.bind(this),onPoke:this.poke.bind(this),onOpenStarModal:this.openStarModal.bind(this),SatVisLayout:this.setSatVisLayout.bind(this),PobVisLayout:this.setPobVisLayout.bind(this),MultiSelectMode:this.setMultiSelect.bind(this),SMTLayout:this.setSMTLayout.bind(this),JSONLayout:this.setJSONLayout.bind(this),PobLemmasMap:this.state.PobLemmasMap,ExprMap:this.state.ExprMap,layout:this.state.layout,expr_layout:this.state.expr_layout,expName:this.state.expName,solvingCompleted:this.state.solvingCompleted,onAddInputOutputExample:this.addInputOutputExample.bind(this),onPushToMessageQ:this.pushToMessageQ.bind(this)}))}}var X=q,Z=(a(166),a(48));class $ extends n.Component{constructor(e){super(e),this.state={isFetching:!1,exps:[]}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchExps();case 2:case"end":return t.stop()}}),t)})))()}render(){return n.createElement("div",null,this.state.exps.map((e,t)=>n.createElement("h5",{key:e.exp_name},n.createElement(r.b,{to:{pathname:"/replay/".concat(e.exp_name)}},e.exp_name)," $",e.done)),n.createElement("p",null,this.state.isFetching?"Fetching experiments...":""))}fetchExps(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isFetching:!0}),t.next=3,fetch("http://localhost:5000/spacer/fetch_exps",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:""});case 3:return a=t.sent,t.prev=4,t.next=7,a.json();case 7:n=t.sent,console.log(n),e.setState({isFetching:!1,exps:n.exps_list}),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(4),"SatVisAssertionError"!==t.t0.name){t.next=16;break}throw t.t0;case 16:e.setState({exps:[]});case 17:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}var Y=a(110),ee=a.n(Y);class te extends n.Component{constructor(...e){super(...e),this.state={optionTypeHTML:n.createElement("div",null),optionType:"",optionValue:"",optionName:"",allOptions:[],showOptions:!0,options:[]}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOptions();case 2:case"end":return t.stop()}}),t)})))()}fetchOptions(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/fetch_options",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:""});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,console.log(n),e.setState({options:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))()}updateSpacerOptions(){let e=this.state.allOptions,t="";var a,n=Object(m.a)(e);try{for(n.s();!(a=n.n()).done;){let e=a.value;"flag"===e.type||e.dash?t+="-"+e.name+" ":t+=e.name+"="+e.value+" "}}catch(s){n.e(s)}finally{n.f()}this.props.changeSpacerUserOptions(t)}storeSpacerOptions(e){if(e.preventDefault(),e.target.reset(),""===this.state.optionName||"custom"!==this.state.optionType&&""===this.state.optionValue)return;let t=this.state.allOptions;t.push({name:this.state.optionName,value:this.state.optionValue,type:""===this.state.optionValue?"flag":this.state.optionType}),this.setState({allOptions:t}),this.setState({optionName:"",optionValue:"",optionType:""}),this.updateSpacerOptions()}displaySpacerOptions(){return""!==this.props.spacerUserOptions?this.props.spacerUserOptions.trim().split(" "):[]}updateOptionValue(e){this.setState({optionValue:e.target.value})}getOptions(e,t){"bool"===t?this.setState({optionTypeHTML:n.createElement(n.Fragment,null,n.createElement("input",{type:"radio",name:e,value:"true",onChange:this.updateOptionValue.bind(this)}),"True",n.createElement("input",{type:"radio",name:e,value:"false",onChange:this.updateOptionValue.bind(this)}),"False",n.createElement("button",{className:"fake-button",type:"submit",value:"Submit"},"+"))}):this.setState({optionTypeHTML:n.createElement(n.Fragment,null,n.createElement("input",{type:"text",name:e,placeholder:t,defaultValue:this.state.optionValue,onChange:this.updateOptionValue.bind(this)}),n.createElement("button",{className:"fake-button",type:"submit",value:"Submit"},"+"))})}changeOptionType(e){let t=this.state.options.filter(t=>t.name===e.target.value),a="custom";t.length>0&&(a=t[0].type),this.setState({optionName:e.target.value,optionType:a}),this.getOptions(e.target.value,a)}removeOption(e,t){let a=this.state.allOptions,n=-1;void 0===t&&(e=e.replace("-",""),t="");for(let s=0;s<a.length;s++)if(a[s].name===e&&a[s].value===t){n=s;break}-1!==n&&(a.splice(n,1),this.updateSpacerOptions())}changeSpacerManualUserOptions(e){const t=e.target.value;this.props.changeSpacerUserOptions(t)}showHideOptions(){this.setState({showOptions:!this.state.showOptions})}render(){console.log(this.state);let e=this.displaySpacerOptions();return n.createElement("aside",null,n.createElement("fieldset",{className:"options-card"},n.createElement("h3",null,"Z3 Options"),n.createElement("ul",null,n.createElement("li",null,n.createElement("label",{htmlFor:"userOptions",className:"form-label"},"Additional Spacer options"),n.createElement("button",{onClick:this.showHideOptions.bind(this),className:"showHideButton",title:"showHide"},n.createElement("img",{className:"eyeImage",src:ee.a,alt:"eye"})),0!==e.length&&this.state.showOptions&&e.map((e,t)=>{if(""!==e){let a=e.split("="),s=a[0],r=a[1],o=r?s+": "+r:s;return n.createElement("div",{className:"displaySpacerOption",key:t},n.createElement("span",null,o),n.createElement("button",{className:"fake-button",type:"button",onClick:this.removeOption.bind(this,s,r)},"x"))}return""}),n.createElement("form",{className:"tfradio",name:"tfradio",onSubmit:this.storeSpacerOptions.bind(this)},n.createElement("input",{type:"text",className:"optionsList",list:"spacerOptions",name:"spacerOptions",onChange:this.changeOptionType.bind(this)}),n.createElement("datalist",{id:"spacerOptions"},this.state.options&&0!==this.state.options.length&&this.state.options.map((e,t)=>n.createElement("option",{value:e.name,key:t}))),this.state.optionTypeHTML)),n.createElement("label",null,"Or using manual run parameters"),n.createElement("input",{type:"text",name:"manualRun",onChange:this.changeSpacerManualUserOptions.bind(this)}),n.createElement("li",null,n.createElement("label",{htmlFor:"varOptions",className:"form-label"},"Variable Designation"),n.createElement("p",null,"Enter a single space separated list of your chosen variables in the order they appear (var1 var2 var3 ..)"),n.createElement("input",{type:"text",name:"variables",onChange:this.props.onChangeVariables})))))}}var ae=te;a(36);class ne extends n.Component{constructor(...e){super(...e),this.runCmd="",this.state={inputProblem:"",spacerLog:"",expName:""}}handleExpNameChange(e){this.setState({expName:e.target.value})}uploadInputFile(e){if(null!==e.target.files&&e.target.files.length>0){const t=e.target.files[0],a=new FileReader;a.onloadend=()=>{const e=a.result?a.result:"";this.setState({inputProblem:e})},a.readAsText(t)}}uploadSpacerLog(e){if(null!==e.target.files&&e.target.files.length>0){const t=e.target.files[0],a=new FileReader;a.onloadend=()=>{const e=a.result?a.result:"";this.setState({spacerLog:e})},a.readAsText(t)}}uploadFiles(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/upload_files",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({expName:e.state.expName,inputProblem:e.state.inputProblem,spacerLog:e.state.spacerLog,spacerState:"uploaded"})});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,console.log("backend response:",n),window.location.reload(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))()}render(){return n.createElement("section",{className:"upload-log-wrapper"},n.createElement("label",null,"Upload smt2 file"),n.createElement("input",{type:"file",onChange:this.uploadInputFile.bind(this)}),n.createElement("br",null),n.createElement("label",null,"Upload spacer.log"),n.createElement("input",{type:"file",onChange:this.uploadSpacerLog.bind(this)}),n.createElement("br",null),n.createElement("label",null,"Exp Name:"),n.createElement("input",{type:"text",onChange:this.handleExpNameChange.bind(this)}),n.createElement("button",{onClick:this.uploadFiles.bind(this)},"Submit"))}}const se=a(36);class re extends n.Component{constructor(...e){super(...e),this.state={uploadModalIsOpen:!1,problem:"",problemName:"",spacerUserOptions:"",varNames:"",messagesQ:[],newProblemUploaded:!1},this.isChromeOrFirefox=!0,this.fileUpload=n.createRef(),this.monacoDiv=n.createRef(),this.monaco=null}componentDidMount(){this.isChromeOrFirefox&&(this.monaco=Z.a.create(this.monacoDiv.current,{lineNumbers:"off",roundedSelection:!1,scrollBeyondLastLine:!1,scrollBeyondLastColumn:0,minimap:{enabled:!1},renderLineHighlight:"none",hideCursorInOverviewRuler:!0,links:!1,overviewRulerBorder:!1,automaticLayout:!0,lineDecorationsWidth:0,lineNumbersMinChars:0,wordWrap:"wordWrapColumn"}),this.monaco.setValue(this.state.problem),this.monaco.getModel().onDidChangeContent(()=>{this.changeProblem(this.monaco.getModel().getValue())}))}componentWillUnmount(){this.monaco=null}componentDidUpdate(){Object(u.a)(this.isChromeOrFirefox),this.state.newProblemUploaded&&(this.monaco.setValue(this.state.problem),this.setState({newProblemUploaded:!1}))}openUploadModal(){this.setState({uploadModalIsOpen:!0})}closeUploadModal(){this.setState({uploadModalIsOpen:!1})}runSpacer(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/start_iterative",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({expName:e.state.problemName,file:e.state.problem,spacerUserOptions:e.state.spacerUserOptions,varNames:e.state.varNames})});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,console.log("backend response:",n),"success"===n.status?(s="/replay/"+n.exp_name,console.log("redirect to ",s),console.log(e.props.history),e.props.history.push(s)):(Object(u.a)("error"===n.status),r=n.message,Object(u.a)(void 0!==r&&null!==r),e.setState({messagesQ:[r]})),t.next=16;break;case 11:if(t.prev=11,t.t0=t.catch(3),"SatVisAssertionError"!==t.t0.name){t.next=15;break}throw t.t0;case 15:e.setState({messagesQ:["Error: ".concat(t.t0.message)]});case 16:case"end":return t.stop()}}),t,null,[[3,11]])})))()}render(){return this.isChromeOrFirefox?n.createElement("section",{className:"component-menu"},n.createElement("h1",null,"Spacer Visualization"),n.createElement(M.a,{isOpen:this.state.uploadModalIsOpen,onRequestClose:this.closeUploadModal.bind(this),className:"upload-modal",overlayClassName:"upload-modal-overlay"},n.createElement("button",{onClick:this.closeUploadModal.bind(this)},"Close"),n.createElement(ne,null)),n.createElement("section",{className:"editor"},n.createElement("div",{className:"editor-spacer"},n.createElement("main",null,n.createElement("div",{className:"headline-wrapper"},n.createElement("h2",null,"Input"),n.createElement("small",{className:"file-name"},this.state.problemName),n.createElement("button",{title:"Upload Spacer log ",onClick:this.openUploadModal.bind(this)},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},n.createElement("use",{xlinkHref:"".concat(se,"#graph-s")}))),n.createElement("button",{title:"Pick a new file",onClick:this.chooseFile.bind(this)},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},n.createElement("use",{xlinkHref:"".concat(se,"#graph-upload")})))),n.createElement("input",{ref:this.fileUpload,type:"file",onChange:this.uploadEncoding.bind(this)}),n.createElement("div",{ref:this.monacoDiv,className:"monaco"})),n.createElement("aside",null,n.createElement(ae,{spacerUserOptions:this.state.spacerUserOptions,onChangeVariables:this.changeVariables.bind(this),changeSpacerUserOptions:this.changeSpacerUserOptions.bind(this)}),n.createElement($,null)))),n.createElement("section",{className:"run-menu"},n.createElement("button",{onClick:this.runSpacer.bind(this)},"Hit and Run"))):n.createElement("section",{className:"unsupported-message"},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(se,"#alert-triangle")})),n.createElement("span",null,"Your current browser is not supported. Please use Chrome or Firefox!"))}chooseFile(){this.fileUpload.current&&this.fileUpload.current.click()}changeProblem(e){this.setState({problem:e})}changeProblemName(e){this.setState({problemName:e})}changeSpacerUserOptions(e){this.setState({spacerUserOptions:e})}changeVariables(e){this.setState({varNames:e.target.value})}uploadEncoding(e){if(null!==e.target.files&&e.target.files.length>0){const t=e.target.files[0],a=new FileReader;a.onloadend=()=>{const e=a.result?a.result:"";this.changeProblem(e),this.changeProblemName(t.name),this.setState({newProblemUploaded:!0})},a.readAsText(t)}}}var oe=Object(o.e)(re),ie=(a(237),a(3)),le=a(114);class ce extends n.Component{constructor(e){super(e),this.totalTime=void 0,this.palette=void 0,this.totalTime=-1,this.palette=["#023FA5","#7D87B9","#BEC1D4","#D6BCC0","#BB7784","#8E063B","#4A6FE3","#8595E1","#B5BBE3","#E6AFB9","#E07B91","#D33F6A","#11C638","#8DD593","#C6DEC7","#EAD3C6","#F0B98D","#EF9708","#0FCFC0","#9CDED6","#D5EAE7","#F3E1EB","#F6C4E1","#F79CD4"]}componentDidMount(){this.createSunburst()}componentDidUpdate(e,t,a){this.createSunburst()}prepareData(){let e=[],t=Object.keys(this.props.data);for(let a=0;a<t.length;a++)e.push({name:t[a],size:this.props.data[t[a]],children:[]});return e}getData(e){let t={},a="zzzzzzz";for(let s=0;s<e.length;s++){let n=e[s].name,r=e[s].size;n.includes(a)?t[a].children.push({name:n,size:r,children:[]}):(t[n]={name:n,size:r,children:[]},a=n)}let n=Object.keys(t);for(let s=0;s<n.length;s++)t[n[s]].children&&(t[n[s]].children=this.getData(t[n[s]].children));return Object.values(t)}createSunburst(){""===this.props.type&&ie.k(".sunburst-viz").remove(),""!==this.props.type&&ie.k("."+this.props.className+" .sunburst-viz").remove();let e=ie.i().domain(Object.keys(this.props.data)).range(this.palette),t=this.getData(this.prepareData());const a=Object(le.a)();a.data(t[0])(document.getElementById(this.props.className)).width(this.props.width).height(this.props.height).color(t=>e(t.name)).label(e=>e.name).size("size").tooltipTitle(e=>e.name),""!==this.props.type&&a.showLabels(!1)}render(){return this.totalTime=this.props.data.time,n.createElement("div",{className:this.props.className,id:this.props.className},""===this.props.type&&n.createElement("h2",null,"Total Time: ",this.totalTime),""!==this.props.type&&n.createElement("p",null,this.props.index))}}var pe=ce;function de(e){let t=e.split("_");for(let a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].substring(1);return t.join(" ")}class he extends n.Component{componentDidMount(){console.log(this.props.data)}componentDidUpdate(e,t,a){console.log(this.props.data)}filterTimeData(){return Object.keys(this.props.data).filter((function(e){return e.includes("time")})).reduce((e,t)=>(e[t]=this.props.data[t],e),{})}render(){let e=this.filterTimeData();return n.createElement("div",{className:"overview"},n.createElement("div",{className:"details"},n.createElement("h1",null,this.props.data.index),["result","depth","memory","max_memory","SPACER_num_invariants","SPACER_num_lemmas","SPACER_num_propagations","SPACER_num_active_lemmas"].map((e,t)=>n.createElement("p",{className:"data-details",key:t},de(e),": ",this.props.data[e]))),n.createElement(pe,{data:e,height:600,width:600,className:"time",type:"",index:""}))}}var ue=he;class me extends n.Component{componentDidMount(){this.createResultsOverview()}componentDidUpdate(e,t,a){this.createResultsOverview()}createResultsOverview(){ie.k(".results-overview svg").remove();let e=this.props.data,t=ie.d(e,(function(e){return e.result})).keys(),a=ie.i().domain(t).range(ie.j),n=ie.d(e,(function(e){return e.index})).keys(),s=ie.g().domain(n).range([this.props.config.margin.left,this.props.config.width-this.props.config.margin.right]),r=function(e){return s(function(e){return e.index}(e))},o=ie.a(s).tickValues([]),i=function(e){return e.SPACER_num_invariants},l=ie.h().domain([ie.f(e,i),ie.e(e,i)]).range([this.props.config.graphHeight-this.props.config.margin.top,this.props.config.margin.bottom]),c=function(e){return l(i(e))},p=ie.b(l),d=ie.k(".results-overview").append("svg").attr("width",this.props.config.width).attr("height",this.props.config.height);d.append("text").attr("x",this.props.config.width/2).attr("y",this.props.config.margin.top).attr("text-anchor","middle").style("font-size",this.props.config.font.title).style("text-decoration","underline").text("Index x Result x Num of Invariants"),d.append("g").attr("class","x-axis").attr("transform","translate(0,"+(this.props.config.graphHeight-this.props.config.margin.top)+")").call(o),d.append("g").attr("class","y-axis").attr("transform","translate("+this.props.config.margin.left+",0)").style("font-size",this.props.config.font.axis).call(p);let h=d.append("g");h.selectAll(".dot").data(e).enter().append("circle").attr("r",10).attr("cx",(function(e){return r(e)+s.bandwidth()/2})).attr("cy",c).on("mouseenter",(function(e){ie.k(".overview-tooltip").append("text").text(e.index)})).on("mouseout",(function(e){ie.k(".overview-tooltip").select("text").remove()})).on("click",this.props.selectBenchmark).style("fill",(function(e){return a(e.result)})),h.selectAll(".result-text").data(e).enter().append("text").attr("class","label").style("font-size",this.props.config.font.label).attr("x",(function(e){return r(e)+s.bandwidth()/4})).attr("y",(function(e){return c(e)-25})).attr("dy",".75em").text((function(e){return e.SPACER_num_invariants})),h.selectAll("legendDots").data(t).enter().append("circle").attr("cx",function(e,t){return this.props.config.margin.left+100*t}.bind(this)).attr("cy",this.props.config.graphHeight+15).attr("r",5).style("fill",(function(e){return a(e)})),h.selectAll("legendText").data(t).enter().append("text").attr("x",function(e,t){return this.props.config.margin.left+10+100*t}.bind(this)).attr("y",this.props.config.graphHeight+20).text((function(e){return e}))}render(){return n.createElement("div",{className:"results-overview"})}}var _e=me,fe=a(65),ge=a.n(fe);class be extends n.Component{render(){return n.createElement("div",null,this.props.data.map((e,t)=>n.createElement(pe,{key:t,data:e,height:200,width:200,className:"timezoom"+t,type:"timezoom",index:e.index})))}}var Ee=be;class ve extends n.Component{componentDidMount(){this.createGraph()}componentDidUpdate(e,t,a){this.createGraph()}createGraph(){if(ie.k("."+this.props.className+" svg").remove(),0===this.props.data.length)return;let e=this.props.data,t=ie.d(e,(function(e){return e.index})).keys(),a=ie.g().domain(t).range([this.props.config.margin.left,this.props.config.width-this.props.config.margin.right]),n=function(e){return a(function(e){return e.index}(e))},s=ie.a(a).tickValues([]),r=function(e){return e[this.props.yValue]}.bind(this),o=ie.h().domain([ie.f(e,r),ie.e(e,r)]).range([this.props.config.graphHeight-this.props.config.margin.top,this.props.config.margin.bottom]),i=function(e){return o(r(e))},l=ie.b(o),c=ie.k("."+this.props.className).append("svg").attr("width",this.props.config.width).attr("height",this.props.config.height).on("click",this.props.updateZoomView);c.append("text").attr("x",this.props.config.width/2).attr("y",this.props.config.margin.top).attr("text-anchor","middle").style("font-size",this.props.config.font.title).style("text-decoration","underline").text("Index x "+de(this.props.yValue)),c.append("g").attr("class","x-axis").attr("transform","translate(0,"+(this.props.config.graphHeight-this.props.config.margin.top)+")").call(s),c.append("g").attr("class","y-axis").attr("transform","translate("+this.props.config.margin.left+",0)").style("font-size",this.props.config.font.axis).call(l);let p=c.append("g");p.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",n).attr("y",i).attr("width",a.bandwidth()-1).attr("height",function(e){return this.props.config.graphHeight-this.props.config.margin.top-o(e[this.props.yValue])}.bind(this)),p.selectAll("."+this.props.classText).data(e).enter().append("text").style("font-size",this.props.config.font.label).attr("class","label").attr("x",(function(e){return n(e)})).attr("y",(function(e){return i(e)-15})).attr("dy",".75em").text(function(e){return e[this.props.yValue]}.bind(this))}render(){return n.createElement("div",{className:this.props.className})}}var xe=ve;class ye extends n.Component{constructor(e){super(e),this.overviewMetrics=void 0,this.overviewMetrics=["depth","memory","time","result"],this.state={data:[],selectedBenchmark:"",graphMin:0,graphMax:30,customMode:!1,customData:{depth:[],result:[],memory:[],time:[]},zoomMode:"",dashboardConfig:{height:450,width:1600,graphHeight:400,margin:{top:20,right:20,bottom:50,left:60},font:{title:"20px",axis:"20px",label:"14px"},barNum:10}}}componentDidMount(){this.loadData(),document.addEventListener("keydown",this.handleGraphTranslationKeyboard.bind(this))}loadData(){let e=this.props.rawData,t=ie.c(e,(function(e){return e.SPACER_cluster_out_of_gas=+e.SPACER_cluster_out_of_gas,e.SPACER_expand_pob_undef=+e.SPACER_expand_pob_undef,e.SPACER_inductive_level=+e.SPACER_inductive_level,e.SPACER_max_cluster_size=+e.SPACER_max_cluster_size,e.SPACER_max_cvx_reduced_dim=+e.SPACER_max_cvx_reduced_dim,e.depth=+e.depth,e.SPACER_max_query_lvl=+e.SPACER_max_query_lvl,e.SPACER_need_sage=+e.SPACER_need_sage,e.SPACER_num_abstractions=+e.SPACER_num_abstractions,e.SPACER_num_abstractions_failed=+e.SPACER_num_abstractions_failed,e.SPACER_num_abstractions_success=+e.SPACER_num_abstractions_success,e.SPACER_num_active_lemmas=+e.SPACER_num_active_lemmas,e.SPACER_num_cant_abstract=+e.SPACER_num_cant_abstract,e.SPACER_num_ctp_blocked=+e.SPACER_num_ctp_blocked,e.SPACER_num_dim_reduction_success=+e.SPACER_num_dim_reduction_success,e.SPACER_num_invariants=+e.SPACER_num_invariants,e.SPACER_num_is_invariant=+e.SPACER_num_is_invariant,e.SPACER_num_lemma_jumped=+e.SPACER_num_lemma_jumped,e.SPACER_num_lemmas=+e.SPACER_num_lemmas,e.SPACER_num_mbp_failed=+e.SPACER_num_mbp_failed,e.SPACER_num_merge_gen=+e.SPACER_num_merge_gen,e.SPACER_num_merge_gen_failed=+e.SPACER_num_merge_gen_failed,e.SPACER_num_merge_gen_success=+e.SPACER_num_merge_gen_success,e.SPACER_num_no_over_approximate=+e.SPACER_num_no_over_approximate,e.SPACER_num_non_lin=+e.SPACER_num_non_lin,e.SPACER_num_pobs=+e.SPACER_num_pobs,e.SPACER_num_propagations=+e.SPACER_num_propagations,e.SPACER_num_queries=+e.SPACER_num_queries,e.SPACER_num_reach_queries=+e.SPACER_num_reach_queries,e.SPACER_num_refinements=+e.SPACER_num_refinements,e.SPACER_num_reuse_reach_facts=+e.SPACER_num_reuse_reach_facts,e.SPACER_num_sync_cvx_cls=+e.SPACER_num_sync_cvx_cls,e.SPACER_num_under_approximations=+e.SPACER_num_under_approximations,e.SPACER_pob_out_of_gas=+e.SPACER_pob_out_of_gas,e.SPACER_wide_attmpts=+e.SPACER_wide_attmpts,e.SPACER_wide_success=+e.SPACER_wide_success,e.max_memory=+e.max_memory,e.memory=+e.memory,e.time=+e.time,e.time_iuc_solver_get_iuc=+e.time_iuc_solver_get_iuc,e.time_iuc_solver_get_iuc_hyp_reduce1=+e.time_iuc_solver_get_iuc_hyp_reduce1,e.time_iuc_solver_get_iuc_hyp_reduce2=+e.time_iuc_solver_get_iuc_hyp_reduce2,e.time_iuc_solver_get_iuc_learn_core=+e.time_iuc_solver_get_iuc_learn_core,e.time_pool_solver_proof=+e.time_pool_solver_proof,e.time_pool_solver_smt_total=+e.time_pool_solver_smt_total,e.time_pool_solver_smt_total_sat=+e.time_pool_solver_smt_total_sat,e.time_pool_solver_smt_total_undef=+e.time_pool_solver_smt_total_undef,e.time_spacer_ctp=+e.time_spacer_ctp,e.time_spacer_init_rules=+e.time_spacer_init_rules,e.time_spacer_init_rules_pt_init=+e.time_spacer_init_rules_pt_init,e.time_spacer_mbp=+e.time_spacer_mbp,e.time_spacer_solve=+e.time_spacer_solve,e.time_spacer_solve_propagate=+e.time_spacer_solve_propagate,e.time_spacer_solve_pt_must_reachable=+e.time_spacer_solve_pt_must_reachable,e.time_spacer_solve_reach=+e.time_spacer_solve_reach,e.time_spacer_solve_reach_children=+e.time_spacer_solve_reach_children,e.time_spacer_solve_reach_cluster=+e.time_spacer_solve_reach_cluster,e.time_spacer_solve_reach_gen_bool_ind=+e.time_spacer_solve_reach_gen_bool_ind,e.time_spacer_solve_reach_gen_merge=+e.time_spacer_solve_reach_gen_merge,e.time_spacer_solve_reach_gen_merge_cvx_cls=+e.time_spacer_solve_reach_gen_merge_cvx_cls,e.time_spacer_solve_reach_gen_wide=+e.time_spacer_solve_reach_gen_wide,e.time_spacer_solve_reach_is_reach=+e.time_spacer_solve_reach_is_reach,e}));this.setState({data:t})}handleSidebarClick(e){let t=e.target;this.setState({selectedBenchmark:t.innerText})}handleSidebarClickDot(e){this.setState({selectedBenchmark:e.index})}handleHomeClick(){this.setState({selectedBenchmark:"",customMode:!1,customData:{depth:[],time:[],memory:[],result:[]},zoomMode:"",graphMin:0,graphMax:30})}handleClearClick(){this.setState({customData:{depth:[],time:[],memory:[],result:[]}})}moveGraphLeft(){this.state.graphMin>0&&this.setState({graphMin:this.state.graphMin-1,graphMax:this.state.graphMax-1})}moveGraphRight(){this.state.graphMax<this.state.data.length-1&&this.setState({graphMin:this.state.graphMin+1,graphMax:this.state.graphMax+1})}moveGraphUp(){this.state.graphMin-10>=0&&this.setState({graphMin:this.state.graphMin-10,graphMax:this.state.graphMax-10})}moveGraphDown(){this.state.graphMax+10<this.state.data.length&&this.setState({graphMin:this.state.graphMin+10,graphMax:this.state.graphMax+10})}handleGraphTranslationClick(e){e.preventDefault();let t=e.target;"left-arrow"===t.alt?this.moveGraphLeft():"right-arrow"===t.alt&&this.moveGraphRight()}handleGraphTranslationKeyboard(e){e.preventDefault(),"ArrowLeft"===e.key?this.moveGraphLeft():"ArrowRight"===e.key?this.moveGraphRight():"ArrowDown"===e.key?this.moveGraphDown():"ArrowUp"===e.key&&this.moveGraphUp()}handleCustomClick(){this.setState({customMode:!this.state.customMode}),this.state.customMode&&this.setState({customData:{depth:[],time:[],memory:[],result:[]}})}filterDictionary(e,t=!1,a=""){let n=this.state.data.slice(this.state.graphMin,this.state.graphMax);t&&(n=this.state.data.filter((function(e){return e.index===a})));let s=[];for(let r=0;r<n.length;r++){s.push({});for(let t=0;t<e.length;t++)s[r][e[t]]=n[r][e[t]]}return s}addToCustomData(e){let t=e.target;for(let a=0;a<this.overviewMetrics.length;a++){let e=this.overviewMetrics[a],n=[e].concat(["index"]);"result"===e&&n.push("SPACER_num_invariants");let s=this.state.customData[e].concat(this.filterDictionary(n,!0,t.innerHTML));s.length>this.state.graphMax-this.state.graphMin&&s.splice(0,1);let r=this.state.customData;r[e]=s,this.setState({customData:r})}}setZoomView(e){this.setState({zoomMode:e,graphMin:0,graphMax:49})}render(){let e,t=ie.d(this.state.data,(function(e){return e.index})).keys(),a=this.state.selectedBenchmark;if("time"===this.state.zoomMode){let t=Object.keys(this.state.data[0]).filter(e=>e.includes("time"));t.push("index"),e=this.filterDictionary(t)}return n.createElement("div",{className:"page"},n.createElement("div",{className:"sidebar",id:"sidebar"},t.map((e,t)=>this.state.customMode?this.state.customData.depth.filter(t=>t.index===e).length>0?n.createElement("li",{className:"selected",key:t,onClick:this.addToCustomData.bind(this)},e):n.createElement("li",{key:t,onClick:this.addToCustomData.bind(this)},e):a?e===a?n.createElement("li",{className:"selected",key:t,onClick:this.handleSidebarClick.bind(this)},e):n.createElement("li",{key:t,onClick:this.handleSidebarClick.bind(this)},e):t>=this.state.graphMin&&t<this.state.graphMax?n.createElement("li",{className:"selected",key:t,onClick:this.handleSidebarClick.bind(this)},e):n.createElement("li",{key:t,onClick:this.handleSidebarClick.bind(this)},e))),n.createElement("div",{className:"visual"},""!==this.state.selectedBenchmark&&n.createElement(ue,{data:this.state.data.filter((function(e){return e.index===a}))[0]}),""===this.state.selectedBenchmark&&""===this.state.zoomMode&&n.createElement("div",{className:"dashboard"},this.overviewMetrics.map((e,t)=>{let a;if(this.state.customMode){if(a=this.state.customData[e],"result"===e)return n.createElement(_e,{key:t,data:a,config:this.state.dashboardConfig,selectBenchmark:this.handleSidebarClickDot.bind(this)})}else{if("result"===e)return a=this.filterDictionary([e].concat(["index","SPACER_num_invariants"])),n.createElement(_e,{key:t,data:a,config:this.state.dashboardConfig,selectBenchmark:this.handleSidebarClickDot.bind(this)});a=this.filterDictionary(["index"].concat([e]))}return n.createElement(xe,{key:t,data:a,config:this.state.dashboardConfig,className:e+"-overview",classText:e+"-text",yValue:e,updateZoomView:this.setZoomView.bind(this,"time"===e?"time":"")})}),n.createElement("img",{className:"left-arrow",src:ge.a,alt:"left-arrow",onClick:this.handleGraphTranslationClick.bind(this)}),n.createElement("img",{className:"right-arrow",src:ge.a,alt:"right-arrow",onClick:this.handleGraphTranslationClick.bind(this)})),"time"===this.state.zoomMode&&n.createElement(Ee,{data:e})),n.createElement("button",{className:"home-button",onClick:this.handleHomeClick.bind(this)},"Home"),n.createElement("button",{className:"custom-button",onClick:this.handleCustomClick.bind(this)},"Custom"),this.state.customMode&&n.createElement("button",{className:"clear-button",onClick:this.handleClearClick.bind(this)},"Clear"))}}var Se=ye;class ke extends n.Component{constructor(e){super(e),this.fileReader=void 0,this.state={rawData:[],file:null}}handleFileRead(e){const t=this.fileReader.result.toString();let a={name:e.name,id:Date.now().toString(),content:t};this.props.updateData(a)}handleFileChosen(e){e.preventDefault();let t=this.state.file;this.fileReader=new FileReader,this.fileReader.onloadend=this.handleFileRead.bind(this,t),this.fileReader.readAsText(t)}updateFile(e){this.setState({file:e.target.files[0]})}render(){return n.createElement("div",{className:"dashboard-menu"},n.createElement("h1",null,"Spacer Dashboard"),n.createElement("form",null,n.createElement("input",{type:"file",accept:".csv",onChange:this.updateFile.bind(this)}),n.createElement("button",{type:"submit",className:"fake-button",onClick:this.handleFileChosen.bind(this)},"Upload")),n.createElement("div",{className:"file-list"},n.createElement("h2",null,"Uploaded Files"),this.props.rawData.length>0&&this.props.rawData.map((e,t)=>n.createElement("li",{key:t},n.createElement("span",null,e.name),n.createElement("a",{href:"#/dashboard/"+e.id},"Analysis")))))}}var Ce=ke;const Me=a(36);class Oe extends n.Component{constructor(...e){super(...e),this.isChromeOrFirefox=!0,this.monacoDiv=n.createRef(),this.monaco=null,this.state={input:"()",output:"",inputOutputExamples:[]}}componentDidMount(){this.isChromeOrFirefox&&(this.monaco=Z.a.create(this.monacoDiv.current,{lineNumbers:"off",roundedSelection:!1,scrollBeyondLastLine:!1,scrollBeyondLastColumn:0,minimap:{enabled:!1},renderLineHighlight:"none",hideCursorInOverviewRuler:!0,links:!1,overviewRulerBorder:!1,automaticLayout:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,wordWrap:"wordWrapColumn"}),this.monaco.setValue(this.props.input))}addInputOutputExample(e){this.setState({inputOutputExamples:[...this.state.inputOutputExamples,e]})}openEditor(){console.log("click Apply");let e=this.monaco.getModel().getValueInRange(this.monaco.getSelection());console.log(e),this.setState({input:e})}getFormulas(e){return e.split(/\n\s*\n/)}blast(e){var t;let a=this.getFormulas((null===(t=this.monaco)||void 0===t?void 0:t.getModel()).getValue()),n=new N.b;console.log(a),console.log(e),console.log("pew pew !");let s="";var r,o=Object(m.a)(a);try{for(o.s();!(r=o.n()).done;){var i=r.value;let t=new N.a(i),a=n.runStack(t,e);s+=a.toString(-1,a.nodeList[0])+"\n\n"}}catch(l){o.e(l)}finally{o.f()}this.setState({output:s})}pushToMessageQ(e,t){}render(){return this.isChromeOrFirefox?n.createElement("section",{className:"component-menu"},n.createElement("section",{className:"editor"},n.createElement("div",{id:"editor-wrapper"},n.createElement("h2",null,"Original"),n.createElement("div",{ref:this.monacoDiv,className:"monaco",id:"input"}),n.createElement("button",{onClick:this.openEditor.bind(this)},"Open Editor"),n.createElement("h2",null,"Transformed"),n.createElement("textarea",{ref:"output",id:"output",rows:30,value:this.state.output,readOnly:!0})),n.createElement(P,{expName:this.props.expName,input:this.state.input,onBlast:this.blast.bind(this),isModal:!1,onAddInputOutputExample:this.addInputOutputExample.bind(this),onPushToMessageQ:this.pushToMessageQ.bind(this)}))):n.createElement("section",{className:"unsupported-message"},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(Me,"#alert-triangle")})),n.createElement("span",null,"Your current browser is not supported. Please use Chrome or Firefox!"))}}a(238);class we extends n.Component{constructor(...e){super(...e),this.state={rawData:[]}}render(){return n.createElement(r.a,null,n.createElement(o.a,{path:"/",exact:!0,render:()=>n.createElement(oe,null)}),n.createElement(o.a,{path:"/replay/:expName",render:({match:e})=>this.appComponent(e.params.expName)}),n.createElement(o.a,{exact:!0,path:"/dashboard/",render:()=>n.createElement(Ce,{rawData:this.state.rawData,updateData:this.changeRawData.bind(this)})}),n.createElement(o.a,{path:"/dashboard/:fileId",render:({match:e})=>this.displayVisualization(e.params.fileId)}),n.createElement(o.a,{exact:!0,path:"/editor/",render:()=>n.createElement(Oe,{expName:"",input:""})}))}appComponent(e){return n.createElement("div",{id:"appWrapper"},n.createElement(X,{expName:e}))}displayVisualization(e){let t=this.state.rawData.filter(t=>t.id===e)[0];if(t)return n.createElement(Se,{rawData:t.content})}changeRawData(e){let t=this.state.rawData.concat([e]);this.setState({rawData:t})}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.render(n.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},36:function(e,t,a){e.exports=a.p+"static/media/all.496082da.svg"},58:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){"use strict";function n(e){console.log("**"+e+"//");let t=0,a=0,n=0;const s=()=>{for(;e[t].match(/\r\n|\r|\n/);)a++,t++;for(;e[t].match(/\s/);)t++,n++;if("("!==e[t])throw new Error("Input is not valid: unexpected '".concat(e[t],"' at the beginning"));t++;const r=[];let o="",i=a,l=n;for(;;){n++;let c=e[t++];if(!c){if(o)throw new Error("Input is not valid: unexpected '".concat(o,"' at the end"));break}if(")"===c){o&&r.push({token:o,startLine:i,startOffset:l,endLine:a,endOffset:n});break}if("\\"===c)c+=e[t++],o+=c;else if(c.match(/\r\n|\r|\n/))o&&(r.push({token:o,startLine:i,startOffset:l,endLine:a,endOffset:n}),o=""),a++,n=0;else if(c.match(/\s/))o&&r.push({token:o,startLine:i,startOffset:l,endLine:a,endOffset:n}),o="",i=a,l=n;else if("("===c)t--,n--,r.push(s());else if('"'===c)for(o+=c;(c=e[t++])&&("\\"===c&&'"'===e[t]&&(c+=e[t++]),o+=c,'"'!==c););else o+=c}return r};return s()}function s(e){return"startOffset"in e}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}))},65:function(e,t,a){e.exports=a.p+"static/media/angle-arrow-down.412f3289.svg"},9:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));class n extends Error{constructor(e){super(e),this.name="SatVisAssertionError"}}function s(e,t=""){if(!e)throw new n("Assertion failed: "+(t||""))}}},[[137,2,3]]]);
//# sourceMappingURL=main.3a74b61e.chunk.js.map
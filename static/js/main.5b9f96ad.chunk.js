(this["webpackJsonpvisualization-frontend"]=this["webpackJsonpvisualization-frontend"]||[]).push([[1],{110:function(e,t,a){e.exports=a.p+"static/media/eye.bf3c357b.svg"},136:function(e,t,a){e.exports=a(235)},141:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e){e.exports=JSON.parse('{"hidden":{"hidden":true,"markedStyle":{"border":"#ffffff00","background":"#ffffff00"},"highlightStyle":{"border":"#ffffff00","background":"#ffffff00"},"shape":"box","text":"#ffffff00","defaultStyle":{"border":"#ffffff00","background":"#ffffff00"}},"preprocessing-deleted":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#8cd1c9","background":"#abe0d1"}},"preprocessing":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#8cd1c9","background":"#abe0d1"}},"conjecture":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#009988","background":"#44bb99"}},"theory-axiom-deleted":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#999999","defaultStyle":{"border":"#b4c8dd","background":"#c8ddf1"}},"theory-axiom":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"deleted":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#999999","defaultStyle":{"border":"#f1f1f1","background":"#f8f8f8"}},"passive":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#000000","defaultStyle":{"border":"#FF3232","background":"#FF5959"}},"activated-deleted":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#bbbbbb","background":"#dddddd"}},"activated":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#bbbbbb","background":"#dddddd"}},"lemma":{"hidden":false,"markedStyle":{"border":"#16941c","background":"#a3f7a7"},"highlightStyle":{"border":"#16941c","background":"#a3f7a7"},"shape":"star","text":"#000000","defaultStyle":{"border":"#16941c","background":"#a3f7a7"}},"boundary-hidden":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"boundary":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"sameExprID":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}}}')},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},235:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(56),s=(a(141),a(31)),o=a(5),i=a(2),l=a.n(i),c=a(6),p=(a(143),a(41));class d extends n.Component{constructor(...e){super(...e),this.slider=n.createRef()}render(){var e=this.props,t=e.historyLength,a=e.currentTime,r=e.onCurrentTimeChange;return console.log("historyLength",t),n.createElement("section",{className:"component-slider"},n.createElement("button",{disabled:!this.props.enabled||a<=0,onClick:()=>r(a-1)},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(p,"#history-back")}))),n.createElement("section",{className:"wrapper"},n.createElement("input",{ref:this.slider,type:"range",min:0,max:t,value:a,disabled:!this.props.enabled,onChange:()=>r(this.getSliderValue())})),n.createElement("button",{disabled:!this.props.enabled||a>=t,onClick:()=>r(a+1)},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(p,"#history-forward")}))))}getSliderValue(){return this.slider.current?parseInt(this.slider.current.value,10):0}}var h=a(19);a(144);class m extends Error{constructor(e){super(e),this.name="SatVisAssertionError"}}function u(e,t=""){if(!e)throw new m("Assertion failed: "+(t||""))}var _=a(4),f=a(145),g=["#e6194B","#f58231","#3cb44b","#42d4f4","#000075","#469990","#911eb4","#f032e6","#fabebe","#800000"];function b(e,t){var a=new Map;for(var n in e){var r=e[n];a[r.exprID]=r.expr}var s={};for(var o in e){var i=e[o];if("EType.ADD_LEM"===i.event_type){var l=i.exprID,c=i.level,p=i.pobID;p in s||(s[p]=new Array);var d,h=!1,m=Object(_.a)(s[p]);try{for(m.s();!(d=m.n()).done;){var u=d.value;if(u[0]===l){h=!0;var f=u[1];(c>u[2]||"oo"===c)&&(u[2]=c),c<f&&(u[1]=c);break}}}catch(g){m.e(g)}finally{m.f()}h||s[i.pobID].push([l,c,c])}}return s}function v(e,t){var a=new Map;for(var n in e){var r=e[n],s={raw:r.expr.raw,readable:r.expr.readable,lhs:[],edited:r.expr.readable,changed:!1};a[r.exprID]=s}return a}function y(e,t,a,n,r=-1){var s=f[t],o=a.includes(e.nodeID),i={border:o?s.markedStyle.border:s.defaultStyle.border,background:o?s.markedStyle.background:s.defaultStyle.background,highlight:{border:s.highlightStyle.border,background:s.highlightStyle.background}};return"lemma"===t&&-1!==r&&(i={border:g[r],background:g[r],highlight:{border:g[r],background:g[r]}}),{id:e.nodeID,shape:n>0?n>1?"hexagon":"star":s.shape,fixed:!0,color:i}}class E extends n.Component{constructor(...e){super(...e),this.state={metaPressed:!1},this.network=null,this.networkNodes=new h.DataSet([]),this.networkEdges=new h.DataSet([]),this.graphContainer=n.createRef(),this.boundKeyupHandler=this.keyupHandler.bind(this)}componentDidMount(){this.generateNetwork(),this.updateNetwork(!1,this.props.layout),this.network.fit(),window.addEventListener("keyup",this.boundKeyupHandler,!1)}componentWillUnmount(){window.removeEventListener("keyup",this.boundKeyupHandler,!1)}componentDidUpdate(e){this.updateNetwork(!1,this.props.layout)}render(){return n.createElement("section",{className:"component-graph",ref:this.graphContainer},n.createElement("canvas",null))}generateNetwork(){var e=this;console.log("I am Graph. I receive:",this.props),u(this.graphContainer.current),u(!this.network),this.network=new h.Network(this.graphContainer.current,{nodes:this.networkNodes,edges:this.networkEdges},{physics:!1,interaction:{multiselect:!1},layout:{hierarchical:{direction:"UD",sortMethod:"directed"}}}),this.network.on("click",function(){var t=Object(c.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.nodes.length>0?(u(1===a.nodes.length),n=a.nodes[0],console.log("clickEvent.nodes",a.nodes),console.log("clickedNodeId",e.props.tree[n]),e.props.onNodeSelectionChange(a.nodes)):e.props.onNodeSelectionChange([]);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}updateNetwork(e,t){if("SatVis"===t)this.visLayout(this.props.tree);else if("PobVis"===t){var a=function(e){var t=JSON.parse(JSON.stringify(e));for(var a in t){var n=t[a];if("EType.EXP_POB"===n.event_type){var r,s=t[n.parent],o=s.children,i=!1,l=void 0,c=Object(_.a)(o);try{for(c.s();!(r=c.n()).done;){var p=t[r.value];if(p.nodeID!==n.nodeID&&p.exprID===n.exprID){i=!0,l=p;break}}}catch(v){c.e(v)}finally{c.f()}if(i){n.to_be_vis=!1;var d,h=Object(_.a)(n.children);try{for(h.s();!(d=h.n()).done;){var m=d.value;t[m].parent=l.nodeID,l.children.push(m)}}catch(v){h.e(v)}finally{h.f()}var u,f=new Array,g=Object(_.a)(o);try{for(g.s();!(u=g.n()).done;){var b=u.value;b!==n.nodeID&&f.push(b)}}catch(v){g.e(v)}finally{g.f()}s.children=f}}else n.to_be_vis=!1}return t}(this.props.tree);this.visLayout(a)}}visLayout(e){var t=this,a=this.props.nodeSelection.length>0,n=Number.MIN_SAFE_INTEGER,r=[];a&&(n=e[this.props.nodeSelection[0]].exprID,r=n in this.props.PobLemmasMap?this.props.PobLemmasMap[n].map(e=>({id:e[0],start:e[1],end:e[2]})):[]);var s=new Array,o=new Array,i=0,l=function(a){var l=e[a];if(!l.to_be_vis)return"continue";var c=void 0,p=(l.exprID in t.props.PobLemmasMap?t.props.PobLemmasMap[l.exprID].filter(e=>"oo"===e[2]):[]).filter(e=>e[1]===l.level||"oo"===e[1]).length;c=l.exprID===n?y(l,"sameExprID",t.props.nodeSelection,p):r.length>0&&r.filter(e=>e.id===l.exprID).length>0?y(l,"lemma",t.props.nodeSelection,p,r.findIndex(e=>e.id===l.exprID)%10):l.nodeID>t.props.currentTime?y(l,"activated",t.props.nodeSelection,p):y(l,"passive",t.props.nodeSelection,p),s.push(c);var d=function(e,t,a,n){return{id:e,arrows:"to",color:{color:"#dddddd",highlight:"#f8cfc1"},from:t,to:a,smooth:!1,hidden:n}}(i,l.parent,l.nodeID,!1);o.push(d),i++};for(var c in e)l(c);this.networkNodes.clear(),this.networkNodes.add(s),this.networkEdges.clear(),this.networkEdges.add(o)}keyupHandler(e){if(1===this.props.nodeSelection.length){var t=function(e,t,a){u(a),u("body"in a);var n=a.body.nodes[e],r=n.id,s=Number.MAX_SAFE_INTEGER;if("ArrowLeft"===t)for(var o in a.body.nodes){var i=a.body.nodes[o],l=n.x-i.x;i.y===n.y&&(l>0&&l<s&&(r=i.id,s=l))}else if("ArrowRight"===t)for(var c in a.body.nodes){var p=a.body.nodes[c],d=p.x-n.x;p.y===n.y&&(d>0&&d<s&&(r=p.id,s=d))}else if("ArrowDown"===t&&n.edges.length>=2)r=n.edges.filter(e=>e.fromId===n.id)[0].toId;else if("ArrowUp"===t&&n.edges.length>=1){var h=n.edges.filter(e=>e.toId===n.id);h.length>0&&(r=h[0].fromId)}return r}(this.props.nodeSelection[0],e.key,this.network);this.props.onNodeSelectionChange([t])}}}var k=a(106);a.n(k).a.setAppElement("#root");class S extends n.Component{componentDidMount(){}render(){return n.createElement("main",null,n.createElement("input",{type:"text",value:this.props.runCmd,readOnly:!0}),n.createElement(E,{tree:this.props.tree,onNodeSelectionChange:this.props.onNodeSelectionChange,nodeSelection:this.props.nodeSelection,currentTime:this.props.currentTime,layout:this.props.layout,PobLemmasMap:this.props.PobLemmasMap}),n.createElement(d,{historyLength:this.props.historyLength,currentTime:this.props.currentTime,onCurrentTimeChange:this.props.onCurrentTimeChange,enabled:!0}))}}a(99),a(157);var x=a(107);var C=a(108),w={"<=":">",">=":"<","!=":"=","<":">=",">":"<=","=":"!=","&&":"||","||":"&&",not:""},D=["&&","||","=>"];function O(e){return"("!==e[0]&&(e="("+e+")"),function e(t,a){var n={and:"&&",or:"||"};if(t.length<1)return"";if(t[0]in n)return e(t.splice(1),n[t[0]]);if(["!=","=","<=",">=",">","<","+","*","/"].indexOf(t[0])>=0||"-"===t[0]&&3===t.length)return"("+e(t[1],"")+" "+t[0]+" "+e(t[2],"")+")";if("select"===t[0])return t[1]+"["+t[2]+"]";if("not"===t[0])return t[1][0]in w&&(t[1][0]=w[t[1][0]]),e(t[1],"");if(""!==a&&1===t.length)return e(t[0],"");if(""!==a)return e(t[0],"")+" "+a+"\n"+e(t.splice(1),a);if("-"===t[0])return t[0]+t[1];if("string"===typeof t[0]&&Array.isArray(t)&&t.length>1)return t[0]+": ("+e(t[1],"")+")";return t}(Object(C.a)(e),"")}function N(e,t){if(""===t)return e;if("string"===typeof e)for(var a=t.split(" "),n=0;n<a.length;n++){var r=new RegExp("[a-zA-z0-9@$:!]+_"+n+"_n","gi");e=e.replace(r,a[n])}return e}function A(e){var t=function(e){for(var t=Object.keys(w),a=0;a<t.length;a++)if(e.includes(t[a]))return t[a];return"not"}(e);return"not"===t?t+" "+e:e.replace(t,w[t])}function M(e){for(var t=0;t<D.length;t++)if(e.includes(D[t]))return D[t]}function P(e,t){for(var a=e.split(t),n=[],r=0;r<a.length;r++)""!==a[r]&&n.push(a[r].trim());return n}class I extends n.Component{constructor(e){super(e),this.keep=!1,this.type_map={EQUALS:"= ",PLUS:"+ ",TIMES:"* ",LT:"< ",LE:"<= ",GT:"> ",GE:">= ",SYMBOL:"","0_REAL_CONSTANT":""},this.state={learningFlag:!1,learningErrorFlag:!1,transformationFlag:!1,transformationErrorFlag:!1,possibleTransformations:[],transformationSelected:""}}node_to_string(e,t){var a="",n=t?"\n":"";if(Array.isArray(e.content)){var r,s=Object(_.a)(e.content);try{for(s.s();!(r=s.n()).done;){var o=r.value;a+=this.node_to_string(o,!1)+n}}catch(i){s.e(i)}finally{s.f()}}else a+=e.content;return e.type in this.type_map?""===this.type_map[e.type]?" "+a:"("+this.type_map[e.type]+a+")":"("+e.type+n+a+")"}getLemmaList(e){var t=this,a=[];if("EType.EXP_POB"===e.event_type&&(a.push(n.createElement("h2",{key:"lemma-title"}," Lemmas summarization ")),e.exprID in this.props.PobLemmasMap)){var r,s=this.props.PobLemmasMap[e.exprID],o=Object(_.a)(s);try{var i=function(){var e=r.value,o=s.indexOf(e),i={color:g[o]};a.push(n.createElement("h3",{style:i,key:"lemma-header-"+e[0]},"ExprID: ",e[0],", From: ",e[1]," to ",e[2]));var l=t.props.ExprMap[e[0]].edited;if("string"===typeof l){if(Object.keys(t.props.relatedExprMap).length>0)for(var c=Object.keys(t.props.relatedExprMap),p=0;p<c.length;p++){var d=t.props.relatedExprMap[c[p]];if(l===d.readable){l=d.edited;break}}for(var h=P(l,"\n"),m=-1,u=0;u<h.length;u++)if(h[u].includes("=>")){m=u;break}h.forEach((r,s)=>{var o={color:"black"};-1!==m&&s>m&&(o.color="darkblue"),h.length,a.push(n.createElement("pre",{style:o,onClick:t.addLemma.bind(t,e[0]),key:"lemma-expr-"+e[0]+s},r))})}else a.push(n.createElement("pre",null,l))};for(o.s();!(r=o.n()).done;)i()}catch(l){o.e(l)}finally{o.f()}}return a}addLemma(e,t){var a=this.props.ExprMap[e].readable,n=P(a,M(a)),r=function(e){for(var t=0;t<D.length;t++)e=e.replace(D[t],"");return e}(t.target.innerText),s=function(e,t){for(var a=0;a<e.length;a++)if(t===e[a]||t===A(e[a]))return a;return-1}(n,r=r.trim()),o=this.props.ExprMap[e].lhs;o.includes(s)?o.splice(o.indexOf(s),1):o.push(s),this.props.ExprMap[e].lhs=o,this.props.ExprMap[e].edited=function(e,t,a){if("string"!==typeof e)return e;for(var n=[],r=[],s=P(e,a),o="",i=0;i<s.length;i++)t.indexOf(i)>-1?(o=0===n.length?A(s[i])+o:A(s[i])+" "+w[a]+"\n"+o,n.push(i)):(o=0===r.length?o+" =>\n"+s[i]:o+" "+a+"\n"+s[i],r.push(i)),i===s.length-1&&(0===n.length&&(o="true "+o),0===r.length&&(o+=" =>\nfalse"));return o}(a,o,M(a)),this.props.ExprMap[e].changed=0!==o.length,this.props.saveExprs(),this.forceUpdate()}learnTransformation(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({learningFlag:!1,learningErrorFlag:!1,transformationFlag:!1,transformationErrorFlag:!1,possibleTransformations:[]}),t.next=3,fetch("http://localhost:5000/spacer/learn_transformation",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.props.name})});case 3:if(200!==(a=t.sent).status){t.next=13;break}return t.next=7,a.json();case 7:n=t.sent,r=n.response,e.setState({learningFlag:!0,possibleTransformations:r}),e.forceUpdate(),t.next=14;break;case 13:e.setState({learningErrorFlag:!0});case 14:case"end":return t.stop()}}),t)})))()}transformExprs(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({transformationFlag:!1,transformationErrorFlag:!1}),t.next=3,fetch("http://localhost:5000/spacer/apply_transformation",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.props.name,selectedProgram:e.state.transformationSelected})});case 3:if(200!==(a=t.sent).status){t.next=15;break}return t.next=7,a.json();case 7:n=t.sent,r=n.response,Object.keys(r).forEach(t=>{e.props.ExprMap[t].edited=r[t].Edited,e.props.ExprMap[t].lhs=r[t].Lhs}),e.props.saveExprs(),e.setState({transformationFlag:!0}),e.forceUpdate(),t.next=16;break;case 15:e.setState({transformationErrorFlag:!0});case 16:case"end":return t.stop()}}),t)})))()}updateTransformationSelected(e){this.setState({transformationSelected:e.target.value})}render(){var e,t;return this.props.nodes.length>1&&(e=this.props.nodes[0],t=this.props.nodes[1]),n.createElement("div",null,this.props.nodes.length>1&&n.createElement("section",{className:"component-node-details details-diff"},n.createElement("article",null,n.createElement("h2",null,"Diff (Node: ",n.createElement("strong",null,e.nodeID)," vs. Node: ",n.createElement("strong",null,t.nodeID),")"),function(e,t){for(var a=[],n=e.split("\n"),r=t.split("\n"),s=0;s<Math.min(n.length,r.length);s++){var o=x.diffWords(n[s],r[s]);o.push({added:!1,removed:!1,value:"\n"}),a=a.concat(o),console.log(a)}return console.log(a),a}(e.expr.readable,t.expr.readable).map((e,t)=>n.createElement("span",{key:t,className:e.added?"green":e.removed?"red":"black"},e.value)))),this.props.nodes.map((t,a)=>{var r="type:"+t.event_type+" level:"+t.level,s=this.getLemmaList(t),o=t.expr.readable;"SMT"===this.props.expr_layout?console.log(t.expr):t.ast_json&&(o+=this.node_to_string(t.ast_json,!0));var i="component-node-details details-top-"+a,l="component-node-details details-bottom-"+a;return n.createElement("div",{key:a},n.createElement("section",{className:i},n.createElement("article",null,n.createElement("h2",null,"Node ",n.createElement("strong",null,t.nodeID,", "),"Expr ",n.createElement("strong",null," ",t.exprID," "),", Parent ",n.createElement("strong",null," ",t.pobID,"  ")),n.createElement("h3",null,r),n.createElement("pre",{className:1===this.props.nodes.length?"black":t===e?"red":"green"},o))),s.length>0&&n.createElement("section",{className:l},n.createElement("article",null,s,n.createElement("button",{onClick:this.learnTransformation.bind(this)},"Learn Transform"),this.state.learningFlag&&n.createElement("p",null,"Possible Transformations: "),0!==this.state.possibleTransformations.length&&this.state.possibleTransformations.map((e,t)=>n.createElement("div",{key:t},n.createElement("input",{type:"radio",name:"transformation",value:e.xmlAst,onClick:this.updateTransformationSelected.bind(this)}),e.humanReadableAst)),this.state.learningErrorFlag&&n.createElement("p",{style:{color:"red"}},"Internal Server Error: Please Try Again"),n.createElement("button",{onClick:this.transformExprs.bind(this)},"Apply Transform"),this.state.transformationFlag&&n.createElement("p",null,"Transformation Complete"),this.state.transformationErrorFlag&&n.createElement("p",{style:{color:"red"}},"Internal Server Error: Please Try Again"))))}))}}class T extends n.Component{constructor(e){super(e),this.state={matchingFiles:[],exps:[],selected:""}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchExps();case 2:return e.getMatchingFiles(),t.next=5,e.getMatchingExprMap();case 5:case"end":return t.stop()}}),t)})))()}getMatchingFiles(){var e=this.state.exps.filter(e=>e.name.includes(this.props.name.match(/.*.smt2/))&&e.name!==this.props.name);e.length>0&&this.setState({matchingFiles:e,selected:e[0].name})}getMatchingExprMap(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/get_exprs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.state.selected})});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,e.props.updateRelatedExprMap(JSON.parse(n.expr_map)),t.next=15;break;case 10:if(t.prev=10,t.t0=t.catch(3),"SatVisAssertionError"!==t.t0.name){t.next=14;break}throw t.t0;case 14:e.setState({exps:[]});case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}fetchExps(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/fetch_exps",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:""});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:n=t.sent,e.setState({exps:n.exps_list}),t.next=15;break;case 10:if(t.prev=10,t.t0=t.catch(3),"SatVisAssertionError"!==t.t0.name){t.next=14;break}throw t.t0;case 14:e.setState({exps:[]});case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}updateSelected(e){this.setState({selected:e.target.value})}render(){return n.createElement("section",{className:"component-node-details details-top-right"},n.createElement("select",{id:"exprs",onChange:this.updateSelected.bind(this)},this.state.matchingFiles.length>0&&this.state.matchingFiles.map((e,t)=>n.createElement("option",{key:t,value:e.name},e.name))),n.createElement("button",{onClick:this.getMatchingExprMap.bind(this)},"Get Expr Map"))}}var L=T,R=a(41);class B extends n.Component{constructor(e){super(e),this.state={relatedExprMap:[]}}createButton(e,t,a){return n.createElement("button",{title:e,onClick:t},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},n.createElement("use",{xlinkHref:"".concat(R,"#").concat(a)})))}getNodeDetails(){if(this.props.nodeSelection.length>=1&&null!=this.props.tree){var e,t=[],a=Object(_.a)(this.props.nodeSelection);try{for(a.s();!(e=a.n()).done;){var r=e.value;t.push(this.props.tree[r])}}catch(s){a.e(s)}finally{a.f()}return n.createElement(I,{nodes:t,name:this.props.name,PobLemmasMap:this.props.PobLemmasMap,ExprMap:this.props.ExprMap,layout:this.props.layout,expr_layout:this.props.expr_layout,saveExprs:this.props.saveExprs,relatedExprMap:this.state.relatedExprMap})}return n.createElement("section",{className:"component-node-details overview"},n.createElement("small",{id:"nodeInfo"}," ",n.createElement("strong",null,"".concat(this.props.nodeSelection.length," nodes")," ")," selected"))}updateRelatedExprMap(e){this.setState({relatedExprMap:e})}render(){return console.log(this.props.mode),n.createElement("aside",null,n.createElement("article",null,this.props.messages_q.map((e,t)=>n.createElement("section",{key:t,className:"component-node-menu"},e)),n.createElement("section",{className:"component-node-menu"},this.createButton("Poke",this.props.onPoke,"graph-undo"),this.createButton("SatVis",this.props.SatVisLayout,"node-parents"),this.createButton("PobVis",this.props.PobVisLayout,"node-children"),this.createButton("MultiSelect",this.props.MultiSelectMode,"history-forward"),n.createElement("button",{title:"SMT",onClick:this.props.SMTLayout},n.createElement("svg",{viewBox:"0 0 30 30",className:"icon big"},n.createElement("text",{x:"50%",alignmentBaseline:"middle",textAnchor:"middle",y:"50%",dominantBaseline:"middle",fontWeight:"light",stroke:"none",fill:"black",fontFamily:"monospace"},"Raw"))),n.createElement("button",{title:"JSON",onClick:this.props.JSONLayout},n.createElement("svg",{viewBox:"0 0 35 35",className:"icon big"},n.createElement("text",{x:"50%",alignmentBaseline:"middle",textAnchor:"middle",y:"50%",dominantBaseline:"middle",fontWeight:"light",stroke:"none",fill:"black",fontFamily:"monospace"},"Sort"))))),this.getNodeDetails(),n.createElement(L,{name:this.props.name,updateRelatedExprMap:this.updateRelatedExprMap.bind(this)}))}}var F=B;a(158);class j extends n.Component{constructor(...e){super(...e),this.state={exp_path:this.props.exp_path,state:"waiting",trees:[],runCmd:"Run command:",messages_q:[""],nodeSelection:[],currentTime:0,layout:"PobVis",expr_layout:"SMT",PobLemmasMap:{},ExprMap:{},multiselect:!1,varNames:""}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("iterative"!==e.props.mode){t.next=5;break}return t.next=3,e.runSpacer(e.props.problem,e.props.spacerUserOptions,e.props.mode);case 3:t.next=7;break;case 5:return t.next=7,e.poke();case 7:case"end":return t.stop()}}),t)})))()}poke(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n,r,s,o,i,c,p,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=["Poking Spacer..."],console.log("poking..."),e.setState({state:"waiting",messages_q:a}),t.next=5,fetch("http://localhost:5000/spacer/poke",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.state.exp_path})});case 5:return n=t.sent,t.prev=6,t.next=9,n.json();case 9:for(r=t.sent,console.log("backend response:",r),a=["Get response from Backend."],s=r.nodes_list,o=0;o<Object.keys(s).length;o++)i=N(s[o].expr,r.var_names),c=O(i),s[o].expr={raw:i,readable:c};"loaded",p=b(s,r.var_names),d=""===r.expr_map?v(s,r.var_names):JSON.parse(r.expr_map),e.setState({trees:[s],runCmd:r.run_cmd,messages_q:["Spacer is "+r.spacer_state],state:"loaded",PobLemmasMap:p,ExprMap:d,varNames:r.var_names}),console.log("state is set"),t.next=26;break;case 21:if(t.prev=21,t.t0=t.catch(6),"SatVisAssertionError"!==t.t0.name){t.next=25;break}throw t.t0;case 25:e.setState({state:"error",messages_q:["Error: ".concat(t.t0.message)]});case 26:case"end":return t.stop()}}),t,null,[[6,21]])})))()}saveExprMap(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/save_exprs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.state.exp_path,expr_map:JSON.stringify(e.state.ExprMap)})});case 2:case"end":return t.stop()}}),t)})))()}runSpacer(e,t,a){var n=this;return Object(c.a)(l.a.mark((function r(){var s,o,i,c,p;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.setState({state:"waiting",messages_q:["Waiting for Spacer..."]}),r.next=3,fetch("http://localhost:5000/spacer/start_iterative",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:n.props.name,file:e,spacerUserOptions:t,varNames:n.props.varNames})});case 3:return s=r.sent,r.prev=4,r.next=7,s.json();case 7:o=r.sent,console.log("backend response:",o),"success"===o.status?(i="iterative"===a&&"running"===o.spacer_state?"loaded iterative":"loaded",c=["Hit Poke to update graph"],n.setState({exp_path:o.exp_name,messages_q:c,state:i})):(u("error"===o.status),u(void 0!==(p=o.message)&&null!==p),n.setState({state:"error",messages_q:[p]})),r.next=17;break;case 12:if(r.prev=12,r.t0=r.catch(4),"SatVisAssertionError"!==r.t0.name){r.next=16;break}throw r.t0;case 16:n.setState({state:"error",messages_q:["Error: ".concat(r.t0.message)]});case 17:case"end":return r.stop()}}),r,null,[[4,12]])})))()}updateNodeSelection(e){if(this.state.multiselect){var t=this.state.nodeSelection.slice(this.state.nodeSelection.length-1).concat(e);this.setState({nodeSelection:t})}else this.setState({nodeSelection:e})}updateCurrentTime(e){u(this.state.trees.length>0),this.setState({currentTime:e})}setPobVisLayout(){this.setState({layout:"PobVis"})}setSatVisLayout(){this.setState({layout:"SatVis"})}setMultiSelect(){this.state.multiselect?this.state.nodeSelection.length>0?this.setState({nodeSelection:[this.state.nodeSelection[this.state.nodeSelection.length-1]]}):this.setState({messages_q:["Hit Poke to update graph"]}):this.setState({messages_q:["Select Up to 2 nodes"]}),this.setState({multiselect:!this.state.multiselect})}setSMTLayout(){this.setState({expr_layout:"SMT"})}setJSONLayout(){this.setState({expr_layout:"JSON"})}render(){var e,t,a=this.state,r=a.state,s=a.trees,o=a.runCmd,i=a.messages_q,l=a.nodeSelection,c=a.currentTime,p=a.layout,d=a.expr_layout,h=a.PobLemmasMap,m=a.ExprMap;if("loaded"===r){u(s.length>0),e=s[s.length-1];var _=Object.keys(e).length;t=n.createElement(S,{mode:this.props.mode,runCmd:o,tree:e,onNodeSelectionChange:this.updateNodeSelection.bind(this),nodeSelection:l,historyLength:_,currentTime:c,onCurrentTimeChange:this.updateCurrentTime.bind(this),layout:p,PobLemmasMap:h})}else t=n.createElement("main",null,n.createElement("section",{className:"slider-placeholder"}));return n.createElement("div",{className:"app"},t,n.createElement(F,{messages_q:i,mode:this.props.mode,tree:e,nodeSelection:l,onUpdateNodeSelection:this.updateNodeSelection.bind(this),onPoke:this.poke.bind(this),SatVisLayout:this.setSatVisLayout.bind(this),PobVisLayout:this.setPobVisLayout.bind(this),MultiSelectMode:this.setMultiSelect.bind(this),SMTLayout:this.setSMTLayout.bind(this),JSONLayout:this.setJSONLayout.bind(this),PobLemmasMap:h,ExprMap:m,layout:p,expr_layout:d,saveExprs:this.saveExprMap.bind(this),name:this.state.exp_path}))}}var V=j;a(159);class U extends n.Component{render(){return n.createElement("div",{id:"appWrapper"},n.createElement(V,{name:this.props.name,problem:this.props.problem,exp_path:this.props.exp_path,spacerUserOptions:this.props.spacerUserOptions,mode:this.props.mode,hideBracketsAssoc:this.props.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.props.nonStrictForNegatedStrictInequalities,orientClauses:this.props.orientClauses,varNames:this.props.varNames}))}}a(160);var z=a(46);class H extends n.Component{constructor(e){super(e),this.state={isFetching:!1,exps:[]}}componentDidMount(){var e=this;return Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchExps();case 2:case"end":return t.stop()}}),t)})))()}render(){return n.createElement("div",null,this.state.exps.map((e,t)=>n.createElement("h5",{key:e.name},n.createElement(s.b,{to:{pathname:"/replay/".concat(e.name)}},e.name)," $",e.done)),n.createElement("p",null,this.state.isFetching?"Fetching experiments...":""))}fetchExps(){var e=this;return Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isFetching:!0}),t.next=3,fetch("http://localhost:5000/spacer/fetch_exps",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:""});case 3:return a=t.sent,t.prev=4,t.next=7,a.json();case 7:n=t.sent,console.log(n),e.setState({isFetching:!1,exps:n.exps_list}),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(4),"SatVisAssertionError"!==t.t0.name){t.next=16;break}throw t.t0;case 16:e.setState({exps:[]});case 17:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}var q=[{name:"fp.spacer.arith.solver",type:"unsigned int"},{name:"fp.spacer.blast_term_ite_inflation",type:"unsigned int"},{name:"fp.spacer.ctp",type:"bool"},{name:"fp.spacer.dump_benchmarks",type:"bool"},{name:"fp.spacer.dump_threshold",type:"double"},{name:"fp.spacer.elim_aux",type:"bool"},{name:"fp.spacer.eq_prop",type:"bool"},{name:"fp.spacer.gpdr",type:"bool"},{name:"fp.spacer.gpdr.bfs",type:"bool"},{name:"fp.spacer.ground_pobs",type:"bool"},{name:"fp.spacer.iuc",type:"unsigned int"},{name:"fp.spacer.iuc.arith",type:"unsigned int"},{name:"fp.spacer.iuc.debug_proof",type:"bool"},{name:"fp.spacer.iuc.old_hyp_reducer",type:"bool"},{name:"fp.spacer.iuc.print_farkas_stats",type:"bool"},{name:"fp.spacer.iuc.split_farkas_literals",type:"bool"},{name:"fp.spacer.keep_proxy",type:"bool"},{name:"fp.spacer.logic",type:"symbol"},{name:"fp.spacer.max_level",type:"unsigned int"},{name:"fp.spacer.max_num_contexts",type:"unsigned int"},{name:"fp.spacer.mbqi",type:"bool"},{name:"fp.spacer.min_level",type:"unsigned int"},{name:"fp.spacer.native_mbp",type:"bool"},{name:"fp.spacer.order_children",type:"unsigned int"},{name:"fp.spacer.p3.share_invariants",type:"bool"},{name:"fp.spacer.p3.share_lemmas",type:"bool"},{name:"fp.spacer.print_json",type:"symbol"},{name:"fp.spacer.propagate",type:"bool"},{name:"fp.spacer.push_pob",type:"bool"},{name:"fp.spacer.push_pob_max_depth",type:"unsigned int"},{name:"fp.spacer.q3",type:"bool"},{name:"fp.spacer.q3.instantiate",type:"bool"},{name:"fp.spacer.q3.qgen.normalize",type:"bool"},{name:"fp.spacer.q3.use_qgen",type:"bool"},{name:"fp.spacer.random_seed",type:"unsigned int"},{name:"fp.spacer.reach_dnf",type:"bool"},{name:"fp.spacer.reset_pob_queue",type:"bool"},{name:"fp.spacer.restart_initial_threshold",type:"unsigned int"},{name:"fp.spacer.restarts",type:"bool"},{name:"fp.spacer.simplify_lemmas_post",type:"bool"},{name:"fp.spacer.simplify_lemmas_pre",type:"bool"},{name:"fp.spacer.simplify_pob",type:"bool"},{name:"fp.spacer.trace_file",type:"symbol"},{name:"fp.spacer.use_array_eq_generalizer",type:"bool"},{name:"fp.spacer.use_bg_invs",type:"bool"},{name:"fp.spacer.use_derivations",type:"bool"},{name:"fp.spacer.use_euf_gen",type:"bool"},{name:"fp.spacer.use_inc_clause",type:"bool"},{name:"fp.spacer.use_inductive_generalizer",type:"bool"},{name:"fp.spacer.use_lemma_as_cti",type:"bool"},{name:"fp.spacer.use_lim_num_gen",type:"bool"},{name:"fp.spacer.validate_lemmas",type:"bool"},{name:"tr",type:"bool"},{name:"fp.spacer.weak_abs",type:"bool"}],W=a(110),G=a.n(W);class J extends n.Component{constructor(...e){super(...e),this.state={optionTypeHTML:n.createElement("div",null),optionType:"",optionValue:"",optionName:"",allOptions:[],showOptions:!0}}updateSpacerOptions(){var e,t=this.state.allOptions,a="",n=Object(_.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;"flag"===r.type?a+="-"+r.name+" ":a+=r.name+"="+r.value+" "}}catch(s){n.e(s)}finally{n.f()}this.props.changeSpacerUserOptions(a)}storeSpacerOptions(e){if(e.preventDefault(),e.target.reset(),""!==this.state.optionName&&("custom"===this.state.optionType||""!==this.state.optionValue)){var t=this.state.allOptions;t.push({name:this.state.optionName,value:this.state.optionValue,type:""===this.state.optionValue?"flag":this.state.optionType}),this.setState({allOptions:t}),this.setState({optionName:"",optionValue:"",optionType:""}),this.updateSpacerOptions()}}displaySpacerOptions(){return""!==this.props.spacerUserOptions?this.props.spacerUserOptions.trim().split(" "):[]}updateOptionValue(e){this.setState({optionValue:e.target.value})}getOptions(e,t){"bool"===t?this.setState({optionTypeHTML:n.createElement(n.Fragment,null,n.createElement("input",{type:"radio",name:e,value:"true",onClick:this.updateOptionValue.bind(this)}),"True",n.createElement("input",{type:"radio",name:e,value:"false",onClick:this.updateOptionValue.bind(this)}),"False",n.createElement("button",{className:"fake-button",type:"submit",value:"Submit"},"+"))}):this.setState({optionTypeHTML:n.createElement(n.Fragment,null,n.createElement("input",{type:"text",name:e,placeholder:t,defaultValue:this.state.optionValue,onChange:this.updateOptionValue.bind(this)}),n.createElement("button",{className:"fake-button",type:"submit",value:"Submit"},"+"))})}changeOptionType(e){var t=q.filter(t=>t.name===e.target.value),a="custom";t.length>0&&(a=t[0].type),this.setState({optionName:e.target.value,optionType:a}),this.getOptions(e.target.value,a)}removeOption(e,t){var a=this.state.allOptions,n=-1;void 0===t&&(e=e.replace("-",""),t="");for(var r=0;r<a.length;r++)if(a[r].name===e&&a[r].value===t){n=r;break}-1!==n&&(a.splice(n,1),this.updateSpacerOptions())}changeSpacerManualUserOptions(e){var t=e.target.value;this.props.changeSpacerUserOptions(t)}showHideOptions(){this.setState({showOptions:!this.state.showOptions})}render(){var e=this.displaySpacerOptions();return n.createElement("aside",null,n.createElement("fieldset",{className:"options-card"},n.createElement("h3",null,"Z3 Options"),n.createElement("ul",null,n.createElement("li",null,n.createElement("label",{htmlFor:"userOptions",className:"form-label"},"Additional Spacer options"),n.createElement("button",{onClick:this.showHideOptions.bind(this),className:"showHideButton",title:"showHide"},n.createElement("img",{className:"eyeImage",src:G.a,alt:"eye"})),0!==e.length&&this.state.showOptions&&e.map((e,t)=>{if(""!==e){var a=e.split("="),r=a[0],s=a[1],o=s?r+": "+s:r;return n.createElement("div",{className:"displaySpacerOption",key:t},n.createElement("span",null,o),n.createElement("button",{className:"fake-button",type:"button",onClick:this.removeOption.bind(this,r,s)},"x"))}return""}),n.createElement("form",{className:"tfradio",name:"tfradio",onSubmit:this.storeSpacerOptions.bind(this)},n.createElement("input",{type:"text",className:"optionsList",list:"spacerOptions",name:"spacerOptions",onChange:this.changeOptionType.bind(this)}),n.createElement("datalist",{id:"spacerOptions"},q.map((e,t)=>n.createElement("option",{value:e.name,key:t}))),this.state.optionTypeHTML)),n.createElement("label",null,"Or using manual run parameters"),n.createElement("input",{type:"text",name:"manualRun",onChange:this.changeSpacerManualUserOptions.bind(this)}),n.createElement("li",null,n.createElement("label",{htmlFor:"varOptions",className:"form-label"},"Variable Designation"),n.createElement("p",null,"Enter a single space separated list of your chosen variables in the order they appear (var1 var2 var3 ..)"),n.createElement("input",{type:"text",name:"variables",onChange:this.props.onChangeVariables})))))}}var K=J,Z=a(41);class $ extends n.Component{constructor(...e){super(...e),this.isChromeOrFirefox=!0,this.fileUpload=n.createRef(),this.monacoDiv=n.createRef(),this.monaco=null}componentDidMount(){this.isChromeOrFirefox&&(this.monaco=z.a.create(this.monacoDiv.current,{lineNumbers:"off",roundedSelection:!1,scrollBeyondLastLine:!1,scrollBeyondLastColumn:0,minimap:{enabled:!1},renderLineHighlight:"none",hideCursorInOverviewRuler:!0,links:!1,overviewRulerBorder:!1,automaticLayout:!0,lineDecorationsWidth:0,lineNumbersMinChars:0,wordWrap:"wordWrapColumn"}),this.monaco.setValue(this.props.problem),this.monaco.getModel().onDidChangeContent(()=>{this.props.onChangeProblem(this.monaco.getModel().getValue())}))}componentDidUpdate(e){u(this.isChromeOrFirefox),this.props.problem!==e.problem&&this.monaco.setValue(this.props.problem)}render(){return this.isChromeOrFirefox?n.createElement("section",{className:"component-menu"},n.createElement("h1",null,"Spacer Visualization"),n.createElement("section",{className:"editor"},n.createElement("div",{className:"editor-spacer"},n.createElement("main",null,n.createElement("div",{className:"headline-wrapper"},n.createElement("h2",null,"Input"),n.createElement("small",{className:"file-name"},this.props.problemName),n.createElement("button",{title:"Pick a new file",onClick:this.chooseFile.bind(this)},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},n.createElement("use",{xlinkHref:"".concat(Z,"#graph-upload")})))),n.createElement("input",{ref:this.fileUpload,type:"file",onChange:this.uploadEncoding.bind(this)}),n.createElement("div",{ref:this.monacoDiv,className:"monaco"})),n.createElement("aside",null,n.createElement(K,{spacerUserOptions:this.props.spacerUserOptions,onChangeVariables:this.onChangeVariables.bind(this),changeSpacerUserOptions:this.props.onChangeSpacerUserOptions.bind(this)}),n.createElement(H,null)))),n.createElement("section",{className:"run-menu"},n.createElement(s.b,{to:"/iterative/",className:"fake-button"},"Hit and Run"))):n.createElement("section",{className:"unsupported-message"},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(Z,"#alert-triangle")})),n.createElement("span",null,"Your current browser is not supported. Please use Chrome or Firefox!"))}chooseFile(){this.fileUpload.current&&this.fileUpload.current.click()}onChangeVariables(e){this.props.onChangeVariables(e.target.value)}uploadEncoding(e){if(null!==e.target.files&&e.target.files.length>0){var t=e.target.files[0],a=new FileReader;a.onloadend=()=>{var e=a.result?a.result:"";this.props.onChangeProblem(e),this.props.onChangeProblemName(t.name)},a.readAsText(t)}}}a(231);var Q=a(3),X=a(114);class Y extends n.Component{constructor(e){super(e),this.totalTime=void 0,this.palette=void 0,this.totalTime=-1,this.palette=["#023FA5","#7D87B9","#BEC1D4","#D6BCC0","#BB7784","#8E063B","#4A6FE3","#8595E1","#B5BBE3","#E6AFB9","#E07B91","#D33F6A","#11C638","#8DD593","#C6DEC7","#EAD3C6","#F0B98D","#EF9708","#0FCFC0","#9CDED6","#D5EAE7","#F3E1EB","#F6C4E1","#F79CD4"]}componentDidMount(){this.createSunburst()}componentDidUpdate(e,t,a){this.createSunburst()}prepareData(){for(var e=[],t=Object.keys(this.props.data),a=0;a<t.length;a++)e.push({name:t[a],size:this.props.data[t[a]],children:[]});return e}getData(e){for(var t={},a="zzzzzzz",n=0;n<e.length;n++){var r=e[n].name,s=e[n].size;r.includes(a)?t[a].children.push({name:r,size:s,children:[]}):(t[r]={name:r,size:s,children:[]},a=r)}for(var o=Object.keys(t),i=0;i<o.length;i++)t[o[i]].children&&(t[o[i]].children=this.getData(t[o[i]].children));return Object.values(t)}createSunburst(){""===this.props.type&&Q.k(".sunburst-viz").remove(),""!==this.props.type&&Q.k("."+this.props.className+" .sunburst-viz").remove();var e=Q.i().domain(Object.keys(this.props.data)).range(this.palette),t=this.getData(this.prepareData()),a=Object(X.a)();a.data(t[0])(document.getElementById(this.props.className)).width(this.props.width).height(this.props.height).color(t=>e(t.name)).label(e=>e.name).size("size").tooltipTitle(e=>e.name),""!==this.props.type&&a.showLabels(!1)}render(){return this.totalTime=this.props.data.time,n.createElement("div",{className:this.props.className,id:this.props.className},""===this.props.type&&n.createElement("h2",null,"Total Time: ",this.totalTime),""!==this.props.type&&n.createElement("p",null,this.props.index))}}var ee=Y;function te(e){for(var t=e.split("_"),a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].substring(1);return t.join(" ")}class ae extends n.Component{componentDidMount(){console.log(this.props.data)}componentDidUpdate(e,t,a){console.log(this.props.data)}filterTimeData(){return Object.keys(this.props.data).filter((function(e){return e.includes("time")})).reduce((e,t)=>(e[t]=this.props.data[t],e),{})}render(){var e=this.filterTimeData();return n.createElement("div",{className:"overview"},n.createElement("div",{className:"details"},n.createElement("h1",null,this.props.data.index),["result","depth","memory","max_memory","SPACER_num_invariants","SPACER_num_lemmas","SPACER_num_propagations","SPACER_num_active_lemmas"].map((e,t)=>n.createElement("p",{className:"data-details",key:t},te(e),": ",this.props.data[e]))),n.createElement(ee,{data:e,height:600,width:600,className:"time",type:"",index:""}))}}var ne=ae;class re extends n.Component{componentDidMount(){this.createResultsOverview()}componentDidUpdate(e,t,a){this.createResultsOverview()}createResultsOverview(){Q.k(".results-overview svg").remove();var e=this.props.data,t=Q.d(e,(function(e){return e.result})).keys(),a=Q.i().domain(t).range(Q.j),n=Q.d(e,(function(e){return e.index})).keys(),r=Q.g().domain(n).range([this.props.config.margin.left,this.props.config.width-this.props.config.margin.right]),s=function(e){return r(function(e){return e.index}(e))},o=Q.a(r).tickValues([]),i=function(e){return e.SPACER_num_invariants},l=Q.h().domain([Q.f(e,i),Q.e(e,i)]).range([this.props.config.graphHeight-this.props.config.margin.top,this.props.config.margin.bottom]),c=function(e){return l(i(e))},p=Q.b(l),d=Q.k(".results-overview").append("svg").attr("width",this.props.config.width).attr("height",this.props.config.height);d.append("text").attr("x",this.props.config.width/2).attr("y",this.props.config.margin.top).attr("text-anchor","middle").style("font-size",this.props.config.font.title).style("text-decoration","underline").text("Index x Result x Num of Invariants"),d.append("g").attr("class","x-axis").attr("transform","translate(0,"+(this.props.config.graphHeight-this.props.config.margin.top)+")").call(o),d.append("g").attr("class","y-axis").attr("transform","translate("+this.props.config.margin.left+",0)").style("font-size",this.props.config.font.axis).call(p);var h=d.append("g");h.selectAll(".dot").data(e).enter().append("circle").attr("r",10).attr("cx",(function(e){return s(e)+r.bandwidth()/2})).attr("cy",c).on("mouseenter",(function(e){Q.k(".overview-tooltip").append("text").text(e.index)})).on("mouseout",(function(e){Q.k(".overview-tooltip").select("text").remove()})).on("click",this.props.selectBenchmark).style("fill",(function(e){return a(e.result)})),h.selectAll(".result-text").data(e).enter().append("text").attr("class","label").style("font-size",this.props.config.font.label).attr("x",(function(e){return s(e)+r.bandwidth()/4})).attr("y",(function(e){return c(e)-25})).attr("dy",".75em").text((function(e){return e.SPACER_num_invariants})),h.selectAll("legendDots").data(t).enter().append("circle").attr("cx",function(e,t){return this.props.config.margin.left+100*t}.bind(this)).attr("cy",this.props.config.graphHeight+15).attr("r",5).style("fill",(function(e){return a(e)})),h.selectAll("legendText").data(t).enter().append("text").attr("x",function(e,t){return this.props.config.margin.left+10+100*t}.bind(this)).attr("y",this.props.config.graphHeight+20).text((function(e){return e}))}render(){return n.createElement("div",{className:"results-overview"})}}var se=re,oe=a(60),ie=a.n(oe);class le extends n.Component{render(){return n.createElement("div",null,this.props.data.map((e,t)=>n.createElement(ee,{key:t,data:e,height:200,width:200,className:"timezoom"+t,type:"timezoom",index:e.index})))}}var ce=le;class pe extends n.Component{componentDidMount(){this.createGraph()}componentDidUpdate(e,t,a){this.createGraph()}createGraph(){if(Q.k("."+this.props.className+" svg").remove(),0!==this.props.data.length){var e=this.props.data,t=Q.d(e,(function(e){return e.index})).keys(),a=Q.g().domain(t).range([this.props.config.margin.left,this.props.config.width-this.props.config.margin.right]),n=function(e){return a(function(e){return e.index}(e))},r=Q.a(a).tickValues([]),s=function(e){return e[this.props.yValue]}.bind(this),o=Q.h().domain([Q.f(e,s),Q.e(e,s)]).range([this.props.config.graphHeight-this.props.config.margin.top,this.props.config.margin.bottom]),i=function(e){return o(s(e))},l=Q.b(o),c=Q.k("."+this.props.className).append("svg").attr("width",this.props.config.width).attr("height",this.props.config.height).on("click",this.props.updateZoomView);c.append("text").attr("x",this.props.config.width/2).attr("y",this.props.config.margin.top).attr("text-anchor","middle").style("font-size",this.props.config.font.title).style("text-decoration","underline").text("Index x "+te(this.props.yValue)),c.append("g").attr("class","x-axis").attr("transform","translate(0,"+(this.props.config.graphHeight-this.props.config.margin.top)+")").call(r),c.append("g").attr("class","y-axis").attr("transform","translate("+this.props.config.margin.left+",0)").style("font-size",this.props.config.font.axis).call(l);var p=c.append("g");p.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",n).attr("y",i).attr("width",a.bandwidth()-1).attr("height",function(e){return this.props.config.graphHeight-this.props.config.margin.top-o(e[this.props.yValue])}.bind(this)),p.selectAll("."+this.props.classText).data(e).enter().append("text").style("font-size",this.props.config.font.label).attr("class","label").attr("x",(function(e){return n(e)})).attr("y",(function(e){return i(e)-15})).attr("dy",".75em").text(function(e){return e[this.props.yValue]}.bind(this))}}render(){return n.createElement("div",{className:this.props.className})}}var de=pe;class he extends n.Component{constructor(e){super(e),this.overviewMetrics=void 0,this.overviewMetrics=["depth","memory","time","result"],this.state={data:[],selectedBenchmark:"",graphMin:0,graphMax:30,customMode:!1,customData:{depth:[],result:[],memory:[],time:[]},zoomMode:"",dashboardConfig:{height:450,width:1600,graphHeight:400,margin:{top:20,right:20,bottom:50,left:60},font:{title:"20px",axis:"20px",label:"14px"},barNum:10}}}componentDidMount(){this.loadData(),document.addEventListener("keydown",this.handleGraphTranslationKeyboard.bind(this))}loadData(){var e=this.props.rawData,t=Q.c(e,(function(e){return e.SPACER_cluster_out_of_gas=+e.SPACER_cluster_out_of_gas,e.SPACER_expand_pob_undef=+e.SPACER_expand_pob_undef,e.SPACER_inductive_level=+e.SPACER_inductive_level,e.SPACER_max_cluster_size=+e.SPACER_max_cluster_size,e.SPACER_max_cvx_reduced_dim=+e.SPACER_max_cvx_reduced_dim,e.depth=+e.depth,e.SPACER_max_query_lvl=+e.SPACER_max_query_lvl,e.SPACER_need_sage=+e.SPACER_need_sage,e.SPACER_num_abstractions=+e.SPACER_num_abstractions,e.SPACER_num_abstractions_failed=+e.SPACER_num_abstractions_failed,e.SPACER_num_abstractions_success=+e.SPACER_num_abstractions_success,e.SPACER_num_active_lemmas=+e.SPACER_num_active_lemmas,e.SPACER_num_cant_abstract=+e.SPACER_num_cant_abstract,e.SPACER_num_ctp_blocked=+e.SPACER_num_ctp_blocked,e.SPACER_num_dim_reduction_success=+e.SPACER_num_dim_reduction_success,e.SPACER_num_invariants=+e.SPACER_num_invariants,e.SPACER_num_is_invariant=+e.SPACER_num_is_invariant,e.SPACER_num_lemma_jumped=+e.SPACER_num_lemma_jumped,e.SPACER_num_lemmas=+e.SPACER_num_lemmas,e.SPACER_num_mbp_failed=+e.SPACER_num_mbp_failed,e.SPACER_num_merge_gen=+e.SPACER_num_merge_gen,e.SPACER_num_merge_gen_failed=+e.SPACER_num_merge_gen_failed,e.SPACER_num_merge_gen_success=+e.SPACER_num_merge_gen_success,e.SPACER_num_no_over_approximate=+e.SPACER_num_no_over_approximate,e.SPACER_num_non_lin=+e.SPACER_num_non_lin,e.SPACER_num_pobs=+e.SPACER_num_pobs,e.SPACER_num_propagations=+e.SPACER_num_propagations,e.SPACER_num_queries=+e.SPACER_num_queries,e.SPACER_num_reach_queries=+e.SPACER_num_reach_queries,e.SPACER_num_refinements=+e.SPACER_num_refinements,e.SPACER_num_reuse_reach_facts=+e.SPACER_num_reuse_reach_facts,e.SPACER_num_sync_cvx_cls=+e.SPACER_num_sync_cvx_cls,e.SPACER_num_under_approximations=+e.SPACER_num_under_approximations,e.SPACER_pob_out_of_gas=+e.SPACER_pob_out_of_gas,e.SPACER_wide_attmpts=+e.SPACER_wide_attmpts,e.SPACER_wide_success=+e.SPACER_wide_success,e.max_memory=+e.max_memory,e.memory=+e.memory,e.time=+e.time,e.time_iuc_solver_get_iuc=+e.time_iuc_solver_get_iuc,e.time_iuc_solver_get_iuc_hyp_reduce1=+e.time_iuc_solver_get_iuc_hyp_reduce1,e.time_iuc_solver_get_iuc_hyp_reduce2=+e.time_iuc_solver_get_iuc_hyp_reduce2,e.time_iuc_solver_get_iuc_learn_core=+e.time_iuc_solver_get_iuc_learn_core,e.time_pool_solver_proof=+e.time_pool_solver_proof,e.time_pool_solver_smt_total=+e.time_pool_solver_smt_total,e.time_pool_solver_smt_total_sat=+e.time_pool_solver_smt_total_sat,e.time_pool_solver_smt_total_undef=+e.time_pool_solver_smt_total_undef,e.time_spacer_ctp=+e.time_spacer_ctp,e.time_spacer_init_rules=+e.time_spacer_init_rules,e.time_spacer_init_rules_pt_init=+e.time_spacer_init_rules_pt_init,e.time_spacer_mbp=+e.time_spacer_mbp,e.time_spacer_solve=+e.time_spacer_solve,e.time_spacer_solve_propagate=+e.time_spacer_solve_propagate,e.time_spacer_solve_pt_must_reachable=+e.time_spacer_solve_pt_must_reachable,e.time_spacer_solve_reach=+e.time_spacer_solve_reach,e.time_spacer_solve_reach_children=+e.time_spacer_solve_reach_children,e.time_spacer_solve_reach_cluster=+e.time_spacer_solve_reach_cluster,e.time_spacer_solve_reach_gen_bool_ind=+e.time_spacer_solve_reach_gen_bool_ind,e.time_spacer_solve_reach_gen_merge=+e.time_spacer_solve_reach_gen_merge,e.time_spacer_solve_reach_gen_merge_cvx_cls=+e.time_spacer_solve_reach_gen_merge_cvx_cls,e.time_spacer_solve_reach_gen_wide=+e.time_spacer_solve_reach_gen_wide,e.time_spacer_solve_reach_is_reach=+e.time_spacer_solve_reach_is_reach,e}));this.setState({data:t})}handleSidebarClick(e){var t=e.target;this.setState({selectedBenchmark:t.innerText})}handleSidebarClickDot(e){this.setState({selectedBenchmark:e.index})}handleHomeClick(){this.setState({selectedBenchmark:"",customMode:!1,customData:{depth:[],time:[],memory:[],result:[]},zoomMode:"",graphMin:0,graphMax:30})}handleClearClick(){this.setState({customData:{depth:[],time:[],memory:[],result:[]}})}moveGraphLeft(){this.state.graphMin>0&&this.setState({graphMin:this.state.graphMin-1,graphMax:this.state.graphMax-1})}moveGraphRight(){this.state.graphMax<this.state.data.length-1&&this.setState({graphMin:this.state.graphMin+1,graphMax:this.state.graphMax+1})}moveGraphUp(){this.state.graphMin-10>=0&&this.setState({graphMin:this.state.graphMin-10,graphMax:this.state.graphMax-10})}moveGraphDown(){this.state.graphMax+10<this.state.data.length&&this.setState({graphMin:this.state.graphMin+10,graphMax:this.state.graphMax+10})}handleGraphTranslationClick(e){e.preventDefault();var t=e.target;"left-arrow"===t.alt?this.moveGraphLeft():"right-arrow"===t.alt&&this.moveGraphRight()}handleGraphTranslationKeyboard(e){e.preventDefault(),"ArrowLeft"===e.key?this.moveGraphLeft():"ArrowRight"===e.key?this.moveGraphRight():"ArrowDown"===e.key?this.moveGraphDown():"ArrowUp"===e.key&&this.moveGraphUp()}handleCustomClick(){this.setState({customMode:!this.state.customMode}),this.state.customMode&&this.setState({customData:{depth:[],time:[],memory:[],result:[]}})}filterDictionary(e,t=!1,a=""){var n=this.state.data.slice(this.state.graphMin,this.state.graphMax);t&&(n=this.state.data.filter((function(e){return e.index===a})));for(var r=[],s=0;s<n.length;s++){r.push({});for(var o=0;o<e.length;o++)r[s][e[o]]=n[s][e[o]]}return r}addToCustomData(e){for(var t=e.target,a=0;a<this.overviewMetrics.length;a++){var n=this.overviewMetrics[a],r=[n].concat(["index"]);"result"===n&&r.push("SPACER_num_invariants");var s=this.state.customData[n].concat(this.filterDictionary(r,!0,t.innerHTML));s.length>this.state.graphMax-this.state.graphMin&&s.splice(0,1);var o=this.state.customData;o[n]=s,this.setState({customData:o})}}setZoomView(e){this.setState({zoomMode:e,graphMin:0,graphMax:49})}render(){var e,t=Q.d(this.state.data,(function(e){return e.index})).keys(),a=this.state.selectedBenchmark;if("time"===this.state.zoomMode){var r=Object.keys(this.state.data[0]).filter(e=>e.includes("time"));r.push("index"),e=this.filterDictionary(r)}return n.createElement("div",{className:"page"},n.createElement("div",{className:"sidebar",id:"sidebar"},t.map((e,t)=>this.state.customMode?this.state.customData.depth.filter(t=>t.index===e).length>0?n.createElement("li",{className:"selected",key:t,onClick:this.addToCustomData.bind(this)},e):n.createElement("li",{key:t,onClick:this.addToCustomData.bind(this)},e):a?e===a?n.createElement("li",{className:"selected",key:t,onClick:this.handleSidebarClick.bind(this)},e):n.createElement("li",{key:t,onClick:this.handleSidebarClick.bind(this)},e):t>=this.state.graphMin&&t<this.state.graphMax?n.createElement("li",{className:"selected",key:t,onClick:this.handleSidebarClick.bind(this)},e):n.createElement("li",{key:t,onClick:this.handleSidebarClick.bind(this)},e))),n.createElement("div",{className:"visual"},""!==this.state.selectedBenchmark&&n.createElement(ne,{data:this.state.data.filter((function(e){return e.index===a}))[0]}),""===this.state.selectedBenchmark&&""===this.state.zoomMode&&n.createElement("div",{className:"dashboard"},this.overviewMetrics.map((e,t)=>{var a;if(this.state.customMode){if(a=this.state.customData[e],"result"===e)return n.createElement(se,{key:t,data:a,config:this.state.dashboardConfig,selectBenchmark:this.handleSidebarClickDot.bind(this)})}else{if("result"===e)return a=this.filterDictionary([e].concat(["index","SPACER_num_invariants"])),n.createElement(se,{key:t,data:a,config:this.state.dashboardConfig,selectBenchmark:this.handleSidebarClickDot.bind(this)});a=this.filterDictionary(["index"].concat([e]))}return n.createElement(de,{key:t,data:a,config:this.state.dashboardConfig,className:e+"-overview",classText:e+"-text",yValue:e,updateZoomView:this.setZoomView.bind(this,"time"===e?"time":"")})}),n.createElement("img",{className:"left-arrow",src:ie.a,alt:"left-arrow",onClick:this.handleGraphTranslationClick.bind(this)}),n.createElement("img",{className:"right-arrow",src:ie.a,alt:"right-arrow",onClick:this.handleGraphTranslationClick.bind(this)})),"time"===this.state.zoomMode&&n.createElement(ce,{data:e})),n.createElement("button",{className:"home-button",onClick:this.handleHomeClick.bind(this)},"Home"),n.createElement("button",{className:"custom-button",onClick:this.handleCustomClick.bind(this)},"Custom"),this.state.customMode&&n.createElement("button",{className:"clear-button",onClick:this.handleClearClick.bind(this)},"Clear"))}}var me=he;class ue extends n.Component{constructor(e){super(e),this.fileReader=void 0,this.state={rawData:[],file:null}}handleFileRead(e){var t=this.fileReader.result.toString(),a={name:e.name,id:Date.now().toString(),content:t};this.props.updateData(a)}handleFileChosen(e){e.preventDefault();var t=this.state.file;this.fileReader=new FileReader,this.fileReader.onloadend=this.handleFileRead.bind(this,t),this.fileReader.readAsText(t)}updateFile(e){this.setState({file:e.target.files[0]})}render(){return n.createElement("div",{className:"dashboard-menu"},n.createElement("h1",null,"Spacer Dashboard"),n.createElement("form",null,n.createElement("input",{type:"file",accept:".csv",onChange:this.updateFile.bind(this)}),n.createElement("button",{type:"submit",className:"fake-button",onClick:this.handleFileChosen.bind(this)},"Upload")),n.createElement("div",{className:"file-list"},n.createElement("h2",null,"Uploaded Files"),this.props.rawData.length>0&&this.props.rawData.map((e,t)=>n.createElement("li",{key:t},n.createElement("span",null,e.name),n.createElement("a",{href:"#/dashboard/"+e.id},"Analysis")))))}}var _e=ue,fe=(a(232),a(47)),ge=a(24);class be extends n.Component{constructor(...e){super(...e),this.state={source:"",target:"",regex:!1}}render(){return console.log(this.props,this.state),n.createElement("div",null,"Replace: ",n.createElement("input",{type:"text",defaultValue:"",onChange:e=>{this.setState({source:e.target.value})}})," with: ",n.createElement("input",{type:"text",defaultValue:"",onChange:e=>{this.setState({target:e.target.value})}}),"\tRegex?",n.createElement("input",{type:"checkbox",defaultChecked:!1,onChange:e=>{this.setState({regex:e.target.checked})}}),n.createElement("button",{onClick:this.props.onApply.bind(this,"replace",{source:this.state.source,target:this.state.target,regex:this.state.regex})},"Replace"))}}var ve=be;class ye extends n.Component{constructor(...e){super(...e),this.state={optionTypeHTML:n.createElement("div",null),optionType:"",optionValue:"",optionName:"",allOptions:[],showOptions:!0,selectedNodeID:-1,stringRep:"",status:""},this.network=null,this.networkNodes=new h.DataSet([]),this.networkEdges=new h.DataSet([]),this.graphContainer=n.createRef(),this.astStack=new Array,this.transformerStack=new Array,this.transformer=new ge.b}componentDidMount(){this.generateNetwork(),this.network.fit()}redrawAST(){if(null!=this.astStack[this.astStack.length-1]){var e=this.astStack[this.astStack.length-1];console.log(e),console.log("visNodes",e.visNodes),console.log("visEdges",e.visEdges),this.networkEdges.clear(),this.networkEdges.add(e.visEdges),this.networkNodes.clear(),this.networkNodes.add(e.visNodes),this.network.redraw(),console.log(e.toHTML(this.state.selectedNodeID,e.nodeList[0])),this.setState({stringRep:e.toHTML(this.state.selectedNodeID,e.nodeList[0])})}}componentDidUpdate(e){e.input!==this.props.input&&(this.astStack=[new ge.a(this.props.input)],this.transformerStack=[],this.redrawAST())}generateNetwork(){var e=this;console.log("I am Graph. I receive:",this.props),u(this.graphContainer.current),u(!this.network),this.network=new h.Network(this.graphContainer.current,{nodes:this.networkNodes,edges:this.networkEdges},{physics:!1,interaction:{multiselect:!1},layout:{hierarchical:{sortMethod:"directed"}}}),this.network.on("click",function(){var t=Object(c.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.nodes.length>0&&(u(1===a.nodes.length),n=a.nodes[0],console.log("clickEvent.nodes",a.nodes),e.setState({selectedNodeID:n}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}updateConditionInputEvent(e,t){this.transformerStack[t].condition=e.target.value}updateParamsInputEvent(e,t){this.transformerStack[t].params=JSON.parse(e.target.value)}displayTransformers(){return this.transformerStack.map((e,t)=>n.createElement("div",{key:t,className:"transformer-wrapper"},"If ",n.createElement("input",{style:{display:"inline-block",width:"20rem"},ref:"condition-${index}",type:"text",defaultValue:e.condition,onChange:e=>this.updateConditionInputEvent(e,t)}),n.createElement("br",null),"then run __".concat(e.action,"__ with params:"),n.createElement("br",null),n.createElement("input",{ref:"params-${index}",type:"text",defaultValue:JSON.stringify(e.params),style:{width:"100%"},onChange:e=>this.updateParamsInputEvent(e,t)})))}applyStack(){var e=new ge.a(this.props.input);try{this.astStack.push(this.transformer.runStack(e,this.transformerStack)),this.transformerStack.push({action:"runStack",params:"",condition:""}),this.redrawAST()}catch(t){this.setState({status:"Error:"+t.message})}}applyLocal(e,t){var a=this.astStack[this.astStack.length-1],n=a.nodeList[this.state.selectedNodeID];console.log(t);var r={action:e,params:t,condition:"true"};try{var s=this.transformer.run(n,a,r),o=Object(fe.a)(s,2),i=o[0],l=o[1];i&&(this.astStack.push(l),r.condition=this.transformer.getCondition(e,n,a),this.transformerStack.push(r),this.redrawAST())}catch(c){this.setState({status:"Error:"+c.message})}}undo(){this.astStack.length>1&&(this.astStack.pop(),this.transformerStack.pop(),this.redrawAST())}render(){var e=this.displayTransformers();return n.createElement("div",{className:"tree-editor"},n.createElement("div",{className:"editor-options-card",id:"graph-container"},n.createElement("h3",null,"Transformer Queue"),n.createElement("h4",null,this.state.status),n.createElement("ul",null,n.createElement("button",{onClick:this.applyLocal.bind(this,"flipCmp",{})},"Flip Cmp"),n.createElement("button",{onClick:this.applyLocal.bind(this,"toImp",{})},"To Imp"),n.createElement("button",{onClick:this.applyLocal.bind(this,"move",{direction:"l"})},"Move Left"),n.createElement("button",{onClick:this.applyLocal.bind(this,"move",{direction:"r"})},"Move Right"),n.createElement("button",{onClick:this.applyLocal.bind(this,"changeBreak",{})},"\\n?"),n.createElement("button",{onClick:this.applyLocal.bind(this,"changeBracket",{})},"()?"),n.createElement("button",{onClick:this.applyLocal.bind(this,"squashNegation",{})},"Collapse Negation"),n.createElement("br",null),n.createElement(ve,{onApply:this.applyLocal.bind(this)}),n.createElement("br",null),n.createElement("button",{onClick:this.undo.bind(this)},"Undo")),n.createElement("pre",null,n.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.stringRep}})),n.createElement("div",{className:"editor-component-graph",ref:this.graphContainer},n.createElement("canvas",null))),n.createElement("div",{className:"editor-options-card",id:"transformer-container"},n.createElement("h3",null,"Transformer Queue"),n.createElement("pre",null,'\nCondition examples:\n    - apply the transformation for all the node whose token pass the regex test "ab+c"\n    /ab+c/.test(node.token)\n    - // apply the transformation for all the node whose token is either x, y, or z\n    ["x_", "y_", "z_"].includes(node.token)\n    - // apply the transformation for all the node at depth 2\n    ast.nodeDepth(node) === 2\n                        '),e,n.createElement("button",{onClick:this.applyStack.bind(this)},"Apply for the current AST"),n.createElement("button",{onClick:this.props.onBlast.bind(this,this.transformerStack)},"Blast")))}}var Ee=ye,ke=a(41);class Se extends n.Component{constructor(...e){super(...e),this.isChromeOrFirefox=!0,this.fileUpload=n.createRef(),this.monacoDiv=n.createRef(),this.monaco=null,this.state={input:"()",output:""}}componentDidMount(){this.isChromeOrFirefox&&(this.monaco=z.a.create(this.monacoDiv.current,{lineNumbers:"off",roundedSelection:!1,scrollBeyondLastLine:!1,scrollBeyondLastColumn:0,minimap:{enabled:!1},renderLineHighlight:"none",hideCursorInOverviewRuler:!0,links:!1,overviewRulerBorder:!1,automaticLayout:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,wordWrap:"wordWrapColumn"}))}openEditor(){console.log("click Apply");var e=this.monaco.getModel().getValueInRange(this.monaco.getSelection());console.log(e),this.setState({input:e})}getFormulas(e){return e.split(/\n\s*\n/)}blast(e){var t,a=this.getFormulas((null===(t=this.monaco)||void 0===t?void 0:t.getModel()).getValue()),n=new ge.b;console.log(a),console.log(e),console.log("pew pew !");var r,s="",o=Object(_.a)(a);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=new ge.a(i),c=n.runStack(l,e);s+=c.toString(-1,c.nodeList[0])+"\n\n"}}catch(p){o.e(p)}finally{o.f()}this.setState({output:s})}render(){return this.isChromeOrFirefox?n.createElement("section",{className:"component-menu"},n.createElement("h1",null,"Transformer Editor"),n.createElement("section",{className:"editor"},n.createElement("div",{id:"editor-wrapper"},n.createElement("h2",null,"Original"),n.createElement("div",{ref:this.monacoDiv,className:"monaco",id:"input"}),n.createElement("button",{onClick:this.openEditor.bind(this)},"Open Editor"),n.createElement("h2",null,"Transformed"),n.createElement("textarea",{ref:"output",id:"output",rows:30,value:this.state.output,readOnly:!0})),n.createElement(Ee,{input:this.state.input,onBlast:this.blast.bind(this)}))):n.createElement("section",{className:"unsupported-message"},n.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},n.createElement("use",{xlinkHref:"".concat(ke,"#alert-triangle")})),n.createElement("span",null,"Your current browser is not supported. Please use Chrome or Firefox!"))}chooseFile(){this.fileUpload.current&&this.fileUpload.current.click()}}class xe extends n.Component{constructor(...e){super(...e),this.state={problem:"",problemName:"",spacerUserOptions:"",hideBracketsAssoc:!0,nonStrictForNegatedStrictInequalities:!0,orientClauses:!0,varNames:"",rawData:[]}}render(){return n.createElement(s.a,null,n.createElement(o.a,{path:"/",exact:!0,render:()=>n.createElement($,{problem:this.state.problem,problemName:this.state.problemName,spacerUserOptions:this.state.spacerUserOptions,hideBracketsAssoc:this.state.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.state.nonStrictForNegatedStrictInequalities,orientClauses:this.state.orientClauses,onChangeProblem:this.changeProblem.bind(this),onChangeProblemName:this.changeProblemName.bind(this),onChangeSpacerUserOptions:this.changeSpacerUserOptions.bind(this),onChangeHideBracketsAssoc:this.changeHideBracketsAssoc.bind(this),onChangeNonStrictForNegatedStrictInequalities:this.changeNonStrictForNegatedStrictInequalities.bind(this),onChangeOrientClauses:this.changeOrientClauses.bind(this),onChangeVariables:this.changeVariables.bind(this)})}),n.createElement(o.a,{path:"/replay/:exp_id",render:({match:e})=>this.appComponent("replay",e.params.exp_id)}),n.createElement(o.a,{path:"/iterative/",render:()=>this.appComponent("iterative","")}),n.createElement(o.a,{exact:!0,path:"/dashboard/",render:()=>n.createElement(_e,{rawData:this.state.rawData,updateData:this.changeRawData.bind(this)})}),n.createElement(o.a,{path:"/dashboard/:fileId",render:({match:e})=>this.displayVisualization(e.params.fileId)}),n.createElement(o.a,{exact:!0,path:"/editor/",render:()=>n.createElement(Se,{input:""})}))}appComponent(e,t){var a="".concat(this.state.spacerUserOptions);return n.createElement(U,{name:this.state.problemName,exp_path:t,mode:e,problem:this.state.problem,spacerUserOptions:a,hideBracketsAssoc:this.state.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.state.nonStrictForNegatedStrictInequalities,orientClauses:this.state.orientClauses,varNames:this.state.varNames})}displayVisualization(e){var t=this.state.rawData.filter(t=>t.id===e)[0];if(t)return n.createElement(me,{rawData:t.content})}changeProblem(e){this.setState({problem:e})}changeProblemName(e){this.setState({problemName:e})}changeSpacerUserOptions(e){this.setState({spacerUserOptions:e})}changeHideBracketsAssoc(e){this.setState({hideBracketsAssoc:e})}changeNonStrictForNegatedStrictInequalities(e){this.setState({nonStrictForNegatedStrictInequalities:e})}changeOrientClauses(e){this.setState({orientClauses:e})}changeVariables(e){this.setState({varNames:e})}changeRawData(e){var t=this.state.rawData.concat([e]);this.setState({rawData:t})}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.render(n.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},24:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return ASTTransformer})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AST}));var _home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47),_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(61),_s_exify__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(62),_=__webpack_require__(233);class ASTNode{constructor(e,t,a,n){this.nodeID=void 0,this.token=void 0,this.shouldBreak=void 0,this.shouldInBracket=void 0,this.parentID=void 0,this.children=void 0,this.transformers=[],this.startLine=void 0,this.endLine=void 0,this.startOffset=void 0,this.endOffset=void 0,this.nodeID=e,this.token=t,this.shouldBreak=0,this.shouldInBracket=1,this.parentID=a,this.children=n,this.startLine=-1,this.endLine=-1,this.startOffset=-1,this.endOffset=-1}updateRange(e){this.startLine=e.startLine,this.startOffset=e.startOffset,this.endLine=e.endLine,this.endOffset=e.endOffset}}function isOpt(e){return!Array.isArray(e)&&["+","-","*","/",">","<",">=","<=","=","and","or","not","=>","assert","declare-datatypes","forall","exists","define","select","store"].indexOf(e.token)>-1}class ASTTransformer extends Object{run(e,t,a){return"runStack"!==a.action?this[a.action](e,t,a.params,a.condition):[!1,t]}runStack(e,t){for(var a=_.cloneDeep(e),n=0;n<t.length;){var r,s=!0,o=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(a.nodeList);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=this.run(i,a,t[n]),c=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(l,2);if(s=c[0],a=c[1],s)break}}catch(p){o.e(p)}finally{o.f()}s||n++}return a}getCondition(e,t,a){var n="true";switch(e){case"move":var r=t.token;n="node.token === ".concat(r);break;case"changeBreak":var s=t.shouldBreak,o=a.nodeDepth(t);n="ast.nodeDepth(node) === ".concat(o," && node.shouldBreak === ").concat(s);break;case"changeBracket":var i=t.shouldInBracket,l=a.nodeDepth(t);n="ast.nodeDepth(node) === ".concat(l," && node.shouldInBracket === ").concat(i);break;case"squashNegation":case"replace":n="true";break;default:var c=t.token,p=a.nodeDepth(t);n='node.token === "'.concat(c,'" && ast.nodeDepth(node) === ').concat(p)}return n}squashNegation(node,ast,params,condition){var cloned_ast=_.cloneDeep(ast),cloned_node=cloned_ast.nodeList[node.nodeID],dirty=!1;if("not"!==node.token)return[!1,cloned_ast];if(eval(condition)){var cloned_child=cloned_ast.nodeList[cloned_node.children[0]];switch(cloned_child.token){case"not":var grandchild=cloned_ast.nodeList[cloned_child.children[0]];grandchild.parentID=cloned_node.parentID;var current_parent=cloned_ast.nodeList[cloned_node.parentID],current_child_index=current_parent.children.indexOf(cloned_node.nodeID);current_parent.children[current_child_index]=grandchild.nodeID,cloned_ast.deleteNode(cloned_node),cloned_ast.deleteNode(cloned_child),cloned_ast.buildVis(),dirty=!0;break;case"<":cloned_child.token=">=",cloned_child.parentID=cloned_node.parentID;var _current_parent=cloned_ast.nodeList[cloned_node.parentID],_current_child_index=_current_parent.children.indexOf(cloned_node.nodeID);_current_parent.children[_current_child_index]=cloned_child.nodeID,cloned_ast.deleteNode(cloned_node),cloned_ast.buildVis(),dirty=!0;break;case">":cloned_child.token="<=",cloned_child.parentID=cloned_node.parentID;var _current_parent2=cloned_ast.nodeList[cloned_node.parentID],_current_child_index2=_current_parent2.children.indexOf(cloned_node.nodeID);_current_parent2.children[_current_child_index2]=cloned_child.nodeID,cloned_ast.deleteNode(cloned_node),cloned_ast.buildVis(),dirty=!0}}return[dirty,cloned_ast]}move(node,ast,params,condition){var movable=["+","*","=","and","or"],cloned_ast=_.cloneDeep(ast),dirty=!1;if(eval(condition)){var parent=cloned_ast.nodeList[node.parentID];Object(_util__WEBPACK_IMPORTED_MODULE_2__.a)("direction"in params),Object(_util__WEBPACK_IMPORTED_MODULE_2__.a)(-1!==movable.indexOf(parent.token),"The parent node doesnt support reordering.");var siblings=parent.children,nodePosition=siblings.indexOf(node.nodeID);switch(params.direction){case"l":if(nodePosition>0){var _ref=[siblings[nodePosition-1],siblings[nodePosition]];siblings[nodePosition]=_ref[0],siblings[nodePosition-1]=_ref[1],dirty=!0}break;case"r":if(nodePosition<siblings.length-1){var _ref2=[siblings[nodePosition+1],siblings[nodePosition]];siblings[nodePosition]=_ref2[0],siblings[nodePosition+1]=_ref2[1],dirty=!0}}cloned_ast.buildVis()}return[dirty,cloned_ast]}flipCmp(node,ast,params,condition){var cloned_ast=_.cloneDeep(ast),dirty=!1;if(eval(condition)){var new_node;switch(node.token){case"=":new_node=new ASTNode(node.nodeID,"=",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case"<":new_node=new ASTNode(node.nodeID,">=",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case">":new_node=new ASTNode(node.nodeID,"<=",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case">=":new_node=new ASTNode(node.nodeID,"<",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;case"<=":new_node=new ASTNode(node.nodeID,">",node.parentID,[node.children[1],node.children[0]]),dirty=!0;break;default:new_node=node}cloned_ast.nodeList[node.nodeID]=new_node,cloned_ast.buildVis()}return[dirty,cloned_ast]}toImp(node,ast,params,condition){var cloned_ast=_.cloneDeep(ast),cloned_node=cloned_ast.nodeList[node.nodeID],dirty=!1;if(eval(condition)){var parent=cloned_ast.nodeList[cloned_node.parentID];if(!parent||"or"!==parent.token)return[!1,cloned_ast];var newHead=new ASTNode(cloned_ast.nodeList.length,"not",parent.nodeID,[cloned_node.nodeID]);cloned_node.parentID=newHead.nodeID,cloned_ast.nodeList.push(newHead);var newTail=new ASTNode(cloned_ast.nodeList.length,"or",parent.nodeID,[]);cloned_ast.nodeList.push(newTail);var _iterator2=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(parent.children),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var childID=_step2.value;childID!==cloned_node.nodeID&&(cloned_ast.nodeList[childID].parentID=newTail.nodeID,newTail.children.push(childID))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var newParent=new ASTNode(parent.nodeID,"=>",parent.parentID,[newHead.nodeID,newTail.nodeID]);cloned_ast.nodeList[parent.nodeID]=newParent,cloned_ast.buildVis(),dirty=!0}return[dirty,cloned_ast]}replace(node,ast,params,condition){var cloned_ast=_.cloneDeep(ast),dirty=!1,source=params.source;if(eval(condition)){params.regex&&(source=new RegExp(params.source));var _iterator3=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(cloned_ast.nodeList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var cloned_node=_step3.value,old_token=cloned_node.token;cloned_node.token=old_token.replace(source,params.target),cloned_node.token!==old_token&&(dirty=!0)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}dirty&&cloned_ast.buildVis()}return[dirty,cloned_ast]}changeBreak(node,ast,params,condition){var cloned_ast=_.cloneDeep(ast);return eval(condition)?(cloned_ast.nodeList[node.nodeID].shouldBreak^=1,cloned_ast.buildVis(),[!0,cloned_ast]):[!1,cloned_ast]}changeBracket(node,ast,params,condition){var cloned_ast=_.cloneDeep(ast);return eval(condition)?(cloned_ast.nodeList[node.nodeID].shouldInBracket^=1,cloned_ast.buildVis(),[!0,cloned_ast]):[!1,cloned_ast]}}class AST{constructor(e){this.nodeList=new Array,this.visNodes=new Array,this.visEdges=new Array,this.null_node=new ASTNode(-100,"null-node",-100,[]),this.lstToAST(-1,Object(_s_exify__WEBPACK_IMPORTED_MODULE_3__.b)(e)),this.buildVis()}nodeDepth(e){return-1===e.parentID?0:this.nodeDepth(this.nodeList[e.parentID])+1}deleteNode(e){this.nodeList[e.nodeID]=this.null_node}findNode(e,t){var a,n=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(this.nodeList);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.startLine<=e&&r.endLine>=e&&r.startOffset<=t&&r.endOffset>=t)return r}}catch(s){n.e(s)}finally{n.f()}return null}lstToAST(e,t){var a=this.nodeList.length;if(Object(_s_exify__WEBPACK_IMPORTED_MODULE_3__.a)(t)){var n=new ASTNode(a,t.token,e,[]);return n.updateRange(t),this.nodeList.push(n),a}if(isOpt(t[0])){var r=new ASTNode(a,t[0].token,e,[]);r.updateRange(t[0]),this.nodeList.push(r);for(var s=1;s<t.length;s++)r.children.push(this.lstToAST(a,t[s]));return a}var o=new ASTNode(a,t[0].token,e,[]);o.updateRange(t[0]),this.nodeList.push(o);for(s=0;s<t.length;s++)o.children.push(this.lstToAST(a,t[s]));return a}buildVis(){this.visNodes=[],this.visEdges=[];var e,t=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(this.nodeList);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-100!==a.nodeID){var n=a.token;a.shouldInBracket&&(n="("+n+")"),this.visNodes.push({id:a.nodeID,label:n+(a.shouldBreak?"\u21b5":""),shape:"box",size:20});var r,s=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(a.children);try{for(s.s();!(r=s.n()).done;){var o=r.value;this.visEdges.push({id:this.visEdges.length,from:a.nodeID,to:o})}}catch(i){s.e(i)}finally{s.f()}}}}catch(i){t.e(i)}finally{t.f()}}toString(e,t){return this.toHTML(e,t)}toHTML(e,t,a=!0){var n;if(0===t.children.length)n=t.token;else{var r=new Array;"list"!==t.token&&r.push(t.token);var s,o=Object(_home_travis_build_nhamlv_55_spacer_visualization_visualization_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(t.children);try{for(o.s();!(s=o.n()).done;){var i=s.value;r.push(this.toHTML(e,this.nodeList[i]))}}catch(l){o.e(l)}finally{o.f()}n=1!==r.length&&t.shouldInBracket?"("+r.join(" ")+")":r.join(" ")}return a&&e===t.nodeID&&(n='<span class="highlighted">'+n+"</span>"),t.shouldBreak&&(n="\n"+"    ".repeat(this.nodeDepth(t))+n),n}}},41:function(e,t,a){e.exports=a.p+"static/media/all.cd5d2510.svg"},60:function(e,t,a){e.exports=a.p+"static/media/angle-arrow-down.412f3289.svg"},61:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));class n extends Error{constructor(e){super(e),this.name="SatVisAssertionError"}}function r(e,t=""){if(!e)throw new n("Assertion failed: "+(t||""))}},62:function(e,t,a){"use strict";function n(e){console.log("**"+e+"//");var t=0,a=0,n=0,r=()=>{for(;e[t].match(/\r\n|\r|\n/);)a++,t++;for(;e[t].match(/\s/);)t++,n++;if("("!==e[t])throw new Error("Input is not valid: unexpected '".concat(e[t],"' at the beginning"));t++;for(var s=[],o="",i=a,l=n;;){n++;var c=e[t++];if(!c){if(o)throw new Error("Input is not valid: unexpected '".concat(o,"' at the end"));break}if(")"===c){o&&s.push({token:o,startLine:i,startOffset:l,endLine:a,endOffset:n});break}if("\\"===c)o+=c+=e[t++];else if(c.match(/\r\n|\r|\n/))o&&(s.push({token:o,startLine:i,startOffset:l,endLine:a,endOffset:n}),o=""),a++,n=0;else if(c.match(/\s/))o&&s.push({token:o,startLine:i,startOffset:l,endLine:a,endOffset:n}),o="",i=a,l=n;else if("("===c)t--,n--,s.push(r());else if('"'===c)for(o+=c;(c=e[t++])&&("\\"===c&&'"'===e[t]&&(c+=e[t++]),o+=c,'"'!==c););else o+=c}return s};return r()}function r(e){return"startOffset"in e}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}))},99:function(e,t,a){}},[[136,2,3]]]);
//# sourceMappingURL=main.5b9f96ad.chunk.js.map
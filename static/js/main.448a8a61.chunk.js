(this["webpackJsonpvisualization-frontend"]=this["webpackJsonpvisualization-frontend"]||[]).push([[1],{104:function(e,t,a){e.exports=a.p+"static/media/eye.bf3c357b.svg"},132:function(e,t,a){e.exports=a(228)},137:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e){e.exports=JSON.parse('{"hidden":{"hidden":true,"markedStyle":{"border":"#ffffff00","background":"#ffffff00"},"highlightStyle":{"border":"#ffffff00","background":"#ffffff00"},"shape":"box","text":"#ffffff00","defaultStyle":{"border":"#ffffff00","background":"#ffffff00"}},"preprocessing-deleted":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#8cd1c9","background":"#abe0d1"}},"preprocessing":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#8cd1c9","background":"#abe0d1"}},"conjecture":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#009988","background":"#44bb99"}},"theory-axiom-deleted":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#999999","defaultStyle":{"border":"#b4c8dd","background":"#c8ddf1"}},"theory-axiom":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"deleted":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#999999","defaultStyle":{"border":"#f1f1f1","background":"#f8f8f8"}},"passive":{"hidden":false,"markedStyle":{"border":"#f8adc8","background":"#ffdde3"},"highlightStyle":{"border":"#f8cfc1","background":"#f8cfc1"},"shape":"box","text":"#000000","defaultStyle":{"border":"#FF3232","background":"#FF5959"}},"activated-deleted":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#bbbbbb","background":"#dddddd"}},"activated":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#bbbbbb","background":"#dddddd"}},"lemma":{"hidden":false,"markedStyle":{"border":"#16941c","background":"#a3f7a7"},"highlightStyle":{"border":"#16941c","background":"#a3f7a7"},"shape":"star","text":"#000000","defaultStyle":{"border":"#16941c","background":"#a3f7a7"}},"boundary-hidden":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"boundary":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}},"sameExprID":{"hidden":false,"markedStyle":{"border":"#ee3377","background":"#ffaabb"},"highlightStyle":{"border":"#ee8866","background":"#ee8866"},"shape":"box","text":"#000000","defaultStyle":{"border":"#4477aa","background":"#77aadd"}}}')},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a(52),n=(a(137),a(28)),i=a(4),o=a(3),l=a.n(o),p=a(7),c=(a(139),a(49));class h extends r.Component{constructor(...e){super(...e),this.slider=r.createRef()}render(){var e=this.props,t=e.historyLength,a=e.currentTime,s=e.onCurrentTimeChange;return console.log("historyLength",t),r.createElement("section",{className:"component-slider"},r.createElement("button",{disabled:!this.props.enabled||a<=0,onClick:()=>s(a-1)},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(c,"#history-back")}))),r.createElement("section",{className:"wrapper"},r.createElement("input",{ref:this.slider,type:"range",min:0,max:t,value:a,disabled:!this.props.enabled,onChange:()=>s(this.getSliderValue())})),r.createElement("button",{disabled:!this.props.enabled||a>=t,onClick:()=>s(a+1)},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(c,"#history-forward")}))))}getSliderValue(){return this.slider.current?parseInt(this.slider.current.value,10):0}}var d=a(43);a(140);class m extends Error{constructor(e){super(e),this.name="SatVisAssertionError"}}function u(e,t=""){if(!e)throw new m("Assertion failed: "+(t||""))}var f=a(8),g=a(141),_=["#e6194B","#f58231","#3cb44b","#42d4f4","#000075","#469990","#911eb4","#f032e6","#fabebe","#800000"];function b(e,t){var a=new Map;for(var r in e){var s=e[r];a[s.exprID]=s.expr}var n={};for(var i in e){var o=e[i];if("EType.ADD_LEM"===o.event_type){var l=o.exprID,p=o.level,c=o.pobID;c in n||(n[c]=new Array);var h,d=!1,m=Object(f.a)(n[c]);try{for(m.s();!(h=m.n()).done;){var u=h.value;if(u[0]===l){d=!0;var g=u[1];(p>u[2]||"oo"===p)&&(u[2]=p),p<g&&(u[1]=p);break}}}catch(_){m.e(_)}finally{m.f()}d||n[o.pobID].push([l,p,p])}}return n}function v(e,t){var a=new Map;for(var r in e){var s=e[r],n={raw:s.expr.raw,readable:s.expr.readable,lhs:[],edited:s.expr.readable,changed:!1};a[s.exprID]=n}return a}function y(e,t,a,r,s=-1){var n=g[t],i=a.includes(e.nodeID),o={border:i?n.markedStyle.border:n.defaultStyle.border,background:i?n.markedStyle.background:n.defaultStyle.background,highlight:{border:n.highlightStyle.border,background:n.highlightStyle.background}};return"lemma"===t&&-1!==s&&(o={border:_[s],background:_[s],highlight:{border:_[s],background:_[s]}}),{id:e.nodeID,shape:r>0?r>1?"hexagon":"star":n.shape,fixed:!0,color:o}}class x extends r.Component{constructor(...e){super(...e),this.state={metaPressed:!1},this.network=null,this.networkNodes=new d.DataSet([]),this.networkEdges=new d.DataSet([]),this.graphContainer=r.createRef(),this.boundKeyupHandler=this.keyupHandler.bind(this)}componentDidMount(){this.generateNetwork(),this.updateNetwork(!1,this.props.layout),this.network.fit(),window.addEventListener("keyup",this.boundKeyupHandler,!1)}componentWillUnmount(){window.removeEventListener("keyup",this.boundKeyupHandler,!1)}componentDidUpdate(e){this.updateNetwork(!1,this.props.layout)}render(){return r.createElement("section",{className:"component-graph",ref:this.graphContainer},r.createElement("canvas",null))}generateNetwork(){var e=this;console.log("I am Graph. I receive:",this.props),u(this.graphContainer.current),u(!this.network),this.network=new d.Network(this.graphContainer.current,{nodes:this.networkNodes,edges:this.networkEdges},{physics:!1,interaction:{multiselect:!1},layout:{hierarchical:{direction:"UD",sortMethod:"directed"}}}),this.network.on("click",function(){var t=Object(p.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.nodes.length>0?(u(1===a.nodes.length),r=a.nodes[0],console.log("clickEvent.nodes",a.nodes),console.log("clickedNodeId",e.props.tree[r]),e.props.onNodeSelectionChange(a.nodes)):e.props.onNodeSelectionChange([]);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}updateNetwork(e,t){if("SatVis"===t)this.visLayout(this.props.tree);else if("PobVis"===t){var a=function(e){var t=JSON.parse(JSON.stringify(e));for(var a in t){var r=t[a];if("EType.EXP_POB"===r.event_type){var s,n=t[r.parent],i=n.children,o=!1,l=void 0,p=Object(f.a)(i);try{for(p.s();!(s=p.n()).done;){var c=t[s.value];if(c.nodeID!==r.nodeID&&c.exprID===r.exprID){o=!0,l=c;break}}}catch(v){p.e(v)}finally{p.f()}if(o){r.to_be_vis=!1;var h,d=Object(f.a)(r.children);try{for(d.s();!(h=d.n()).done;){var m=h.value;t[m].parent=l.nodeID,l.children.push(m)}}catch(v){d.e(v)}finally{d.f()}var u,g=new Array,_=Object(f.a)(i);try{for(_.s();!(u=_.n()).done;){var b=u.value;b!==r.nodeID&&g.push(b)}}catch(v){_.e(v)}finally{_.f()}n.children=g}}else r.to_be_vis=!1}return t}(this.props.tree);this.visLayout(a)}}visLayout(e){var t=this,a=this.props.nodeSelection.length>0,r=Number.MIN_SAFE_INTEGER,s=[];a&&(r=e[this.props.nodeSelection[0]].exprID,s=r in this.props.PobLemmasMap?this.props.PobLemmasMap[r].map(e=>({id:e[0],start:e[1],end:e[2]})):[]);var n=new Array,i=new Array,o=0,l=function(a){var l=e[a];if(!l.to_be_vis)return"continue";var p=void 0,c=(l.exprID in t.props.PobLemmasMap?t.props.PobLemmasMap[l.exprID].filter(e=>"oo"===e[2]):[]).filter(e=>e[1]===l.level||"oo"===e[1]).length;p=l.exprID===r?y(l,"sameExprID",t.props.nodeSelection,c):s.length>0&&s.filter(e=>e.id===l.exprID).length>0?y(l,"lemma",t.props.nodeSelection,c,s.findIndex(e=>e.id===l.exprID)%10):l.nodeID>t.props.currentTime?y(l,"activated",t.props.nodeSelection,c):y(l,"passive",t.props.nodeSelection,c),n.push(p);var h=function(e,t,a,r){return{id:e,arrows:"to",color:{color:"#dddddd",highlight:"#f8cfc1"},from:t,to:a,smooth:!1,hidden:r}}(o,l.parent,l.nodeID,!1);i.push(h),o++};for(var p in e)l(p);this.networkNodes.clear(),this.networkNodes.add(n),this.networkEdges.clear(),this.networkEdges.add(i)}keyupHandler(e){if(1===this.props.nodeSelection.length){var t=function(e,t,a){u(a),u("body"in a);var r=a.body.nodes[e],s=r.id,n=Number.MAX_SAFE_INTEGER;if("ArrowLeft"===t)for(var i in a.body.nodes){var o=a.body.nodes[i],l=r.x-o.x;o.y===r.y&&(l>0&&l<n&&(s=o.id,n=l))}else if("ArrowRight"===t)for(var p in a.body.nodes){var c=a.body.nodes[p],h=c.x-r.x;c.y===r.y&&(h>0&&h<n&&(s=c.id,n=h))}else if("ArrowDown"===t&&r.edges.length>=2)s=r.edges.filter(e=>e.fromId===r.id)[0].toId;else if("ArrowUp"===t&&r.edges.length>=1){var d=r.edges.filter(e=>e.toId===r.id);d.length>0&&(s=d[0].fromId)}return s}(this.props.nodeSelection[0],e.key,this.network);this.props.onNodeSelectionChange([t])}}}var E=a(100);a.n(E).a.setAppElement("#root");class S extends r.Component{componentDidMount(){}render(){return r.createElement("main",null,r.createElement("input",{type:"text",value:this.props.runCmd,readOnly:!0}),r.createElement(x,{tree:this.props.tree,onNodeSelectionChange:this.props.onNodeSelectionChange,nodeSelection:this.props.nodeSelection,currentTime:this.props.currentTime,layout:this.props.layout,PobLemmasMap:this.props.PobLemmasMap}),r.createElement(h,{historyLength:this.props.historyLength,currentTime:this.props.currentTime,onCurrentTimeChange:this.props.onCurrentTimeChange,enabled:!0}))}}a(93),a(153);var k=a(101);var C=a(102),w={"<=":">",">=":"<","!=":"=","<":">=",">":"<=","=":"!=","&&":"||","||":"&&",not:""},N=["&&","||","=>"];function A(e){return"("!==e[0]&&(e="("+e+")"),function e(t,a){var r={and:"&&",or:"||"};if(t.length<1)return"";if(t[0]in r)return e(t.splice(1),r[t[0]]);if(["!=","=","<=",">=",">","<","+","*","/"].indexOf(t[0])>=0||"-"===t[0]&&3===t.length)return"("+e(t[1],"")+" "+t[0]+" "+e(t[2],"")+")";if("select"===t[0])return t[1]+"["+t[2]+"]";if("not"===t[0])return t[1][0]in w&&(t[1][0]=w[t[1][0]]),e(t[1],"");if(""!==a&&1===t.length)return e(t[0],"");if(""!==a)return e(t[0],"")+" "+a+"\n"+e(t.splice(1),a);if("-"===t[0])return t[0]+t[1];if("string"===typeof t[0]&&Array.isArray(t)&&t.length>1)return t[0]+": ("+e(t[1],"")+")";return t}(Object(C.a)(e),"")}function M(e,t){if(""===t)return e;if("string"===typeof e)for(var a=t.split(" "),r=0;r<a.length;r++){var s=new RegExp("[a-zA-z0-9@$:!]+_"+r+"_n","gi");e=e.replace(s,a[r])}return e}function O(e){var t=function(e){for(var t=Object.keys(w),a=0;a<t.length;a++)if(e.includes(t[a]))return t[a];return"not"}(e);return"not"===t?t+" "+e:e.replace(t,w[t])}function P(e){for(var t=0;t<N.length;t++)if(e.includes(N[t]))return N[t]}function D(e,t){for(var a=e.split(t),r=[],s=0;s<a.length;s++)""!==a[s]&&r.push(a[s].trim());return r}class R extends r.Component{constructor(e){super(e),this.keep=!1,this.type_map={EQUALS:"= ",PLUS:"+ ",TIMES:"* ",LT:"< ",LE:"<= ",GT:"> ",GE:">= ",SYMBOL:"","0_REAL_CONSTANT":""},this.state={transformationFlag:!1,transformationErrorFlag:!1,appliedTransformation:""}}node_to_string(e,t){var a="",r=t?"\n":"";if(Array.isArray(e.content)){var s,n=Object(f.a)(e.content);try{for(n.s();!(s=n.n()).done;){var i=s.value;a+=this.node_to_string(i,!1)+r}}catch(o){n.e(o)}finally{n.f()}}else a+=e.content;return e.type in this.type_map?""===this.type_map[e.type]?" "+a:"("+this.type_map[e.type]+a+")":"("+e.type+r+a+")"}getLemmaList(e){var t=this,a=[];if("EType.EXP_POB"===e.event_type&&(a.push(r.createElement("h2",{key:"lemma-title"}," Lemmas summarization ")),e.exprID in this.props.PobLemmasMap)){var s,n=this.props.PobLemmasMap[e.exprID],i=Object(f.a)(n);try{var o=function(){var e=s.value,i=n.indexOf(e),o={color:_[i]};a.push(r.createElement("h3",{style:o,key:"lemma-header-"+e[0]},"ExprID: ",e[0],", From: ",e[1]," to ",e[2]));var l=t.props.ExprMap[e[0]].edited;if("string"===typeof l){if(Object.keys(t.props.relatedExprMap).length>0)for(var p=Object.keys(t.props.relatedExprMap),c=0;c<p.length;c++){var h=t.props.relatedExprMap[p[c]];if(l===h.readable){l=h.edited;break}}for(var d=D(l,"\n"),m=-1,u=0;u<d.length;u++)if(d[u].includes("=>")){m=u;break}d.forEach((s,n)=>{var i={color:"black"};-1!==m&&n>m&&(i.color="darkblue"),d.length,a.push(r.createElement("pre",{style:i,onClick:t.addLemma.bind(t,e[0]),key:"lemma-expr-"+e[0]+n},s))})}else a.push(r.createElement("pre",null,l))};for(i.s();!(s=i.n()).done;)o()}catch(l){i.e(l)}finally{i.f()}}return a}addLemma(e,t){var a=this.props.ExprMap[e].readable,r=D(a,P(a)),s=function(e){for(var t=0;t<N.length;t++)e=e.replace(N[t],"");return e}(t.target.innerText),n=function(e,t){for(var a=0;a<e.length;a++)if(t===e[a]||t===O(e[a]))return a;return-1}(r,s=s.trim()),i=this.props.ExprMap[e].lhs;i.includes(n)?i.splice(i.indexOf(n),1):i.push(n),this.props.ExprMap[e].lhs=i,this.props.ExprMap[e].edited=function(e,t,a){if("string"!==typeof e)return e;for(var r=[],s=[],n=D(e,a),i="",o=0;o<n.length;o++)t.indexOf(o)>-1?(i=0===r.length?O(n[o])+i:O(n[o])+" "+w[a]+"\n"+i,r.push(o)):(i=0===s.length?i+" =>\n"+n[o]:i+" "+a+"\n"+n[o],s.push(o)),o===n.length-1&&(0===r.length&&(i="true "+i),0===s.length&&(i+=" =>\nfalse"));return i}(a,i,P(a)),this.props.ExprMap[e].changed=0!==i.length,this.props.saveExprs(),this.forceUpdate()}transformExprs(){var e=this;return Object(p.a)(l.a.mark((function t(){var a,r,s,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({transformationFlag:!1,transformationErrorFlag:!1}),t.next=3,fetch("http://localhost:5000/spacer/transform_exprs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.props.name})});case 3:if(200!==(a=t.sent).status){t.next=16;break}return t.next=7,a.json();case 7:r=t.sent,s=r.response.Lemmas,n=r.response.FinalProgram,Object.keys(s).forEach(t=>{e.props.ExprMap[t].edited=s[t].Edited,e.props.ExprMap[t].lhs=s[t].Lhs}),e.props.saveExprs(),e.setState({transformationFlag:!0,appliedTransformation:n}),e.forceUpdate(),t.next=17;break;case 16:e.setState({transformationErrorFlag:!0});case 17:case"end":return t.stop()}}),t)})))()}render(){var e,t;return this.props.nodes.length>1&&(e=this.props.nodes[0],t=this.props.nodes[1]),r.createElement("div",null,this.props.nodes.length>1&&r.createElement("section",{className:"component-node-details details-diff"},r.createElement("article",null,r.createElement("h2",null,"Diff (Node: ",r.createElement("strong",null,e.nodeID)," vs. Node: ",r.createElement("strong",null,t.nodeID),")"),function(e,t){for(var a=[],r=e.split("\n"),s=t.split("\n"),n=0;n<Math.min(r.length,s.length);n++){var i=k.diffWords(r[n],s[n]);i.push({added:!1,removed:!1,value:"\n"}),a=a.concat(i),console.log(a)}return console.log(a),a}(e.expr.readable,t.expr.readable).map((e,t)=>r.createElement("span",{key:t,className:e.added?"green":e.removed?"red":"black"},e.value)))),this.props.nodes.map((t,a)=>{var s="type:"+t.event_type+" level:"+t.level,n=this.getLemmaList(t),i=t.expr.readable;"SMT"===this.props.expr_layout?console.log(t.expr):t.ast_json&&(i+=this.node_to_string(t.ast_json,!0));var o="component-node-details details-top-"+a,l="component-node-details details-bottom-"+a;return r.createElement("div",{key:a},r.createElement("section",{className:o},r.createElement("article",null,r.createElement("h2",null,"Node ",r.createElement("strong",null,t.nodeID,", "),"Expr ",r.createElement("strong",null," ",t.exprID," "),", Parent ",r.createElement("strong",null," ",t.pobID,"  ")),r.createElement("h3",null,s),r.createElement("pre",{className:1===this.props.nodes.length?"black":t===e?"red":"green"},i))),n.length>0&&r.createElement("section",{className:l},r.createElement("article",null,n,r.createElement("button",{onClick:this.transformExprs.bind(this)},"Apply Transform"),this.state.transformationFlag&&r.createElement("p",null,"Transformation Complete"),this.state.transformationFlag&&r.createElement("p",null,"Applied Transformation: ",this.state.appliedTransformation),this.state.transformationErrorFlag&&r.createElement("p",{style:{color:"red"}},"Internal Server Error: Please Try Again"))))}))}}class T extends r.Component{constructor(e){super(e),this.state={matchingFiles:[],exps:[],selected:""}}componentDidMount(){var e=this;return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchExps();case 2:return e.getMatchingFiles(),t.next=5,e.getMatchingExprMap();case 5:case"end":return t.stop()}}),t)})))()}getMatchingFiles(){var e=this.state.exps.filter(e=>e.name.includes(this.props.name.match(/.*.smt2/))&&e.name!==this.props.name);e.length>0&&this.setState({matchingFiles:e,selected:e[0].name})}getMatchingExprMap(){var e=this;return Object(p.a)(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/get_exprs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.state.selected})});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:r=t.sent,e.props.updateRelatedExprMap(JSON.parse(r.expr_map)),t.next=15;break;case 10:if(t.prev=10,t.t0=t.catch(3),"SatVisAssertionError"!==t.t0.name){t.next=14;break}throw t.t0;case 14:e.setState({exps:[]});case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}fetchExps(){var e=this;return Object(p.a)(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/fetch_exps",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:""});case 2:return a=t.sent,t.prev=3,t.next=6,a.json();case 6:r=t.sent,e.setState({exps:r.exps_list}),t.next=15;break;case 10:if(t.prev=10,t.t0=t.catch(3),"SatVisAssertionError"!==t.t0.name){t.next=14;break}throw t.t0;case 14:e.setState({exps:[]});case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}updateSelected(e){this.setState({selected:e.target.value})}render(){return r.createElement("section",{className:"component-node-details details-top-right"},r.createElement("select",{id:"exprs",onChange:this.updateSelected.bind(this)},this.state.matchingFiles.length>0&&this.state.matchingFiles.map((e,t)=>r.createElement("option",{key:t,value:e.name},e.name))),r.createElement("button",{onClick:this.getMatchingExprMap.bind(this)},"Get Expr Map"))}}var L=T,F=a(49);class I extends r.Component{constructor(e){super(e),this.state={relatedExprMap:[]}}createButton(e,t,a){return r.createElement("button",{title:e,onClick:t},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(F,"#").concat(a)})))}getNodeDetails(){if(this.props.nodeSelection.length>=1&&null!=this.props.tree){var e,t=[],a=Object(f.a)(this.props.nodeSelection);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push(this.props.tree[s])}}catch(n){a.e(n)}finally{a.f()}return r.createElement(R,{nodes:t,name:this.props.name,PobLemmasMap:this.props.PobLemmasMap,ExprMap:this.props.ExprMap,layout:this.props.layout,expr_layout:this.props.expr_layout,saveExprs:this.props.saveExprs,relatedExprMap:this.state.relatedExprMap})}return r.createElement("section",{className:"component-node-details overview"},r.createElement("small",{id:"nodeInfo"}," ",r.createElement("strong",null,"".concat(this.props.nodeSelection.length," nodes")," ")," selected"))}updateRelatedExprMap(e){this.setState({relatedExprMap:e})}render(){return console.log(this.props.mode),r.createElement("aside",null,r.createElement("article",null,this.props.messages_q.map(e=>r.createElement("section",{className:"component-node-menu"},e)),r.createElement("section",{className:"component-node-menu"},this.createButton("Poke",this.props.onPoke,"graph-undo"),this.createButton("SatVis",this.props.SatVisLayout,"node-parents"),this.createButton("PobVis",this.props.PobVisLayout,"node-children"),this.createButton("MultiSelect",this.props.MultiSelectMode,"history-forward"),r.createElement("button",{title:"SMT",onClick:this.props.SMTLayout},r.createElement("svg",{viewBox:"0 0 30 30",className:"icon big"},r.createElement("text",{x:"50%",alignmentBaseline:"middle",textAnchor:"middle",y:"50%",dominantBaseline:"middle",fontWeight:"light",stroke:"none",fill:"black",fontFamily:"monospace"},"Raw"))),r.createElement("button",{title:"JSON",onClick:this.props.JSONLayout},r.createElement("svg",{viewBox:"0 0 35 35",className:"icon big"},r.createElement("text",{x:"50%",alignmentBaseline:"middle",textAnchor:"middle",y:"50%",dominantBaseline:"middle",fontWeight:"light",stroke:"none",fill:"black",fontFamily:"monospace"},"Sort"))))),this.getNodeDetails(),r.createElement(L,{name:this.props.name,updateRelatedExprMap:this.updateRelatedExprMap.bind(this)}))}}var B=I;a(154);class j extends r.Component{constructor(...e){super(...e),this.state={exp_path:this.props.exp_path,state:"waiting",trees:[],runCmd:"Run command:",messages_q:[""],nodeSelection:[],currentTime:0,layout:"PobVis",expr_layout:"SMT",PobLemmasMap:{},ExprMap:{},multiselect:!1,varNames:""}}componentDidMount(){var e=this;return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("iterative"!==e.props.mode){t.next=5;break}return t.next=3,e.runSpacer(e.props.problem,e.props.spacerUserOptions,e.props.mode);case 3:t.next=7;break;case 5:return t.next=7,e.poke();case 7:case"end":return t.stop()}}),t)})))()}poke(){var e=this;return Object(p.a)(l.a.mark((function t(){var a,r,s,n,i,o,p,c,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=["Poking Spacer..."],console.log("poking..."),e.setState({state:"waiting",messages_q:a}),t.next=5,fetch("http://localhost:5000/spacer/poke",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.state.exp_path})});case 5:return r=t.sent,t.prev=6,t.next=9,r.json();case 9:for(s=t.sent,console.log("backend response:",s),a=["Get response from Backend."],n=s.nodes_list,i=0;i<Object.keys(n).length;i++)o=M(n[i].expr,s.var_names),p=A(o),n[i].expr={raw:o,readable:p};"loaded",c=b(n,s.var_names),h=""===s.expr_map?v(n,s.var_names):JSON.parse(s.expr_map),e.setState({trees:[n],runCmd:s.run_cmd,messages_q:["Spacer is "+s.spacer_state],state:"loaded",PobLemmasMap:c,ExprMap:h,varNames:s.var_names}),console.log("state is set"),t.next=26;break;case 21:if(t.prev=21,t.t0=t.catch(6),"SatVisAssertionError"!==t.t0.name){t.next=25;break}throw t.t0;case 25:e.setState({state:"error",messages_q:["Error: ".concat(t.t0.message)]});case 26:case"end":return t.stop()}}),t,null,[[6,21]])})))()}saveExprMap(){var e=this;return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/spacer/save_exprs",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({exp_path:e.state.exp_path,expr_map:JSON.stringify(e.state.ExprMap)})});case 2:case"end":return t.stop()}}),t)})))()}runSpacer(e,t,a){var r=this;return Object(p.a)(l.a.mark((function s(){var n,i,o,p,c;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r.setState({state:"waiting",messages_q:["Waiting for Spacer..."]}),s.next=3,fetch("http://localhost:5000/spacer/start_iterative",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:r.props.name,file:e,spacerUserOptions:t,varNames:r.props.varNames})});case 3:return n=s.sent,s.prev=4,s.next=7,n.json();case 7:i=s.sent,console.log("backend response:",i),"success"===i.status?(o="iterative"===a&&"running"===i.spacer_state?"loaded iterative":"loaded",p=["Hit Poke to update graph"],r.setState({exp_path:i.exp_name,messages_q:p,state:o})):(u("error"===i.status),u(void 0!==(c=i.message)&&null!==c),r.setState({state:"error",messages_q:[c]})),s.next=17;break;case 12:if(s.prev=12,s.t0=s.catch(4),"SatVisAssertionError"!==s.t0.name){s.next=16;break}throw s.t0;case 16:r.setState({state:"error",messages_q:["Error: ".concat(s.t0.message)]});case 17:case"end":return s.stop()}}),s,null,[[4,12]])})))()}updateNodeSelection(e){if(this.state.multiselect){var t=this.state.nodeSelection.slice(this.state.nodeSelection.length-1).concat(e);this.setState({nodeSelection:t})}else this.setState({nodeSelection:e})}updateCurrentTime(e){u(this.state.trees.length>0),this.setState({currentTime:e})}setPobVisLayout(){this.setState({layout:"PobVis"})}setSatVisLayout(){this.setState({layout:"SatVis"})}setMultiSelect(){this.state.multiselect?this.state.nodeSelection.length>0?this.setState({nodeSelection:[this.state.nodeSelection[this.state.nodeSelection.length-1]]}):this.setState({messages_q:["Hit Poke to update graph"]}):this.setState({messages_q:["Select Up to 2 nodes"]}),this.setState({multiselect:!this.state.multiselect})}setSMTLayout(){this.setState({expr_layout:"SMT"})}setJSONLayout(){this.setState({expr_layout:"JSON"})}render(){var e,t,a=this.state,s=a.state,n=a.trees,i=a.runCmd,o=a.messages_q,l=a.nodeSelection,p=a.currentTime,c=a.layout,h=a.expr_layout,d=a.PobLemmasMap,m=a.ExprMap;if("loaded"===s){u(n.length>0),e=n[n.length-1];var f=Object.keys(e).length;t=r.createElement(S,{mode:this.props.mode,runCmd:i,tree:e,onNodeSelectionChange:this.updateNodeSelection.bind(this),nodeSelection:l,historyLength:f,currentTime:p,onCurrentTimeChange:this.updateCurrentTime.bind(this),layout:c,PobLemmasMap:d})}else t=r.createElement("main",null,r.createElement("section",{className:"slider-placeholder"}));return r.createElement("div",{className:"app"},t,r.createElement(B,{messages_q:o,mode:this.props.mode,tree:e,nodeSelection:l,onUpdateNodeSelection:this.updateNodeSelection.bind(this),onPoke:this.poke.bind(this),SatVisLayout:this.setSatVisLayout.bind(this),PobVisLayout:this.setPobVisLayout.bind(this),MultiSelectMode:this.setMultiSelect.bind(this),SMTLayout:this.setSMTLayout.bind(this),JSONLayout:this.setJSONLayout.bind(this),PobLemmasMap:d,ExprMap:m,layout:c,expr_layout:h,saveExprs:this.saveExprMap.bind(this),name:this.state.exp_path}))}}var V=j;a(155);class U extends r.Component{render(){return r.createElement("div",{id:"appWrapper"},r.createElement(V,{name:this.props.name,problem:this.props.problem,exp_path:this.props.exp_path,spacerUserOptions:this.props.spacerUserOptions,mode:this.props.mode,hideBracketsAssoc:this.props.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.props.nonStrictForNegatedStrictInequalities,orientClauses:this.props.orientClauses,varNames:this.props.varNames}))}}a(156);var z=a(108);class q extends r.Component{constructor(e){super(e),this.state={isFetching:!1,exps:[]}}componentDidMount(){var e=this;return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchExps();case 2:case"end":return t.stop()}}),t)})))()}render(){return r.createElement("div",null,this.state.exps.map((e,t)=>r.createElement("h5",{key:e.name},r.createElement(n.b,{to:{pathname:"/replay/".concat(e.name)}},e.name)," $",e.done)),r.createElement("p",null,this.state.isFetching?"Fetching experiments...":""))}fetchExps(){var e=this;return Object(p.a)(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isFetching:!0}),t.next=3,fetch("http://localhost:5000/spacer/fetch_exps",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:""});case 3:return a=t.sent,t.prev=4,t.next=7,a.json();case 7:r=t.sent,console.log(r),e.setState({isFetching:!1,exps:r.exps_list}),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(4),"SatVisAssertionError"!==t.t0.name){t.next=16;break}throw t.t0;case 16:e.setState({exps:[]});case 17:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}var H=[{name:"fp.spacer.arith.solver",type:"unsigned int"},{name:"fp.spacer.blast_term_ite_inflation",type:"unsigned int"},{name:"fp.spacer.ctp",type:"bool"},{name:"fp.spacer.dump_benchmarks",type:"bool"},{name:"fp.spacer.dump_threshold",type:"double"},{name:"fp.spacer.elim_aux",type:"bool"},{name:"fp.spacer.eq_prop",type:"bool"},{name:"fp.spacer.gpdr",type:"bool"},{name:"fp.spacer.gpdr.bfs",type:"bool"},{name:"fp.spacer.ground_pobs",type:"bool"},{name:"fp.spacer.iuc",type:"unsigned int"},{name:"fp.spacer.iuc.arith",type:"unsigned int"},{name:"fp.spacer.iuc.debug_proof",type:"bool"},{name:"fp.spacer.iuc.old_hyp_reducer",type:"bool"},{name:"fp.spacer.iuc.print_farkas_stats",type:"bool"},{name:"fp.spacer.iuc.split_farkas_literals",type:"bool"},{name:"fp.spacer.keep_proxy",type:"bool"},{name:"fp.spacer.logic",type:"symbol"},{name:"fp.spacer.max_level",type:"unsigned int"},{name:"fp.spacer.max_num_contexts",type:"unsigned int"},{name:"fp.spacer.mbqi",type:"bool"},{name:"fp.spacer.min_level",type:"unsigned int"},{name:"fp.spacer.native_mbp",type:"bool"},{name:"fp.spacer.order_children",type:"unsigned int"},{name:"fp.spacer.p3.share_invariants",type:"bool"},{name:"fp.spacer.p3.share_lemmas",type:"bool"},{name:"fp.spacer.print_json",type:"symbol"},{name:"fp.spacer.propagate",type:"bool"},{name:"fp.spacer.push_pob",type:"bool"},{name:"fp.spacer.push_pob_max_depth",type:"unsigned int"},{name:"fp.spacer.q3",type:"bool"},{name:"fp.spacer.q3.instantiate",type:"bool"},{name:"fp.spacer.q3.qgen.normalize",type:"bool"},{name:"fp.spacer.q3.use_qgen",type:"bool"},{name:"fp.spacer.random_seed",type:"unsigned int"},{name:"fp.spacer.reach_dnf",type:"bool"},{name:"fp.spacer.reset_pob_queue",type:"bool"},{name:"fp.spacer.restart_initial_threshold",type:"unsigned int"},{name:"fp.spacer.restarts",type:"bool"},{name:"fp.spacer.simplify_lemmas_post",type:"bool"},{name:"fp.spacer.simplify_lemmas_pre",type:"bool"},{name:"fp.spacer.simplify_pob",type:"bool"},{name:"fp.spacer.trace_file",type:"symbol"},{name:"fp.spacer.use_array_eq_generalizer",type:"bool"},{name:"fp.spacer.use_bg_invs",type:"bool"},{name:"fp.spacer.use_derivations",type:"bool"},{name:"fp.spacer.use_euf_gen",type:"bool"},{name:"fp.spacer.use_inc_clause",type:"bool"},{name:"fp.spacer.use_inductive_generalizer",type:"bool"},{name:"fp.spacer.use_lemma_as_cti",type:"bool"},{name:"fp.spacer.use_lim_num_gen",type:"bool"},{name:"fp.spacer.validate_lemmas",type:"bool"},{name:"tr",type:"bool"},{name:"fp.spacer.weak_abs",type:"bool"}],G=a(104),J=a.n(G);class W extends r.Component{constructor(...e){super(...e),this.state={optionTypeHTML:r.createElement("div",null),optionType:"",optionValue:"",optionName:"",allOptions:[],showOptions:!0}}updateSpacerOptions(){var e,t=this.state.allOptions,a="",r=Object(f.a)(t);try{for(r.s();!(e=r.n()).done;){var s=e.value;"flag"===s.type?a+="-"+s.name+" ":a+=s.name+"="+s.value+" "}}catch(n){r.e(n)}finally{r.f()}this.props.changeSpacerUserOptions(a)}storeSpacerOptions(e){if(e.preventDefault(),e.target.reset(),""!==this.state.optionName&&("custom"===this.state.optionType||""!==this.state.optionValue)){var t=this.state.allOptions;t.push({name:this.state.optionName,value:this.state.optionValue,type:""===this.state.optionValue?"flag":this.state.optionType}),this.setState({allOptions:t}),this.setState({optionName:"",optionValue:"",optionType:""}),this.updateSpacerOptions()}}displaySpacerOptions(){return""!==this.props.spacerUserOptions?this.props.spacerUserOptions.trim().split(" "):[]}updateOptionValue(e){this.setState({optionValue:e.target.value})}getOptions(e,t){"bool"===t?this.setState({optionTypeHTML:r.createElement(r.Fragment,null,r.createElement("input",{type:"radio",name:e,value:"true",onClick:this.updateOptionValue.bind(this)}),"True",r.createElement("input",{type:"radio",name:e,value:"false",onClick:this.updateOptionValue.bind(this)}),"False",r.createElement("button",{className:"fake-button",type:"submit",value:"Submit"},"+"))}):this.setState({optionTypeHTML:r.createElement(r.Fragment,null,r.createElement("input",{type:"text",name:e,placeholder:t,defaultValue:this.state.optionValue,onChange:this.updateOptionValue.bind(this)}),r.createElement("button",{className:"fake-button",type:"submit",value:"Submit"},"+"))})}changeOptionType(e){var t=H.filter(t=>t.name===e.target.value),a="custom";t.length>0&&(a=t[0].type),this.setState({optionName:e.target.value,optionType:a}),this.getOptions(e.target.value,a)}removeOption(e,t){for(var a=this.state.allOptions,r=-1,s=0;s<a.length;s++)if(a[s].name===e&&a[s].value===t){r=s;break}-1!==r&&(a.splice(r,1),this.updateSpacerOptions())}changeSpacerManualUserOptions(e){var t=e.target.value;this.props.changeSpacerUserOptions(t)}showHideOptions(){this.setState({showOptions:!this.state.showOptions})}render(){var e=this.displaySpacerOptions();return r.createElement("aside",null,r.createElement("fieldset",{className:"options-card"},r.createElement("h3",null,"Z3 Options"),r.createElement("ul",null,r.createElement("li",null,r.createElement("label",{htmlFor:"userOptions",className:"form-label"},"Additional Spacer options"),r.createElement("button",{onClick:this.showHideOptions.bind(this),className:"showHideButton",title:"showHide"},r.createElement("img",{className:"eyeImage",src:J.a,alt:"eye"})),0!==e.length&&this.state.showOptions&&e.map((e,t)=>{if(""!==e){var a=e.split("="),s=a[0],n=a[1],i=n?s+": "+n:s;return r.createElement("div",{className:"displaySpacerOption",key:t},r.createElement("span",null,i),r.createElement("button",{className:"fake-button",type:"button",onClick:this.removeOption.bind(this,s,n)},"x"))}return""}),r.createElement("form",{className:"tfradio",name:"tfradio",onSubmit:this.storeSpacerOptions.bind(this)},r.createElement("input",{type:"text",className:"optionsList",list:"spacerOptions",name:"spacerOptions",onChange:this.changeOptionType.bind(this)}),r.createElement("datalist",{id:"spacerOptions"},H.map((e,t)=>r.createElement("option",{value:e.name,key:t}))),this.state.optionTypeHTML)),r.createElement("label",null,"Or using manual run parameters"),r.createElement("input",{type:"text",name:"manualRun",onChange:this.changeSpacerManualUserOptions.bind(this)}),r.createElement("li",null,r.createElement("label",{htmlFor:"varOptions",className:"form-label"},"Variable Designation"),r.createElement("p",null,"Enter a single space separated list of your chosen variables in the order they appear (var1 var2 var3 ..)"),r.createElement("input",{type:"text",name:"variables",onChange:this.props.onChangeVariables})))))}}var K=W,Z=a(49);class X extends r.Component{constructor(...e){super(...e),this.isChromeOrFirefox=!0,this.fileUpload=r.createRef(),this.monacoDiv=r.createRef(),this.monaco=null}componentDidMount(){this.isChromeOrFirefox&&(this.monaco=z.a.create(this.monacoDiv.current,{lineNumbers:"off",roundedSelection:!1,scrollBeyondLastLine:!1,scrollBeyondLastColumn:0,minimap:{enabled:!1},renderLineHighlight:"none",hideCursorInOverviewRuler:!0,links:!1,overviewRulerBorder:!1,automaticLayout:!0,lineDecorationsWidth:0,lineNumbersMinChars:0,wordWrap:"wordWrapColumn"}),this.monaco.setValue(this.props.problem),this.monaco.getModel().onDidChangeContent(()=>{this.props.onChangeProblem(this.monaco.getModel().getValue())}))}componentDidUpdate(e){u(this.isChromeOrFirefox),this.props.problem!==e.problem&&this.monaco.setValue(this.props.problem)}render(){return this.isChromeOrFirefox?r.createElement("section",{className:"component-menu"},r.createElement("h1",null,"Spacer Visualization"),r.createElement("section",{className:"editor"},r.createElement("div",{className:"editor-spacer"},r.createElement("main",null,r.createElement("div",{className:"headline-wrapper"},r.createElement("h2",null,"Input"),r.createElement("small",{className:"file-name"},this.props.problemName),r.createElement("button",{title:"Pick a new file",onClick:this.chooseFile.bind(this)},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(Z,"#graph-upload")})))),r.createElement("input",{ref:this.fileUpload,type:"file",onChange:this.uploadEncoding.bind(this)}),r.createElement("div",{ref:this.monacoDiv,className:"monaco"})),r.createElement("aside",null,r.createElement(K,{spacerUserOptions:this.props.spacerUserOptions,onChangeVariables:this.onChangeVariables.bind(this),changeSpacerUserOptions:this.props.onChangeSpacerUserOptions.bind(this)}),r.createElement(q,null)))),r.createElement("section",{className:"run-menu"},r.createElement(n.b,{to:"/iterative/",className:"fake-button"},"Hit and Run"))):r.createElement("section",{className:"unsupported-message"},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(Z,"#alert-triangle")})),r.createElement("span",null,"Your current browser is not supported. Please use Chrome or Firefox!"))}chooseFile(){this.fileUpload.current&&this.fileUpload.current.click()}onChangeVariables(e){this.props.onChangeVariables(e.target.value)}uploadEncoding(e){if(null!==e.target.files&&e.target.files.length>0){var t=e.target.files[0],a=new FileReader;a.onloadend=()=>{var e=a.result?a.result:"";this.props.onChangeProblem(e),this.props.onChangeProblemName(t.name)},a.readAsText(t)}}}a(227);var $=a(2),Y=a(109);class Q extends r.Component{constructor(e){super(e),this.totalTime=void 0,this.palette=void 0,this.totalTime=-1,this.palette=["#023FA5","#7D87B9","#BEC1D4","#D6BCC0","#BB7784","#8E063B","#4A6FE3","#8595E1","#B5BBE3","#E6AFB9","#E07B91","#D33F6A","#11C638","#8DD593","#C6DEC7","#EAD3C6","#F0B98D","#EF9708","#0FCFC0","#9CDED6","#D5EAE7","#F3E1EB","#F6C4E1","#F79CD4"]}componentDidMount(){this.createSunburst()}componentDidUpdate(e,t,a){this.createSunburst()}prepareData(){for(var e=[],t=Object.keys(this.props.data),a=0;a<t.length;a++)e.push({name:t[a],size:this.props.data[t[a]],children:[]});return e}getData(e){for(var t={},a="zzzzzzz",r=0;r<e.length;r++){var s=e[r].name,n=e[r].size;s.includes(a)?t[a].children.push({name:s,size:n,children:[]}):(t[s]={name:s,size:n,children:[]},a=s)}for(var i=Object.keys(t),o=0;o<i.length;o++)t[i[o]].children&&(t[i[o]].children=this.getData(t[i[o]].children));return Object.values(t)}createSunburst(){""===this.props.type&&$.k(".sunburst-viz").remove(),""!==this.props.type&&$.k("."+this.props.className+" .sunburst-viz").remove();var e=$.i().domain(Object.keys(this.props.data)).range(this.palette),t=this.getData(this.prepareData()),a=Object(Y.a)();a.data(t[0])(document.getElementById(this.props.className)).width(this.props.width).height(this.props.height).color(t=>e(t.name)).label(e=>e.name).size("size").tooltipTitle(e=>e.name),""!==this.props.type&&a.showLabels(!1)}render(){return this.totalTime=this.props.data.time,r.createElement("div",{className:this.props.className,id:this.props.className},""===this.props.type&&r.createElement("h2",null,"Total Time: ",this.totalTime),""!==this.props.type&&r.createElement("p",null,this.props.index))}}var ee=Q;function te(e){for(var t=e.split("_"),a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].substring(1);return t.join(" ")}class ae extends r.Component{componentDidMount(){console.log(this.props.data)}componentDidUpdate(e,t,a){console.log(this.props.data)}filterTimeData(){return Object.keys(this.props.data).filter((function(e){return e.includes("time")})).reduce((e,t)=>(e[t]=this.props.data[t],e),{})}render(){var e=this.filterTimeData();return r.createElement("div",{className:"overview"},r.createElement("div",{className:"details"},r.createElement("h1",null,this.props.data.index),["result","depth","memory","max_memory","SPACER_num_invariants","SPACER_num_lemmas","SPACER_num_propagations","SPACER_num_active_lemmas"].map((e,t)=>r.createElement("p",{className:"data-details",key:t},te(e),": ",this.props.data[e]))),r.createElement(ee,{data:e,height:600,width:600,className:"time",type:"",index:""}))}}var re=ae;class se extends r.Component{componentDidMount(){this.createResultsOverview()}componentDidUpdate(e,t,a){this.createResultsOverview()}createResultsOverview(){$.k(".results-overview svg").remove();var e=this.props.data,t=$.d(e,(function(e){return e.result})).keys(),a=$.i().domain(t).range($.j),r=$.d(e,(function(e){return e.index})).keys(),s=$.g().domain(r).range([this.props.config.margin.left,this.props.config.width-this.props.config.margin.right]),n=function(e){return s(function(e){return e.index}(e))},i=$.a(s).tickValues([]),o=function(e){return e.SPACER_num_invariants},l=$.h().domain([$.f(e,o),$.e(e,o)]).range([this.props.config.graphHeight-this.props.config.margin.top,this.props.config.margin.bottom]),p=function(e){return l(o(e))},c=$.b(l),h=$.k(".results-overview").append("svg").attr("width",this.props.config.width).attr("height",this.props.config.height);h.append("text").attr("x",this.props.config.width/2).attr("y",this.props.config.margin.top).attr("text-anchor","middle").style("font-size",this.props.config.font.title).style("text-decoration","underline").text("Index x Result x Num of Invariants"),h.append("g").attr("class","x-axis").attr("transform","translate(0,"+(this.props.config.graphHeight-this.props.config.margin.top)+")").call(i),h.append("g").attr("class","y-axis").attr("transform","translate("+this.props.config.margin.left+",0)").style("font-size",this.props.config.font.axis).call(c);var d=h.append("g");d.selectAll(".dot").data(e).enter().append("circle").attr("r",10).attr("cx",(function(e){return n(e)+s.bandwidth()/2})).attr("cy",p).on("mouseenter",(function(e){$.k(".overview-tooltip").append("text").text(e.index)})).on("mouseout",(function(e){$.k(".overview-tooltip").select("text").remove()})).on("click",this.props.selectBenchmark).style("fill",(function(e){return a(e.result)})),d.selectAll(".result-text").data(e).enter().append("text").attr("class","label").style("font-size",this.props.config.font.label).attr("x",(function(e){return n(e)+s.bandwidth()/4})).attr("y",(function(e){return p(e)-25})).attr("dy",".75em").text((function(e){return e.SPACER_num_invariants})),d.selectAll("legendDots").data(t).enter().append("circle").attr("cx",function(e,t){return this.props.config.margin.left+100*t}.bind(this)).attr("cy",this.props.config.graphHeight+15).attr("r",5).style("fill",(function(e){return a(e)})),d.selectAll("legendText").data(t).enter().append("text").attr("x",function(e,t){return this.props.config.margin.left+10+100*t}.bind(this)).attr("y",this.props.config.graphHeight+20).text((function(e){return e}))}render(){return r.createElement("div",{className:"results-overview"})}}var ne=se,ie=a(56),oe=a.n(ie);class le extends r.Component{render(){return r.createElement("div",null,this.props.data.map((e,t)=>r.createElement(ee,{key:t,data:e,height:200,width:200,className:"timezoom"+t,type:"timezoom",index:e.index})))}}var pe=le;class ce extends r.Component{componentDidMount(){this.createGraph()}componentDidUpdate(e,t,a){this.createGraph()}createGraph(){if($.k("."+this.props.className+" svg").remove(),0!==this.props.data.length){var e=this.props.data,t=$.d(e,(function(e){return e.index})).keys(),a=$.g().domain(t).range([this.props.config.margin.left,this.props.config.width-this.props.config.margin.right]),r=function(e){return a(function(e){return e.index}(e))},s=$.a(a).tickValues([]),n=function(e){return e[this.props.yValue]}.bind(this),i=$.h().domain([$.f(e,n),$.e(e,n)]).range([this.props.config.graphHeight-this.props.config.margin.top,this.props.config.margin.bottom]),o=function(e){return i(n(e))},l=$.b(i),p=$.k("."+this.props.className).append("svg").attr("width",this.props.config.width).attr("height",this.props.config.height).on("click",this.props.updateZoomView);p.append("text").attr("x",this.props.config.width/2).attr("y",this.props.config.margin.top).attr("text-anchor","middle").style("font-size",this.props.config.font.title).style("text-decoration","underline").text("Index x "+te(this.props.yValue)),p.append("g").attr("class","x-axis").attr("transform","translate(0,"+(this.props.config.graphHeight-this.props.config.margin.top)+")").call(s),p.append("g").attr("class","y-axis").attr("transform","translate("+this.props.config.margin.left+",0)").style("font-size",this.props.config.font.axis).call(l);var c=p.append("g");c.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",r).attr("y",o).attr("width",a.bandwidth()-1).attr("height",function(e){return this.props.config.graphHeight-this.props.config.margin.top-i(e[this.props.yValue])}.bind(this)),c.selectAll("."+this.props.classText).data(e).enter().append("text").style("font-size",this.props.config.font.label).attr("class","label").attr("x",(function(e){return r(e)})).attr("y",(function(e){return o(e)-15})).attr("dy",".75em").text(function(e){return e[this.props.yValue]}.bind(this))}}render(){return r.createElement("div",{className:this.props.className})}}var he=ce;class de extends r.Component{constructor(e){super(e),this.overviewMetrics=void 0,this.overviewMetrics=["depth","memory","time","result"],this.state={data:[],selectedBenchmark:"",graphMin:0,graphMax:30,customMode:!1,customData:{depth:[],result:[],memory:[],time:[]},zoomMode:"",dashboardConfig:{height:450,width:1600,graphHeight:400,margin:{top:20,right:20,bottom:50,left:60},font:{title:"20px",axis:"20px",label:"14px"},barNum:10}}}componentDidMount(){this.loadData(),document.addEventListener("keydown",this.handleGraphTranslationKeyboard.bind(this))}loadData(){var e=this.props.rawData,t=$.c(e,(function(e){return e.SPACER_cluster_out_of_gas=+e.SPACER_cluster_out_of_gas,e.SPACER_expand_pob_undef=+e.SPACER_expand_pob_undef,e.SPACER_inductive_level=+e.SPACER_inductive_level,e.SPACER_max_cluster_size=+e.SPACER_max_cluster_size,e.SPACER_max_cvx_reduced_dim=+e.SPACER_max_cvx_reduced_dim,e.depth=+e.depth,e.SPACER_max_query_lvl=+e.SPACER_max_query_lvl,e.SPACER_need_sage=+e.SPACER_need_sage,e.SPACER_num_abstractions=+e.SPACER_num_abstractions,e.SPACER_num_abstractions_failed=+e.SPACER_num_abstractions_failed,e.SPACER_num_abstractions_success=+e.SPACER_num_abstractions_success,e.SPACER_num_active_lemmas=+e.SPACER_num_active_lemmas,e.SPACER_num_cant_abstract=+e.SPACER_num_cant_abstract,e.SPACER_num_ctp_blocked=+e.SPACER_num_ctp_blocked,e.SPACER_num_dim_reduction_success=+e.SPACER_num_dim_reduction_success,e.SPACER_num_invariants=+e.SPACER_num_invariants,e.SPACER_num_is_invariant=+e.SPACER_num_is_invariant,e.SPACER_num_lemma_jumped=+e.SPACER_num_lemma_jumped,e.SPACER_num_lemmas=+e.SPACER_num_lemmas,e.SPACER_num_mbp_failed=+e.SPACER_num_mbp_failed,e.SPACER_num_merge_gen=+e.SPACER_num_merge_gen,e.SPACER_num_merge_gen_failed=+e.SPACER_num_merge_gen_failed,e.SPACER_num_merge_gen_success=+e.SPACER_num_merge_gen_success,e.SPACER_num_no_over_approximate=+e.SPACER_num_no_over_approximate,e.SPACER_num_non_lin=+e.SPACER_num_non_lin,e.SPACER_num_pobs=+e.SPACER_num_pobs,e.SPACER_num_propagations=+e.SPACER_num_propagations,e.SPACER_num_queries=+e.SPACER_num_queries,e.SPACER_num_reach_queries=+e.SPACER_num_reach_queries,e.SPACER_num_refinements=+e.SPACER_num_refinements,e.SPACER_num_reuse_reach_facts=+e.SPACER_num_reuse_reach_facts,e.SPACER_num_sync_cvx_cls=+e.SPACER_num_sync_cvx_cls,e.SPACER_num_under_approximations=+e.SPACER_num_under_approximations,e.SPACER_pob_out_of_gas=+e.SPACER_pob_out_of_gas,e.SPACER_wide_attmpts=+e.SPACER_wide_attmpts,e.SPACER_wide_success=+e.SPACER_wide_success,e.max_memory=+e.max_memory,e.memory=+e.memory,e.time=+e.time,e.time_iuc_solver_get_iuc=+e.time_iuc_solver_get_iuc,e.time_iuc_solver_get_iuc_hyp_reduce1=+e.time_iuc_solver_get_iuc_hyp_reduce1,e.time_iuc_solver_get_iuc_hyp_reduce2=+e.time_iuc_solver_get_iuc_hyp_reduce2,e.time_iuc_solver_get_iuc_learn_core=+e.time_iuc_solver_get_iuc_learn_core,e.time_pool_solver_proof=+e.time_pool_solver_proof,e.time_pool_solver_smt_total=+e.time_pool_solver_smt_total,e.time_pool_solver_smt_total_sat=+e.time_pool_solver_smt_total_sat,e.time_pool_solver_smt_total_undef=+e.time_pool_solver_smt_total_undef,e.time_spacer_ctp=+e.time_spacer_ctp,e.time_spacer_init_rules=+e.time_spacer_init_rules,e.time_spacer_init_rules_pt_init=+e.time_spacer_init_rules_pt_init,e.time_spacer_mbp=+e.time_spacer_mbp,e.time_spacer_solve=+e.time_spacer_solve,e.time_spacer_solve_propagate=+e.time_spacer_solve_propagate,e.time_spacer_solve_pt_must_reachable=+e.time_spacer_solve_pt_must_reachable,e.time_spacer_solve_reach=+e.time_spacer_solve_reach,e.time_spacer_solve_reach_children=+e.time_spacer_solve_reach_children,e.time_spacer_solve_reach_cluster=+e.time_spacer_solve_reach_cluster,e.time_spacer_solve_reach_gen_bool_ind=+e.time_spacer_solve_reach_gen_bool_ind,e.time_spacer_solve_reach_gen_merge=+e.time_spacer_solve_reach_gen_merge,e.time_spacer_solve_reach_gen_merge_cvx_cls=+e.time_spacer_solve_reach_gen_merge_cvx_cls,e.time_spacer_solve_reach_gen_wide=+e.time_spacer_solve_reach_gen_wide,e.time_spacer_solve_reach_is_reach=+e.time_spacer_solve_reach_is_reach,e}));this.setState({data:t})}handleSidebarClick(e){var t=e.target;this.setState({selectedBenchmark:t.innerText})}handleSidebarClickDot(e){this.setState({selectedBenchmark:e.index})}handleHomeClick(){this.setState({selectedBenchmark:"",customMode:!1,customData:{depth:[],time:[],memory:[],result:[]},zoomMode:"",graphMin:0,graphMax:30})}handleClearClick(){this.setState({customData:{depth:[],time:[],memory:[],result:[]}})}moveGraphLeft(){this.state.graphMin>0&&this.setState({graphMin:this.state.graphMin-1,graphMax:this.state.graphMax-1})}moveGraphRight(){this.state.graphMax<this.state.data.length-1&&this.setState({graphMin:this.state.graphMin+1,graphMax:this.state.graphMax+1})}moveGraphUp(){this.state.graphMin-10>=0&&this.setState({graphMin:this.state.graphMin-10,graphMax:this.state.graphMax-10})}moveGraphDown(){this.state.graphMax+10<this.state.data.length&&this.setState({graphMin:this.state.graphMin+10,graphMax:this.state.graphMax+10})}handleGraphTranslationClick(e){e.preventDefault();var t=e.target;"left-arrow"===t.alt?this.moveGraphLeft():"right-arrow"===t.alt&&this.moveGraphRight()}handleGraphTranslationKeyboard(e){e.preventDefault(),"ArrowLeft"===e.key?this.moveGraphLeft():"ArrowRight"===e.key?this.moveGraphRight():"ArrowDown"===e.key?this.moveGraphDown():"ArrowUp"===e.key&&this.moveGraphUp()}handleCustomClick(){this.setState({customMode:!this.state.customMode}),this.state.customMode&&this.setState({customData:{depth:[],time:[],memory:[],result:[]}})}filterDictionary(e,t=!1,a=""){var r=this.state.data.slice(this.state.graphMin,this.state.graphMax);t&&(r=this.state.data.filter((function(e){return e.index===a})));for(var s=[],n=0;n<r.length;n++){s.push({});for(var i=0;i<e.length;i++)s[n][e[i]]=r[n][e[i]]}return s}addToCustomData(e){for(var t=e.target,a=0;a<this.overviewMetrics.length;a++){var r=this.overviewMetrics[a],s=[r].concat(["index"]);"result"===r&&s.push("SPACER_num_invariants");var n=this.state.customData[r].concat(this.filterDictionary(s,!0,t.innerHTML));n.length>this.state.graphMax-this.state.graphMin&&n.splice(0,1);var i=this.state.customData;i[r]=n,this.setState({customData:i})}}setZoomView(e){this.setState({zoomMode:e,graphMin:0,graphMax:49})}render(){var e,t=$.d(this.state.data,(function(e){return e.index})).keys(),a=this.state.selectedBenchmark;if("time"===this.state.zoomMode){var s=Object.keys(this.state.data[0]).filter(e=>e.includes("time"));s.push("index"),e=this.filterDictionary(s)}return r.createElement("div",{className:"page"},r.createElement("div",{className:"sidebar",id:"sidebar"},t.map((e,t)=>this.state.customMode?this.state.customData.depth.filter(t=>t.index===e).length>0?r.createElement("li",{className:"selected",key:t,onClick:this.addToCustomData.bind(this)},e):r.createElement("li",{key:t,onClick:this.addToCustomData.bind(this)},e):a?e===a?r.createElement("li",{className:"selected",key:t,onClick:this.handleSidebarClick.bind(this)},e):r.createElement("li",{key:t,onClick:this.handleSidebarClick.bind(this)},e):t>=this.state.graphMin&&t<this.state.graphMax?r.createElement("li",{className:"selected",key:t,onClick:this.handleSidebarClick.bind(this)},e):r.createElement("li",{key:t,onClick:this.handleSidebarClick.bind(this)},e))),r.createElement("div",{className:"visual"},""!==this.state.selectedBenchmark&&r.createElement(re,{data:this.state.data.filter((function(e){return e.index===a}))[0]}),""===this.state.selectedBenchmark&&""===this.state.zoomMode&&r.createElement("div",{className:"dashboard"},this.overviewMetrics.map((e,t)=>{var a;if(this.state.customMode){if(a=this.state.customData[e],"result"===e)return r.createElement(ne,{key:t,data:a,config:this.state.dashboardConfig,selectBenchmark:this.handleSidebarClickDot.bind(this)})}else{if("result"===e)return a=this.filterDictionary([e].concat(["index","SPACER_num_invariants"])),r.createElement(ne,{key:t,data:a,config:this.state.dashboardConfig,selectBenchmark:this.handleSidebarClickDot.bind(this)});a=this.filterDictionary(["index"].concat([e]))}return r.createElement(he,{key:t,data:a,config:this.state.dashboardConfig,className:e+"-overview",classText:e+"-text",yValue:e,updateZoomView:this.setZoomView.bind(this,"time"===e?"time":"")})}),r.createElement("img",{className:"left-arrow",src:oe.a,alt:"left-arrow",onClick:this.handleGraphTranslationClick.bind(this)}),r.createElement("img",{className:"right-arrow",src:oe.a,alt:"right-arrow",onClick:this.handleGraphTranslationClick.bind(this)})),"time"===this.state.zoomMode&&r.createElement(pe,{data:e})),r.createElement("button",{className:"home-button",onClick:this.handleHomeClick.bind(this)},"Home"),r.createElement("button",{className:"custom-button",onClick:this.handleCustomClick.bind(this)},"Custom"),this.state.customMode&&r.createElement("button",{className:"clear-button",onClick:this.handleClearClick.bind(this)},"Clear"))}}var me=de;class ue extends r.Component{constructor(e){super(e),this.fileReader=void 0,this.state={rawData:[],file:null}}handleFileRead(e){var t=this.fileReader.result.toString(),a={name:e.name,id:Date.now().toString(),content:t};this.props.updateData(a)}handleFileChosen(e){e.preventDefault();var t=this.state.file;this.fileReader=new FileReader,this.fileReader.onloadend=this.handleFileRead.bind(this,t),this.fileReader.readAsText(t)}updateFile(e){this.setState({file:e.target.files[0]})}render(){return r.createElement("div",{className:"dashboard-menu"},r.createElement("h1",null,"Spacer Dashboard"),r.createElement("form",null,r.createElement("input",{type:"file",accept:".csv",onChange:this.updateFile.bind(this)}),r.createElement("button",{type:"submit",className:"fake-button",onClick:this.handleFileChosen.bind(this)},"Upload")),r.createElement("div",{className:"file-list"},r.createElement("h2",null,"Uploaded Files"),this.props.rawData.length>0&&this.props.rawData.map((e,t)=>r.createElement("li",{key:t},r.createElement("span",null,e.name),r.createElement("a",{href:"#/dashboard/"+e.id},"Analysis")))))}}var fe=ue;class ge extends r.Component{constructor(...e){super(...e),this.state={problem:"",problemName:"",spacerUserOptions:"",hideBracketsAssoc:!0,nonStrictForNegatedStrictInequalities:!0,orientClauses:!0,varNames:"",rawData:[]}}render(){return r.createElement(n.a,null,r.createElement(i.a,{path:"/",exact:!0,render:()=>r.createElement(X,{problem:this.state.problem,problemName:this.state.problemName,spacerUserOptions:this.state.spacerUserOptions,hideBracketsAssoc:this.state.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.state.nonStrictForNegatedStrictInequalities,orientClauses:this.state.orientClauses,onChangeProblem:this.changeProblem.bind(this),onChangeProblemName:this.changeProblemName.bind(this),onChangeSpacerUserOptions:this.changeSpacerUserOptions.bind(this),onChangeHideBracketsAssoc:this.changeHideBracketsAssoc.bind(this),onChangeNonStrictForNegatedStrictInequalities:this.changeNonStrictForNegatedStrictInequalities.bind(this),onChangeOrientClauses:this.changeOrientClauses.bind(this),onChangeVariables:this.changeVariables.bind(this)})}),r.createElement(i.a,{path:"/replay/:exp_id",render:({match:e})=>this.appComponent("replay",e.params.exp_id)}),r.createElement(i.a,{path:"/iterative/",render:()=>this.appComponent("iterative","")}),r.createElement(i.a,{exact:!0,path:"/dashboard/",render:()=>r.createElement(fe,{rawData:this.state.rawData,updateData:this.changeRawData.bind(this)})}),r.createElement(i.a,{path:"/dashboard/:fileId",render:({match:e})=>this.displayVisualization(e.params.fileId)}))}appComponent(e,t){var a="".concat(this.state.spacerUserOptions);return r.createElement(U,{name:this.state.problemName,exp_path:t,mode:e,problem:this.state.problem,spacerUserOptions:a,hideBracketsAssoc:this.state.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.state.nonStrictForNegatedStrictInequalities,orientClauses:this.state.orientClauses,varNames:this.state.varNames})}displayVisualization(e){var t=this.state.rawData.filter(t=>t.id===e)[0];if(t)return r.createElement(me,{rawData:t.content})}changeProblem(e){this.setState({problem:e})}changeProblemName(e){this.setState({problemName:e})}changeSpacerUserOptions(e){this.setState({spacerUserOptions:e})}changeHideBracketsAssoc(e){this.setState({hideBracketsAssoc:e})}changeNonStrictForNegatedStrictInequalities(e){this.setState({nonStrictForNegatedStrictInequalities:e})}changeOrientClauses(e){this.setState({orientClauses:e})}changeVariables(e){this.setState({varNames:e})}changeRawData(e){var t=this.state.rawData.concat([e]);this.setState({rawData:t})}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.render(r.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},49:function(e,t,a){e.exports=a.p+"static/media/all.cd5d2510.svg"},56:function(e,t,a){e.exports=a.p+"static/media/angle-arrow-down.412f3289.svg"},93:function(e,t,a){}},[[132,2,3]]]);
//# sourceMappingURL=main.448a8a61.chunk.js.map